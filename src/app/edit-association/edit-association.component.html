<div class="container-fluid np">
  <div class="col-sm-12 mt-80">
    <!--Profile section-->
    <app-left-bar></app-left-bar>
    <!--Profile section-->
    <div class="col-xs-12 col-sm-12 col-md-11 b-l">
      <!--Dashboard icons start-->
      <div class="col-md-12 dash">

        <!-- Title and enroll button part -->
         <div class="enr-bt">
            <h3 class="purple">Edit Association</h3>
            <!-- <div class="enroll">
                <div>
                  <button class="btn-primary-purple" (click)="enblEnrlAsnVew()" style="margin-right: 16px;"><i class="fa fa-plus" aria-hidden="true"></i>
                    Enroll Association</button>
                  <button class="btn-primary-purple" (click)="enblJoinAsnVew()">
                    <i class="fa fa-handshake-o" aria-hidden="true"></i>Join Association</button>
                </div>
              </div> -->
         </div>
        <!-- Title and enroll button part -->

          

        



        <!-- <div *ngIf='viewAssnService.vewAsnEnbled'>
          <input type="text" [(ngModel)]="searchTxt" class="form-control" name="searchTxt" placeholder="Search by Association Name, Property Name, Locality">
        </div> -->
        <!-- <div *ngIf='viewAssnService.vewAsnEnbled' class="dash-row table-responsive">
          <table class="table table-bordered"
            [mfData]="associations | search:['asAsnName', 'asPrpName', 'asAddress','asNofBlks','asNofUnit']:searchTxt"
            #mf="mfDataTable" (click)="onPageChange($event)" [mfRowsOnPage]="10">
            <thead>
              <tr>
                <th>S.No.</th>
                <th>
                  <mfDefaultSorter by="asAsnName">Association Name</mfDefaultSorter>
                </th>
                <th>
                  <mfDefaultSorter by="asPrpName">Property Name</mfDefaultSorter>
                </th>
                <th>
                  <mfDefaultSorter by="asAddress">Locality</mfDefaultSorter>
                </th>
                <th>
                  <mfDefaultSorter by="asNofBlks">No of Blocks</mfDefaultSorter>
                </th>
                <th>
                  <mfDefaultSorter by="asNofUnit">No of Units</mfDefaultSorter>
                </th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of mf.data;let i=index">
                <ng-container *ngIf="item == -1">
                  <td colspan="7" align="center">No Data Found</td>
                </ng-container>
                <ng-container *ngIf="item!=-1">
                  <td>{{ (10 * (p - 1) + i)+1 }}</td>
                  <td>{{item['asAsnName']}}</td>
                  <td>{{item['asPrpName']}}</td>
                  <td>{{item['asAddress']}}</td>
                  <td>{{item['asNofBlks']}}</td>
                  <td>{{item['asNofUnit']}}</td>
                  <td>
                    <i class="fa fa-eye" style="cursor: pointer;" tooltip="ViewAssociation"
                      (click)="openViewAssociation(viewreceiptmodal,item.asAsnName,item.asPrpName,item.asAddress,item.asNofUnit,item.asCountry,item.asPinCode,item.asState,item.asPrpType,item.asNofBlks,item.asRegrNum,item.asAsnLogo,item.asCity,item.aspanNum,item.aspanDoc,item.asAssnID,item.asgstNo)"></i>
                    |
                    <i (click)="OpenModal(template,item.asAsnName,item.asCountry,item.asAddress,item.asCity,item.asState,item.asPinCode,item.asPrpType,item.asPrpName,item.asNofBlks,item.asNofUnit,item.amType,item.noofAmenities,item.baBName,item.baIFSC,item.baActNo,item.baActType,item.asAssnID,'BAACID','AMID')"
                      class="fa fa-pencil" style="cursor: pointer;" tooltip="EditAssociation"></i>
                  </td>
                </ng-container>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="7">
                  <mfBootstrapPaginator></mfBootstrapPaginator>
                </td>
              </tr>
            </tfoot>
          </table>
        </div> -->
      <!-- </div> -->
      <!--Dashboard icons end-->
      <!--Enroll Association form Starts-->
      <!-- <div class="col-sm-12">
        <div style="overflow-x: scroll;">
            <div class="stepwizard" style="overflow-x: scroll;
            width: 2000px;">
              <div class="stepwizard-row setup-panel" style="display:flex">
                <div class="stepwizard-step col-lg-3 col-sm-6 col-xs-12">
                    <a href="#step-1" type="button" class="btn btn-success btn-default btn-circle-o"></a><span>Association
                      Details</span>
                </div>
              
                <div class="stepwizard-step col-lg-3 col-sm-6 col-xs-12">
                    <a href="#step-2" type="button" class="btn btn-circle-o"></a><span>Block & Unit
                      Details</span>
                </div>
             
              </div>
            </div>
        </div>
        <div class="row">
         
          <form #stepOneFrm="ngForm" id="EnrollAssnID" role="form">
            <div class="panel panel-primary setup-content" id="step-1">
            
            
              <div class="page1">
                 <div>
                  <form [formGroup]="form" class="association-form">
                    <mat-form-field class="association-full-width">
                      <mat-label>ASSOCIATION NAME</mat-label>
                      <input matInput placeholder="Association Name" pattern="[A-Za-z\s]+" autocomplete="viewAssnService.EditAssociationData['ASAsnName']"
                        matTooltip="This name should match as given in the Association Pan Card" class="text"
                        formControlName="asnname"
                        [(ngModel)]="viewAssnService.EditAssociationData['ASAsnName']" value="{{viewAssnService.EditAssociationData['ASAsnName']}}">
                      <mat-error [displayError]="isFieldValid('asnname')">
                        {{ titleAlert }}
                      </mat-error>
                    </mat-form-field>
                  </form>
                  
                 
                  <form [formGroup]="uploadForm" (ngSubmit)="processFile()">
                      <mat-label class="logoassociation">Upload logo</mat-label>
                      <i matTooltip="Upload Logo of Max 2MB of Formats allowed are:PNG,JPG and Resolution of 128*128"
                        class="fa fa-question-circle" aria-hidden="true"></i>
                    <input type="file" id="img" name="profile" (change)="onFileSelect($event)" />
                    <button mat-raised-button color="primary" class="Upload" type="submit">Upload</button>
                    <img class="Upload1" (mouseover)="showImgOnPopUp(UploadedImagetemplate,thumbnailASAsnLogo,'Association Image')"
                      src="{{thumbnailASAsnLogo}}" width="50px" height="50px" />
                  </form>
  
                
  
                <form [formGroup]="form"class="association-form">
                    <mat-form-field>
                      <mat-label class = "text">{{viewAssnService.EditAssociationData['ASCountry']}}</mat-label>
                        <mat-select [(value)]="viewAssnService.EditAssociationData['ASCountry']" formControlName="cntryname" placeholder="COUNTRY">
                            <mat-option *ngFor="let country of countrieslist" class = "text"[value]="country">{{country}}
                            </mat-option>
                        </mat-select>
                        <mat-error [displayError]="isFieldValid('cntryname')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                <form [formGroup]="form" class="association-form">
                    <mat-form-field>
                      <mat-label class = "text">{{viewAssnService.EditAssociationData['ASState']}}</mat-label>
                        <mat-select [(value)]="viewAssnService.EditAssociationData['ASState']" formControlName="statename" placeholder="STATE">
                            <mat-option *ngFor="let state of states" [value]="state">{{state}}
                            </mat-option>
                        </mat-select>
                        <mat-error [displayError]="isFieldValid('statename')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                 </div>

               <div>
                <form [formGroup]="form" class="association-form">
                  <mat-form-field class="association-full-width">
                      <mat-label>CITY</mat-label>
                      <input matInput placeholder="CITY" pattern="[a-zA-Z\s]*"formControlName="cityname" 
                      class = "text" [(ngModel)]="viewAssnService.EditAssociationData['ASCity']" value="{{viewAssnService.EditAssociationData['ASCity']}}">
                      <mat-error [displayError]="isFieldValid('cityname')">
                          {{ titleAlert }}
                      </mat-error>
                  </mat-form-field>
              </form>
              
              <form [formGroup]="form" class="association-form">
                  <mat-form-field class="association-full-width">
                      <mat-label>PIN/ZIP/POSTAL CODE</mat-label>
                      <input matInput placeholder="PIN/ZIP"pattern="[0-9]*" 
                       pattern="^\d{6,}$"
                       (keypress)=_keyPress2($event)
                      minlength="5"
                      maxlength="6" 
                      formControlName="zipcode" [(ngModel)]="viewAssnService.EditAssociationData['ASPinCode']"
                          value="{{viewAssnService.EditAssociationData['ASPinCode']}}">
                      <mat-error [displayError]="isFieldValid('zipcode')">
                          {{ titleAlert }}
                      </mat-error>
                  </mat-form-field>
              </form>
              <form [formGroup]="form" class="association-form">
                  <mat-form-field>
                    <mat-label class = "text">{{viewAssnService.EditAssociationData['ASPrpType']}}</mat-label>
                      <mat-select [(value)]="viewAssnService.EditAssociationData['ASPrpType']" formControlName="prprtytype" placeholder="PROPERTY TYPE">
                          <mat-option *ngFor="let property of propertyType" [value]="property">{{property}}
                          </mat-option>
                      </mat-select>
                      <mat-error [displayError]="isFieldValid('prprtytype')">
                          {{ titleAlert }}
                      </mat-error>
                  </mat-form-field>
              </form>
              <form [formGroup]="form" class="association-form">
                <mat-form-field class="association-full-width">
                    <mat-label>PROPERTY NAME</mat-label>
                    <input matInput placeholder="PROPERTY NAME"
                    pattern="[a-zA-Z\s]*"
                     class = "text"formControlName="prtyname"
                        [(ngModel)]="viewAssnService.EditAssociationData['ASPrpName']" value="{{viewAssnService.EditAssociationData['ASPrpName']}}">
                    <mat-error [displayError]="isFieldValid('prtyname')">
                        {{ titleAlert }}
                    </mat-error>
                </mat-form-field>
            </form>
               </div>
              <div>
                <form [formGroup]="form" class="association-form">
                  <mat-form-field class="association-full-width">
                      <mat-label>LOCALITY</mat-label>
                      <input matInput placeholder="LOCALITY"class = "text" 
                      pattern="[A-Za-z\s]+"
                      maxlength="255"
                      formControlName="locname" [(ngModel)]="viewAssnService.EditAssociationData['ASAddress']"
                          value="{{viewAssnService.EditAssociationData['ASAddress']}}">
                      <mat-error [displayError]="isFieldValid('locname')">
                          {{ titleAlert }}
                      </mat-error>
                  </mat-form-field>
              </form>
              <form [formGroup]="form" class="association-form">
                  <mat-form-field class="association-full-width">
                      <mat-label>ASSOCIATION EMAIL</mat-label>
                      <input matInput placeholder="ASSOCIATION EMAIL" 
                      pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
                      formControlName="assemail"
                          [(ngModel)]="viewAssnService.EditAssociationData['asAsnEmail']" value="{{viewAssnService.EditAssociationData['asAsnEmail']}}">
                      <mat-error [displayError]="isFieldValid('assemail')">
                          {{ titleAlert }}
                      </mat-error>
                  </mat-form-field>
              </form>
              <form [formGroup]="form" class="association-form">
                  <mat-form-field class="association-full-width">
                      <mat-label>ASSOCIATION WEBSITE URL</mat-label>
                      <input matInput placeholder="URL" 
                       pattern="^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$"
                      formControlName="urlset" [(ngModel)]="viewAssnService.EditAssociationData['asWebURL']" value="{{viewAssnService.EditAssociationData['asWebURL']}}">
                      <mat-error [displayError]="isFieldValid('urlset')">
                          {{ titleAlert }}
                      </mat-error>
                  </mat-form-field>
              </form>
              </div>
              
             
              
              
               </div>
               <div class="col-sm-12 pull-right">
                <button class="btn btn-primary-purple nextBtn m-r" type="reset" (click)="resetfields($event)">RESET</button>
                <button class="btn btn-primary-purple nextBtn m-r" type="button">SAVE & CONTINUE</button>
            </div>

      
            </div>
          </form>

          <form #stepTwoFrm="ngForm">
            <div class="panel panel-primary setup-content" id="step-2">

              <form [formGroup]="blockform" class="association-form3">
                <mat-form-field class="association-full-width">
                    <mat-label>Total No of Blocks</mat-label>
                    <input matInput placeholder="NO OF BLOCKS" 
                    (keypress)="keyPress3($event)"  maxlength="4"
                    formControlName="blockno" [(ngModel)]="viewAssnService.EditAssociationData['ASNofBlks']"
                        value="{{viewAssnService.EditAssociationData['ASNofBlks']}}" readonly>
                 
                </mat-form-field>
            </form>
            <form [formGroup]="blockform" class="association-form3">
                <mat-form-field class="association-full-width">
                    <mat-label>Total No of Units</mat-label>
                    <input matInput placeholder="NO OF UNITS"
                    (keypress)="keyPress3($event)"  maxlength="4"
                    matTooltip="This number should be the total of all the flats which are sold, unsold and vacant"
                    formControlName="unitno" [(ngModel)]="viewAssnService.EditAssociationData['ASNofUnit']"
                    value="{{viewAssnService.EditAssociationData['ASNofUnit']}}" readonly>
                  
                </mat-form-field>
            </form>
          
              <div class="col-sm-12">
                <button id="UpdateAssnID" class="btn btn-primary-purple nextBtn pull-right" (click)="UpdateAssociation()" type="button">Update Association</button>
              
              </div>
            </div>
          </form>
          <form #stepThreeFrm="ngForm">
            <div class="panel panel-primary setup-content" id="step-3">
              <div class="panel-body">
                <app-new-amenity [newamenities]='newamenities' (addAmenities)='addAmenity($event)'
                  (deleteamenity)='deleteamenity($event)'></app-new-amenity>
              </div>
              <button id="UpdateAssnID" class="btn btn-primary-purple nextBtn pull-right" type="submit" (click)="UpdateAssociation()">Update Association</button>
              <button class="btn btn-primary-purple pull-right" type="reset">Reset</button>
            </div>
     
              <p class="title">Bank1</p>
              <div class="panel-body">
                  <div class="form-group" style="width:528px">
                      <label class="control-label">Bank Name</label>
                      <input maxlength="600" type="text" required="required" class="form-control"
                          placeholder="Bank Name"/>
                  </div>
                  <div class="form-group">
                      <label class="control-label">IFSC</label>
                      <input maxlength="200" type="text" required="required" class="form-control"
                          placeholder="IFSC"/>
                  </div>
              </div>
              <div class="panel-body">
                  <div class="form-group">
                      <label class="control-label">Account Number</label>
                      <input maxlength="200" type="text" required="required" class="form-control"
                          placeholder="Account Number"/>
                  </div>
                  <div class="form-group">
                      <label class="control-label">Account Type</label>
                      <input maxlength="200" type="text" required="required" class="form-control"
                          placeholder="Account Type" />
                  </div>
                  <div class="form-group">
                      <label class="control-label"></label>
                      <p><i class="fa fa-circle-thin" aria-hidden="true"></i> Default</p>
                  </div>
              </div>
              <div class="col-sm-12 purple pull-right" style="padding: 30px;">
                  <i class="fa fa-plus" aria-hidden="true"></i> Add Bank
              </div>
              <div class="col-sm-12" style="padding:0px 30px;">
                  <button class="btn btn-primary-purple nextBtn pull-right" (click)='createBlock()' type="submit">Add
                      Block</button>
              </div>
          </div> 
          </form>
        </div> -->
        <mat-tab-group class="mainpage" [(selectedIndex)]="demo1TabIndex">
          <div class="blockdetailsdata">
  
            <mat-tab #tab [disabled]='!tab.isActive' label="ASSOCIATION DETAILS">
              <div class="page1">
                  <form [formGroup]="form" class="association-form">
                      <mat-form-field class="association-full-width">
                          <mat-label>Association Name<span class="red">*</span></mat-label>
                          <input matInput placeholder="Association Name" 
                          pattern="[A-Za-z\s]+"
                          autocomplete="viewAssnService.EditAssociationData['ASAsnName']"
                          matTooltip="This name should match as given in the Association Pan Card" class = "text" 
                          formControlName="asnname" [(ngModel)]="viewAssnService.EditAssociationData['ASAsnName']"
                              value="{{viewAssnService.EditAssociationData['ASAsnName']}}">
                          <mat-error [displayError]="isFieldValid('asnname')">
                              {{ titleAlert }}
                          </mat-error>
                      </mat-form-field>
                  </form>
              
                  <form [formGroup]="form" class="association-formcountry">
                    <mat-form-field>
                      <mat-label>Country<span class="red">*</span></mat-label>
                        <mat-select (selectionChange)="selectedcountryedit($event)" formControlName="cntryname" placeholder="COUNTRY">
                            <mat-option *ngFor="let country of countrieslist" [value]="country">{{country['coName']}}
                            </mat-option>
                        </mat-select>
                        <mat-error [displayError]="isFieldValid('cntryname')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>

                      <!-- <mat-form-field>
                          <mat-label>COUNTRY<span class="red">*</span></mat-label>
                          <mat-select [(ngModel)]="countryname">
                              <mat-option *ngFor="let country of countrieslist" class = "text" [value]="country['coid']">{{country['coName']}}
                              </mat-option>
                          </mat-select>
                          <mat-error [displayError]="isFieldValid('cntryname')">
                              {{ titleAlert }}
                          </mat-error>
                      </mat-form-field> -->
                  </form>
                  
                  <form [formGroup]="form" class="association-form">
                      <mat-form-field>
                          <mat-label>State<span class="red">*</span></mat-label>
                          <mat-select formControlName="statename" (selectionChange)="selectedstateeditassn($event)">
                              <mat-option *ngFor="let state of stateslist" [value]="state">{{state.stName}}
                              </mat-option>
                          </mat-select>
                          <mat-error [displayError]="isFieldValid('statename')">
                              {{ titleAlert }}
                          </mat-error>
                      </mat-form-field>
                  </form>
                  
                  <form [formGroup]="form" class="association-form">
                      <mat-form-field>
                          <mat-label>City<span class="red">*</span></mat-label>
                          <mat-select formControlName="cityname" (selectionChange)="selectedcityeditassn($event)">
                              <mat-option *ngFor="let city of citylist" [value]="city">{{city.ctName}}
                              </mat-option>
                          </mat-select>
                          <mat-error [displayError]="isFieldValid('cityname')">
                              {{ titleAlert }}
                          </mat-error>
                      </mat-form-field>
                  </form>
                  <br>
                 
                  <form [formGroup]="form" class="association-form">
                      <mat-form-field class="association-full-width">
                          <mat-label>Pin/Zip/Postal Code<span class="red">*</span></mat-label>
                          <input matInput placeholder="Pin/Zip"pattern="[0-9]*" 
                           pattern="^\d{6,}$"
                           (keypress)=_keyPress($event)
                          minlength="5"
                          maxlength="6" 
                          formControlName="zipcode" [(ngModel)]="viewAssnService.EditAssociationData['ASPinCode']"
                              value="{{viewAssnService.EditAssociationData['ASPinCode']}}">
                          <mat-error [displayError]="isFieldValid('zipcode')">
                              {{ titleAlert }}
                          </mat-error>
                      </mat-form-field>
                  </form>
                  <form [formGroup]="form" class="association-form">
                    <mat-form-field class="association-full-width">
                        <mat-label>Locality<span class="red">*</span></mat-label>
                        <input matInput placeholder="Locality"class = "text" 
                        pattern="[A-Za-z\s]+"
                        maxlength="255"
                        (keypress)="_keyPress2($event)"
                        formControlName="locname" [(ngModel)]="viewAssnService.EditAssociationData['ASAddress']"
                            value="{{viewAssnService.EditAssociationData['ASAddress']}}">
                        <mat-error [displayError]="isFieldValid('locname')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                  <form [formGroup]="form" class="association-form">
                      <mat-form-field>
                        <mat-label>Property Type<span class="red">*</span></mat-label>
                          <mat-select [(value)]="viewAssnService.EditAssociationData['ASPrpType']" formControlName="prprtytype">
                              <mat-option *ngFor="let property of propertyType" [value]="property">{{property}}
                              </mat-option>
                          </mat-select>
                          <mat-error [displayError]="isFieldValid('prprtytype')">
                              {{ titleAlert }}
                          </mat-error>
                      </mat-form-field>
                  </form>
                  
                  <form [formGroup]="form" class="association-form">
                      <mat-form-field class="association-full-width">
                          <mat-label>Property Name<span class="red">*</span></mat-label>
                          <input matInput placeholder="Property Name"
                          pattern="[a-zA-Z\s]*"
                           class = "text"formControlName="prtyname"
                              [(ngModel)]="viewAssnService.EditAssociationData['ASPrpName']" value="{{viewAssnService.EditAssociationData['ASPrpName']}}">
                          <mat-error [displayError]="isFieldValid('prtyname')">
                              {{ titleAlert }}
                          </mat-error>
                      </mat-form-field>
                  </form>
                 
                
                  <br>
                  <form [formGroup]="form" class="association-form">
                      <mat-form-field class="association-full-width">
                          <mat-label>Association Email<span class="red">*</span></mat-label>
                          <input matInput placeholder="Association Email" 
                          pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
                          formControlName="assemail"
                              [(ngModel)]="viewAssnService.EditAssociationData['asAsnEmail']" value="{{viewAssnService.EditAssociationData['asAsnEmail']}}">
                          <mat-error [displayError]="isFieldValid('assemail')">
                              {{ titleAlert }}
                          </mat-error>
                      </mat-form-field>
                  </form>
                  <form [formGroup]="form" class="association-form">
                      <mat-form-field class="association-full-width">
                          <mat-label>Association Website Url</mat-label>
                          <input matInput placeholder="URL" 
                           pattern="^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$"
                          formControlName="urlset" [(ngModel)]="viewAssnService.EditAssociationData['asWebURL']" value="{{viewAssnService.EditAssociationData['asWebURL']}}">
                          <mat-error [displayError]="isFieldValid('urlset')">
                              {{ titleAlert }}
                          </mat-error>
                      </mat-form-field>
                  </form>
                  <!-- <form [formGroup]="uploadForm" class="association-form">
                          <label class="control-label" style="width: 100%;">Upload Association logo</label>
  
                         <div style="width: 130px;">
                              <input #fileInput2 type="file" id="assnfile" (change)="onFileSelect($event)" (click)="fileopen($event,fileInput2)">
                         </div> 
                          <div style="width: 130px;">
                              <i class="fa fa-cloud-upload fa-2x" matTooltip="Upload" id="assnuploadicon"aria-hidden="true" type="submit" (click)="processFile()"></i>
          
                         
                          <img [hidden]="thumbnailASAsnLogo==undefined" class="Upload1" (click)="showImgOnPopUp(UploadedImagetemplate,thumbnailASAsnLogo,'Association Image')" src="{{thumbnailASAsnLogo}}" width="50px" height="50px"/>
                          </div>
                          
                          
                      </form> -->
                      <form *ngIf="fileName!='No file chosen...'" [formGroup]="uploadForm" class="association-form">
                        <div class="file-upload">
                          <label class="control-label" style="width: 100%;text-align: center;">Upload Association logo</label>
                          <div class="file-select">
                            <div class="file-select-button" (click)="openFileinput()" id="fileName">Choose File
                            </div>
                            <div class="file-select-name" id="noFile"><a href="#"
                                (click)="showImgOnPopUp($event,UploadedImagetemplate,thumbnailASAsnLogo,'Association Image')">{{fileName}}</a>
                            </div>
                            <input type="file" [ngStyle]="{'display':hidechooseFile1 ? 'none' : 'block' }" (change)="onFileSelect($event)"
                              name="chooseFile1" id="chooseFile1">
                          </div>
                        </div>
                      </form>
                      
                      <form *ngIf="fileName=='No file chosen...'" [formGroup]="uploadForm" class="association-form">
                        <div class="file-upload">
                          <label class="control-label" style="width: 100%;text-align: center;">Upload Association logo</label>
                          <div class="file-select">
                            <div class="file-select-button" id="fileName">Choose File
                            </div>
                            <div class="file-select-name" id="noFile">{{fileName}}</div>
                            <input type="file" (change)="onFileSelect($event)" name="chooseFile" id="chooseFile">
                          </div>
                        </div>
                      </form>
                  <br>
                  <div class="save">
                      <a class="continue" (click)="resetStep1($event)"mat-raised-button color="primary">RESET</a>
                      <a id="assdetailssave"mat-raised-button color="primary" [disabled]="!form.valid"(click)="submitassociationdetails($event)">SAVE & CONTINUE</a>
                  </div>
  
              </div>
          </mat-tab>
          <mat-tab #tab [disabled]='!tab.isActive' label="GST & PAN DETAILS">
            <form [formGroup]="gstpanform" class="association-form3" style="padding-left: 125px;">
                <mat-form-field class="association-full-width">
                    <mat-label>GST NUMBER</mat-label>
                     <input matInput placeholder="Gst Number"
                     matTooltip="Please enter registered GST number of the association"
                    formControlName="gst"
                    (blur)="fillPANValue()"
                    [(ngModel)]="gstnumber" 
                    autocomplete='gstnumber'
                    pattern="^([0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9a-zA-Z]{1}[zZ]{1}[0-9a-zA-Z]{1})+$" minlegth=15 maxlength=15 
                    value="">
                    <mat-error [displayError]="isFieldValidPanDetails('gst')">
                        {{ titleAlert }}
                    </mat-error>
                </mat-form-field>
                <p class="panextext">Ex: 22AAAAA0000A1Z5</p> 
            </form>
            <form [formGroup]="gstpanform" class="association-form3" style="padding-left:239px">
                <mat-form-field class="association-full-width">
                    <mat-label>PAN NUMBER<span class="red">*</span></mat-label>
                    <input matInput placeholder="Pan Number"
                        matTooltip="Please enter registered pan number of the association" class="pantext1"
                        [(ngModel)]="viewAssnService.EditAssociationData['ASPANNum']" value="{{viewAssnService.EditAssociationData['ASPANNum']}}"
                        formControlName="originalpan"
                        autocomplete='pannumber' 
                        (keyup)="pan_validate($event)"
                        pattern="[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}"
                        minlength=10 maxlength=10>
                    <mat-error [displayError]="isFieldValidPanDetails('originalpan')">
                        Please Enter Valid Pan Number
                    </mat-error>
                </mat-form-field>
                <p class="panextext">Ex: PAAAA1234A</p> 

            </form>
            <div id="pancardupload">
            
                <!-- <label class="control-label">Upload Scanned Pan Card</label>
                          <div>
                            <form [formGroup]="uploadPanForm">
                <input #fileInput3 type="file" id="uploadCaptureInputFile" name="panProfile" (change)="onPanFileSelect($event)" (click)="fileopen1($event,fileInput3)">
                            <i class="fa fa-cloud-upload fa-2x" matTooltip="Upload" id="panuploadicon" aria-hidden="true" type="submit" (click)="processPanFile()"></i>
                            <img [hidden]="uploadPANCardThumbnail == undefined" id="pancardimg" (click)="showImgOnPopUp(UploadedImagetemplate,uploadPANCardThumbnail,'PAN Card Scanned Copy')"
                                src="{{uploadPANCardThumbnail}}" width="50px" height="50px" />
                            </form>
                          </div>
                
                <span class="note">Upload Logo of Max 2MB and formats allowed are: PNG,JPG and
                    Resolution of 128*128</span> -->
                    <form *ngIf="PANfileName!='No file chosen...'" [formGroup]="uploadPanForm" class="association-form">
                      <div class="file-upload">
                          <label class="control-label" style="width: 100%;text-align: center;">Upload Scanned Pan Card</label>
                          <div class="file-select">
                              <div class="file-select-button" (click)="openPANFileinput()" id="PANfileName">Choose File
                              </div>
                              <div class="file-select-name" id="noFile"><a href="#"
                                      (click)="showImgOnPopUp($event,UploadedImagetemplate,uploadPANCardThumbnail,'PAN Card Scanned Copy')">{{PANfileName}}</a>
                              </div>
                              <input type="file" [ngStyle]="{'display':hidePANchooseFile1 ? 'none' : 'block' }"
                                  (change)="onPanFileSelect($event)" name="panProfile1" id="panProfile1">
                          </div>
                      </div>
                  </form>
                  <form *ngIf="PANfileName=='No file chosen...'" [formGroup]="uploadPanForm" class="association-form">
                      <div class="file-upload">
                          <label class="control-label" style="width: 100%;text-align: center;">Upload Scanned Pan Card</label>
                          <div class="file-select">
                              <div class="file-select-button" id="fileName">Choose File
                              </div>
                              <div class="file-select-name" id="noFile">{{PANfileName}}</div>
                              <input type="file" (change)="onPanFileSelect($event)" name="panProfile" id="panProfile">
                          </div>
                      </div>
                  </form>
            </div>

            <div class="save">
                <a class="previous" (click)="previouspage($event)"mat-raised-button color="primary">PREVIOUS</a>
                <a class="continueforresetpan" (click)="resetStep2($event)"mat-raised-button color="primary">RESET</a>
                <a id="pansubmit"mat-raised-button color="primary" [disabled]="!gstpanform.valid"(click)="submitpandetails($event)">SAVE & CONTINUE</a>
            </div>
        </mat-tab>
          <mat-tab #tab [disabled]='!tab.isActive' label="BLOCK & UNIT DETAILS">
            <form [formGroup]="blockform" class="association-form3">
                <mat-form-field class="association-full-width">
                    <mat-label>Total No Of Blocks<span class="red">*</span></mat-label>
                    <input matInput placeholder="No Of Blocks" 
                    pattern="[1-9]{1}[0-9]*" 
                    formControlName="blockno" [(ngModel)]="viewAssnService.EditAssociationData['ASNofBlks']"
                        value="{{viewAssnService.EditAssociationData['ASNofBlks']}}">
                    <mat-error [displayError]="isFieldValidblockandunitdetails('blockno')">
                        {{ titleAlert }}
                    </mat-error>
                </mat-form-field>
            </form>
            <form [formGroup]="blockform" class="association-form3">
                <mat-form-field class="association-full-width">
                    <mat-label>Total No Of Units<span class="red">*</span></mat-label>
                    <input matInput placeholder="No Of Units"
                    pattern="[1-9]{1}[0-9]*" 
                    matTooltip="This number should be the total of all the flats which are sold, unsold and vacant"formControlName="unitno" [(ngModel)]="viewAssnService.EditAssociationData['ASNofUnit']" value="{{viewAssnService.EditAssociationData['ASNofUnit']}}">
                    <mat-error [displayError]="isFieldValidblockandunitdetails('unitno')">
                        {{ titleAlert }}
                    </mat-error>
                </mat-form-field>
            </form>
            <div class="save">
                <a class="continue" (click)="previouspage($event)"mat-raised-button color="primary">PREVIOUS</a>
                <a class="continue" (click)="resetStep3($event)"mat-raised-button color="primary">RESET</a>
                <a id="assdetailssave"mat-raised-button color="primary" [disabled]="!blockform.valid"(click)="UpdateAssociation($event)">UPDATE</a>
            </div>
        </mat-tab>
          </div>
  
        </mat-tab-group>
     
      </div>
   
      <!--Enroll Association form Starts-->
    </div>

  </div>
  <!--rightBar start-->
  <!-- <app-right-bar></app-right-bar> -->
  <!--rightBar end-->
</div>


<ng-template #viewreceiptmodal>
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">View association</h5>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body" style="padding-top: 0px;">
      <div class="row">
        <div class="col-sm-12 np">
          <h5 class="text-center view-ass">Association Name : <strong>{{associationname}}</strong></h5>
        </div>
        <div class="col-sm-12" style="margin-top: 20px;">
          <h5 style="color:#5a51aa">Enroll Information</h5>
          <div class="col-sm-4">
            <p><b>Association name : </b>{{associationname}}</p>
          </div>
          <div class="col-sm-4">
            <p><b>Uploaded File : </b> <span>{{file}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>Country : </b> <span>{{country}}</span></p>
          </div>

          <div class="col-sm-4">
            <p><b>PinCode : </b> <span>{{pincode}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>State : </b> <span>{{State}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>City : </b> <span>{{city}}</span></p>
          </div>

          <div class="col-sm-4">
            <p><b>Property Type : </b> <span>{{propertyType}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>PropertyName : </b> <span>{{propertyName}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>Locality : </b> <span>{{locality}}</span></p>
          </div>
        </div>

        <div class="col-sm-12" style="margin-top: 20px;">

          <h5 style="color:#5a51aa">Blocks & Unit details</h5>

          <!-- <div class="col-sm-4">
                         <p>State : <span>{{State}}</span></p>
                     </div> -->

          <!-- <div class="col-sm-4">
                             <p>Property Type : <span>{{propertyType}}</span></p>
                         </div> -->
          <div class="col-sm-4">
            <p><b>No of Units :</b> <span>{{NoofUnits}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>TotalNoBlocks :</b> <span>{{blocks}}</span></p>
          </div>
        </div>
        <div class="col-sm-12" style="margin-top: 20px;">
        
            <h5 style="color:#5a51aa">Pan and Registration details</h5>

            <div class="col-sm-4">
                <p><b>Pan or reg Number :</b> <span>{{panno}}</span></p>
              </div>
              <div class="col-sm-4">
                <p><b>GSTNumber :</b> <span>{{gstno}}</span></p>
              </div>
              <div class="col-sm-4">
                <p><b>Uploaded Pan :</b> <span>{{pandoc}}</span></p>
              </div>
        
        </div>

        <div class="col-sm-12" style="margin-top: 20px;">
            <h5 style="color:#5a51aa">Bank Information</h5>
            <div class="col-sm-4">
                <p><b>Bank Name:</b> <span>{{BankName}}</span></p>
              </div>
      
              <div class="col-sm-4">
                <p><b>IFSC :</b> <span>{{IFSC}}</span></p>
              </div>
              <div class="col-sm-4">
                <p><b>Account Number :</b> <span>{{AccountNumber}}</span></p>
              </div>
              <div class="col-sm-4">
                <p><b>Account Type:</b> <span>{{accountType}}</span></p>
              </div>    
        </div>
        
  
        <div class="col-sm-12" style="margin-top: 20px;">
            <h5 style="color:#5a51aa">Amenities</h5>
            <div class="col-sm-4">
                <p><b>Amenity Type: </b><span>{{amenityType}}</span></p>
              </div>
              
              <div class="col-sm-4">
                <p><b>Amenity Number :</b> <span>{{amenityNo}}</span></p>
              </div>
        </div>     
      </div>
    </div>

  </div>
</ng-template>

<ng-template #template>
  <div class="modal-content">

    <div class="modal-header">
      
      <h4 class="modal-title">Edit Association</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col-xs-12" style="width: 90%; margin-left: 3%;">
          <form #editAssnFrm='ngForm' name="editAssociation" autocomplete="off">
            <div class="row">
              <div class="col-sm-4 col-xs-12">
                <div class="from-group">
                  <p>Association Name: <strong>{{ASAsnName}}</strong></p>
                </div>
              </div>
              <div class="col-sm-4 col-xs-12"></div>
              <div class="col-sm-4 col-xs-12" style="text-align:pull-right">
                <p>Date: <strong>{{newdate | date: "d/M/y"}}</strong></p>
              </div>
            </div>

            <div>
              <!-- <div class="row">
                <br>
                <div class="col-sm-1 col-xs-12"></div>
                <div class="col-sm-11  col-xs-12">
                  <h4 class="headingOrange">Edit Association</h4>

                </div>
              </div> -->

              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : associationnameControl.invalid && associationnameControl.touched}">
                    <label>Association Name<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASAsnName" [(ngModel)]="ASAsnName"
                      #associationnameControl='ngModel' required />
                    <p class="alerts" *ngIf="associationnameControl.invalid && associationnameControl.touched">
                      Association Name is required</p>
                  </div>
                </div>

                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw">
                    <label>Country</label>
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                        data-toggle="dropdown">{{ASCountry}}
                        <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                      <ul class="dropdown-menu fullw" style="font-family: Quicksand;height: 200px;">
                        <li *ngFor="let countryname of countries" (click)="countryName(countryname.name)">
                          <a>{{countryname.name}}</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : addressControl.invalid && addressControl.touched}">
                    <label>Address<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASAddress" [(ngModel)]="ASAddress"
                      #addressControl='ngModel' placeholder="Address" pattern="[a-zA-Z0-9- _]*" required />
                    <p class="alerts" *ngIf="addressControl.invalid && addressControl.touched">Address is required</p>
                  </div>
                </div>

                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw" [ngClass]="{'has-error' : cityControl.invalid && cityControl.touched}">
                    <label>City<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASCity" [(ngModel)]="ASCity" #cityControl='ngModel'
                      placeholder="City" pattern="[a-zA-Z0-9-]*" required />
                    <p class="alerts" *ngIf="cityControl.invalid && cityControl.touched">City is required</p>
                  </div>
                </div>

                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw" [ngClass]="{'has-error' : stateControl.invalid && stateControl.touched}">
                    <label>State<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASState" [(ngModel)]="ASState" #stateControl='ngModel'
                      placeholder="State" pattern="[a-zA-Z0-9-]*" required />
                    <p class="alerts" *ngIf="stateControl.invalid && stateControl.touched">State is required</p>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : pincodeControl.invalid && pincodeControl.touched}">
                    <label>PinCode<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASPinCode" [(ngModel)]="ASPinCode"
                      #pincodeControl='ngModel' placeholder="PinCode" pattern="[a-zA-Z0-9-]*" required />
                    <p class="alerts" *ngIf="stateControl.invalid && stateControl.touched">State is required</p>
                  </div>
                </div>

                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw">
                    <label>Property Type</label>
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                        data-toggle="dropdown">{{ASPrpType}}
                        <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                      <ul class="dropdown-menu fullw" style="font-family: Quicksand;height: 200px;">
                        <li *ngFor="let propertyType of propertyTypes" (click)="getpropertyType(propertyType.name)">
                          <a>{{propertyType.displayName}}</a></li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : propNameControl.invalid && propNameControl.touched}">
                    <label>Property Name<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASPrpName" [(ngModel)]="ASPrpName"
                      #propNameControl='ngModel' placeholder="Property Name" pattern="[a-zA-Z0-9- _]*" required />
                    <p class="alerts" *ngIf="propNameControl.invalid && propNameControl.touched">Property Name is
                      required</p>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : noblockControl.invalid && noblockControl.touched}">
                    <label>No Of Blocks<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASNofBlks" [(ngModel)]="ASNofBlks"
                      #noblockControl='ngModel' pattern="[0-9]*" placeholder="No Of Blocks" required />
                    <p class="alerts" *ngIf="noblockControl.invalid && noblockControl.touched">Number Of Blocks is
                      required</p>
                  </div>
                </div>

                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : nounitControl.invalid && nounitControl.touched}">
                    <label>No Of Units<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASNofUnit" [(ngModel)]="ASNofUnit"
                      #nounitControl='ngModel' pattern="[0-9]*" placeholder="No Of Units" required />
                    <p class="alerts" *ngIf="nounitControl.invalid && nounitControl.touched">Number Of Units is required
                    </p>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : amenitytypeControl.invalid && amenitytypeControl.touched}">
                    <label>Amenity Type<span class="red">*</span></label>
                    <input type="text" class="form-control" name="AMType" [(ngModel)]="AMType"
                      #amenitytypeControl='ngModel' placeholder="Amenity Type" pattern="[a-zA-Z0-9- _]*" required />
                    <p class="alerts" *ngIf="amenitytypeControl.invalid && amenitytypeControl.touched">Amenity Name is
                      required</p>
                  </div>
                </div>

                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : noofamenityControl.invalid && noofamenityControl.touched}">
                    <label>No Of Amenities<span class="red">*</span></label>
                    <input type="text" class="form-control" name="NoofAmenities" [(ngModel)]="NoofAmenities"
                      #noofamenityControl='ngModel' pattern="[0-9]*" placeholder="No Of Amenities" required />
                    <p class="alerts" *ngIf="noofamenityControl.invalid && noofamenityControl.touched">No Of Amenities
                      are required</p>
                  </div>
                </div>
              </div>


              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : banknameControl.invalid && banknameControl.touched}">
                    <label>Bank Name<span class="red">*</span></label>
                    <input type="text" class="form-control" name="BABName" [(ngModel)]="BABName"
                      #banknameControl='ngModel' placeholder="Bank Name" pattern="[A-Za-z\s]+" required />
                    <p class="alerts" *ngIf="banknameControl.invalid && banknameControl.touched">Bank Name is required
                    </p>
                  </div>
                </div>

                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : bankifscControl.invalid && bankifscControl.touched}">
                    <label>IFSC<span class="red">*</span></label>
                    <input type="text" class="form-control" name="BAIFSC" [(ngModel)]="BAIFSC"
                      #bankifscControl='ngModel' placeholder="Bank IFSC" pattern="^[A-Za-z]{4}[a-zA-Z0-9]{7}$"
                      required />
                    <small>Ex: PAAA1111111</small>
                    <p class="alerts" *ngIf="bankifscControl.invalid && bankifscControl.touched">IFSC is required</p>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : accountnumberControl.invalid && accountnumberControl.touched}">
                    <label>Account Number<span class="red">*</span></label>
                    <input type="text" class="form-control" name="BAActNo" [(ngModel)]="BAActNo"
                      #accountnumberControl='ngModel' placeholder="Account Number" pattern="[a-zA-Z0-9-]*" required />
                    <p class="alerts" *ngIf="accountnumberControl.invalid && accountnumberControl.touched">Account
                      Number is required</p>
                  </div>
                </div>

                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw">
                    <label>Account Type<span class="red">*</span></label>
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle sdm br form-control"
                          type="button" data-toggle="dropdown">{{BAActType}}
                          <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                      <ul class="dropdown-menu fullw">
                      <li *ngFor="let accounttype of accountTypes" (click)="getAccountType(accounttype.name)"><a>{{accounttype.name}}</a></li>
                      </ul>
                  </div>
                  </div>
                </div>
              </div>

              <div class="from-group">
                <div class="form-group pull-right">
                  <br>
                  <button [disabled]='editAssnFrm.invalid' type="submit" class="btn btn-primary-purple nextBtn"
                    (click)="UpdateAssociation()">Update</button>
                </div>
              </div>


            </div>

          </form>
        </div>+

      </div>
    </div>
  </div>
</ng-template>
<ng-template #UploadedImagetemplate>
  <div class="modal-content">

    <div class="modal-header">
      
      <h4 class="modal-title">{{UploadedImage}}</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <img src="{{ImgForPopUp}}"/>
    </div>
  </div>
</ng-template>
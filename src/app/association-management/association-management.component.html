<div class="container-fluid np">
  <div class="col-sm-12 mt-80">
    <!--Profile section-->
    <app-left-bar></app-left-bar>
    <!--Profile section-->
    <div class="col-xs-12 col-sm-12 col-md-11 b-l">
      <!--Dashboard icons start-->
      <div class="col-md-12 m-t-30 dash">

        <!-- Title and enroll button part -->
         <div class="enr-bt">
            <h3 class="purple">Association Management</h3>
            <div class="enroll">
                <div>
                  <button class="btn-primary-purple" (click)="enblEnrlAsnVew()" style="margin-right: 16px;"><i class="fa fa-plus" aria-hidden="true"></i>
                    Enroll Association</button>
                  <button class="btn-primary-purple" (click)="enblJoinAsnVew()">
                    <i class="fa fa-handshake-o" aria-hidden="true"></i> Join Association</button>
                </div>
              </div>
         </div>
        <!-- Title and enroll button part -->

        <div *ngIf='viewAssnService.vewAsnEnbled'>
          <input type="text" [(ngModel)]="searchTxt" class="form-control" name="searchTxt" placeholder="Search by Association Name, Property Name, Locality">
        </div>
        <div *ngIf='viewAssnService.vewAsnEnbled' class="dropdown" style="width: 200px;">
          <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
              data-toggle="dropdown">{{(ShowRecords=='Show Records'?ShowRecords:setnoofrows)}}
              <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
          <ul class="dropdown-menu fullw">
              <li *ngFor='let rows of rowsToDisplay' (click)="setRows(rows['Row'])">
                  <a>{{rows['Display']}}</a></li>
          </ul>
      </div>
        <div *ngIf='viewAssnService.vewAsnEnbled' class="dash-row table-responsive">
          <table class="table table-bordered table-fixed"
            [mfData]="associations | search:['asAsnName', 'asPrpName', 'asAddress','asNofBlks','asNofUnit']:searchTxt"
            #mf="mfDataTable" (click)="onPageChange($event)" [mfRowsOnPage]="setnoofrows">
            <thead>
              <tr>
                <th>S.No.</th>
                <th>
                  <mfDefaultSorter (click)="removeColumnSort('AssociationName')" by="asAsnName">Association Name&nbsp;<i [hidden]="columnName=='AssociationName'" class="fa fa-sort"></i></mfDefaultSorter>
                </th>
                <th>
                  <mfDefaultSorter (click)="removeColumnSort('PropertyName')" by="asPrpName">Property Name&nbsp;<i [hidden]="columnName=='PropertyName'" class="fa fa-sort"></i></mfDefaultSorter>
                </th>
                <th>
                  <mfDefaultSorter (click)="removeColumnSort('Locality')" by="asAddress">Locality&nbsp;<i [hidden]="columnName=='Locality'" class="fa fa-sort"></i></mfDefaultSorter>
                </th>
                <th>
                  <mfDefaultSorter (click)="removeColumnSort('NoofBlocks')" by="asNofBlks">No of Blocks&nbsp;<i [hidden]="columnName=='NoofBlocks'" class="fa fa-sort"></i></mfDefaultSorter>
                </th>
                <th>
                  <mfDefaultSorter (click)="removeColumnSort('NoofUnits')" by="asNofUnit">No of Units&nbsp;<i [hidden]="columnName=='NoofUnits'" class="fa fa-sort"></i></mfDefaultSorter>
                </th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of mf.data;let i=index">
                <ng-container *ngIf="item == -1">
                  <td colspan="7" align="center">No Data Found</td>
                </ng-container>
                <ng-container *ngIf="item!=-1">
                  <td class="txt-middle">{{ (10 * (p - 1) + i)+1 }}</td>
                  <td>{{item['asAsnName']}}</td>
                  <td>{{item['asPrpName']}}</td>
                  <td>{{item['asAddress']}}</td>
                  <td class="txt-middle">{{item['asNofBlks']}}</td>
                  <td class="txt-middle">{{item['asNofUnit']}}</td>
                  <td class="txt-middle">
                    <i class="fa fa-eye" style="cursor: pointer;" tooltip="ViewAssociation"
                      (click)="openViewAssociation(viewreceiptmodal,item.asAsnName,item.asPrpName,item.asAddress,item.asNofUnit,item.asCountry,item.asPinCode,item.asState,item.asPrpType,item.asNofBlks,item.asRegrNum,item.asAsnLogo,item.asCity,item.aspanNum,item.aspanDoc,item.asAssnID,item.asgstNo)"></i>
                    |
                    <i (click)="OpenModal(template,item.asAsnName,item.asCountry,item.asAddress,item.asCity,item.asState,item.asPinCode,item.asPrpType,item.asPrpName,item.asNofBlks,item.asNofUnit,item.amType,item.noofAmenities,item.baBName,item.baIFSC,item.baActNo,item.baActType,item.asAssnID,'BAACID','AMID')"
                      class="fa fa-pencil" style="cursor: pointer;" tooltip="EditAssociation"></i>
                  </td>
                </ng-container>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="7">
                  <mfBootstrapPaginator></mfBootstrapPaginator>
                </td>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
      <!--Dashboard icons end-->
      <!--Enroll Association form Starts-->
      <div *ngIf='viewAssnService.enrlAsnEnbled' class="col-sm-12">
        <div style="overflow-x: scroll;">
            <div class="stepwizard" style="overflow-x: scroll;
            width: 2000px;">
              <div class="stepwizard-row setup-panel" style="display:flex">
                <div class="stepwizard-step col-lg-3 col-sm-6 col-xs-12">
                    <a href="#step-1" type="button" class="btn btn-success btn-default btn-circle-o"></a><span>Association
                      Details</span>
                </div>
                <div class="stepwizard-step col-lg-3 col-sm-6 col-xs-12">
                    <a href="#step-2" type="button" class="btn btn-circle-o"></a><span>Pan & Registration
                      Details</span>
                </div>
                <div class="stepwizard-step col-lg-3 col-sm-6 col-xs-12">
                    <a href="#step-3" type="button" class="btn btn-circle-o"></a><span>Block & Unit
                      Details</span>
                </div>
                <div class="stepwizard-step col-lg-3 col-sm-6 col-xs-12">
                    <a href="#step-4" type="button" class="btn btn-circle-o"></a><span>Other Amenities</span>
                </div>
                <div class="stepwizard-step col-lg-3 col-sm-6 col-xs-12 step-active">
                  <a href="#step-5" type="button" class="btn btn-circle-o"></a><span>Blocks
                      Details</span>
              </div>
              <div class="stepwizard-step col-lg-3 col-sm-6 col-xs-12">
                  <a href="#step-6" type="button" class="btn btn-circle-o"></a><span>Units
                      Details</span>
              </div>
              <!-- <div class="stepwizard-step col-lg-3 col-sm-6 col-xs-12">
                  <a class="disabled" href="#step-7" type="button" class="btn btn-circle-o"></a><span>Maitainance
                      Details</span>
              </div>
              <div class="stepwizard-step col-lg-3 col-sm-6 col-xs-12">
                  <a class="disabled" href="#step-8" type="button" class="btn btn-circle-o"></a><span>Bank
                      Details</span>
              </div> -->
              </div>
            </div>
        </div>
        <div class="row">
         
          <form id="EnrollAssnID" role="form">
            <div class="panel panel-primary setup-content" id="step-1">
              <!-- <div class="panel-heading">
                               <h3 class="panel-title">Association Details</h3>
                          </div> -->
              <div class="panel-body">
                <div class="form-group">
                  <label id=label1>Association Name <span class="red">*</span></label>
                  <input type="text" required name="ASAsnName" id="input15" autocomplete="off"
                    [(ngModel)]="crtAssn.name" #nameControl="ngModel" class="form-control" pattern="[A-Za-z\s]+"
                    style="text-transform: uppercase; font-family: Quicksand; font-size: 13px;"
                   (blur)="getAssonName()" placeholder="Association Name" />
                  <p class="alerts" *ngIf="nameControl.invalid && nameControl.touched"> Valid Association name is
                    required</p>
                </div>
                <div class="form-group">
                  <label class="control-label">Upload logo</label>
                  <!-- <input type="file" name="ASAsnLogo" [(ngModel)]="crtAssn.logo" #logoControl="ngModel"
                    class="form-control" style="font-family: Quicksand" (change)='onFileChanged($event)'
                    pattern="(.*?)\.(png|jpeg|jpg)$" id="viewassosnuploadFileinput"> -->
                    <!-- <input #imageInput type="file" accept="image/*" (change)="processFile(imageInput)"> -->
                    <form [formGroup]="uploadForm" (ngSubmit)="processFile()">
                        <input type="file" name="profile" (change)="onFileSelect($event)" />
                        <button class="btn btn-primary-purple" style="margin: 5px 0px;" type="submit">Upload</button>
                    </form>
                </div>
                <div class="form-group">
                  <span class="note">Upload Logo of Max 2MB and formats allowed are: PNG,JPG and
                    Resolution of 128*128</span>
                </div>
              </div>
              <div class="panel-body">
                <div class="form-group">
                  <!-- <label class="control-label">Country</label> -->
                  <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                      data-toggle="dropdown">{{crtAssn.country}}
                      <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                    <ul class="dropdown-menu fullw fdrop">
                      <li *ngFor='let country of countries' (click)="openPANfield(country['name'])">
                        <a>{{country['name']}}</a></li>
                    </ul>
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label">State <span class="red">*</span></label>
                  <input type="text" required name="ASState" autocomplete='crtAss.state' [(ngModel)]="crtAssn.state"
                    #stateControl="ngModel" class="form-control" placeholder="STATE" style="font-family: Quicksand"
                   (blur)="getState()" pattern="[a-zA-Z\s]*" />
                  <p class="alerts" *ngIf="stateControl.invalid && stateControl.touched"> Valid State is required</p>
                </div>
                <div class="form-group">
                  <label class="control-label">City <span class="red">*</span></label>
                  <input type="text" required name="ASCity" autocomplete='crtAss.city' [(ngModel)]="crtAssn.city"
                    #cityControl="ngModel" class="form-control" placeholder="CITY" style="font-family: Quicksand"
                   (blur)="getCity()" pattern="[a-zA-Z\s]*" />
                  <p class="alerts" *ngIf="cityControl.invalid && cityControl.touched"> Valid City is required</p>
                </div>
              </div>
              <div class="panel-body">
                <div class="form-group"
                  [ngClass]="{'was-validated' : postalcodeControl.invalid && postalcodeControl.touched}">
                  <label class="control-label">Pin/Zip/Postal Code <span class="red">*</span></label>
                  <input type="text" required name="ASPinCode" autocomplete='crtAss.postalCode'
                    [(ngModel)]="crtAssn.postalCode" #postalcodeControl="ngModel" class="form-control"
                    placeholder="PIN/ZIP" style="font-family: Quicksand" pattern="^\d{6,}$" minlength="5"
                   (blur)="getPinPostalCode()" pattern="[0-9]*" (keypress)=_keyPress($event) maxlength="6" />
                  <p class="alerts" *ngIf="postalcodeControl.invalid && postalcodeControl.touched"> Valid pincode is
                    required</p>
                </div>
                <div class="form-group">
                  <label class="control-label">Property Type</label>
                  <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                      data-toggle="dropdown">{{crtAssn.propertyType}}
                      <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                    <ul class="dropdown-menu fullw">
                      <li *ngFor='let propertyType of propertyTypes' (click)="setPropertyType(propertyType['name'])">
                        <a>{{propertyType['name']}}</a></li>
                    </ul>
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label">Property Name <span class="red">*</span></label>
                  <input type="text" required name="ASPrpName" autocomplete='crtAss.propertyName'
                    (blur)="getPropertyName()" [(ngModel)]="crtAssn.propertyName" #propertynameControl="ngModel" class="form-control"
                    placeholder="PROPERTY NAME" style="font-family: Quicksand" pattern="[a-zA-Z\s]*"
                    style="text-transform: uppercase; font-family: Quicksand; font-size: 13px;" />
                  <p class="alerts" *ngIf="propertynameControl.invalid && propertynameControl.touched">Valid property
                    name is required</p>
                </div>
              </div>
              <div class="panel-body">
                <div class="form-group">
                  <label class="control-label">Locality <span class="red">*</span></label>
                  <input type="text" required name="ASAddress" autocomplete='crtAssn.locality'
                    (blur)="getLocality()" [(ngModel)]="crtAssn.locality" #localityControl="ngModel" class="form-control" maxlength="255"
                    placeholder="LOCALITY " style="font-family: Quicksand" pattern="[A-Za-z\s]+" />
                  <p class="alerts" *ngIf="localityControl.invalid && localityControl.touched"> Valid locality is
                    required</p>
                  <br>
                </div>
                <div class="form-group">
                  <label class="control-label">Association Email <span class="red">*</span></label>
                  <input type="text" name="ASAsnEmail" autocomplete='crtAssn.email' [(ngModel)]="crtAssn.email"
                    #emailControl="ngModel" class="form-control" maxlength="255" placeholder="EMAIL ID "
                   (blur)="getAssnEmail()" style="font-family: Quicksand" required pattern="[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" />
                  <p class="alerts" *ngIf="emailControl.invalid && emailControl.touched"> Valid EmailID is Required
                  </p>
                  <br>
                </div>
                <div class="form-group">
                  <label class="control-label">Website Url</label>
                  <input type="text" name="ASWebURL" autocomplete='crtAssn.url' [(ngModel)]="crtAssn.url"
                    #urlControl="ngModel" class="form-control" maxlength="255" placeholder="URL "
                    style="font-family: Quicksand"
                    pattern="^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$" />
                  <p class="alerts" *ngIf="urlControl.invalid && urlControl.touched"> Valid URL is
                  </p>
                  <br>
                </div>
              </div>
              <div class="col-sm-12">
                <button class="btn btn-primary-purple nextBtn pull-right" type="button">Next</button>
                <button class="btn btn-primary-purple pull-right" type="reset"
                  (click)='resetStep1()' style="margin-right: 13px;">Reset</button>
              </div>
            </div>
            <div class="panel panel-primary setup-content" id="step-2">
              <!-- <div class="panel-heading">
                               <h3 class="panel-title">Pan & Registration Details</h3>
                          </div> -->
              <div class="panel-body">
                <div class="form-group">
                  <label class="control-label"><input tooltip="GST Available?" style="margin: 13px 24px 0px -41px;" type="checkbox" name="IsGSTAvailable" (change)='toggleIsGSTAvailable()'/>
                    GST Number</label>
                  <div style="display: flex;">
                    <input id="GSTNumberID" [disabled]="toggleGSTAvailableTxt" type="text" name="GSTNumber" autocomplete='crtAss.GSTNumber' [(ngModel)]="crtAssn.GSTNumber"
                      #GSTNumberControl="ngModel" class="form-control" (blur)="fillPANValue()" placeholder="GST NUMBER"
                      style="text-transform: uppercase; font-family: Quicksand; font-size: 13px;"
                      pattern="^([0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9a-zA-Z]{1}[zZ]{1}[0-9a-zA-Z]{1})+$" minlegth=15 maxlength=15 />
                  </div>
                  <small style="color:grey; font-size:12px;">Ex: 22AAAAA0000A1Z5</small>
                </div>
                <div class="form-group">
                  <label class="control-label">Pan Number <span class="red">*</span></label>
                  <input type="text" id="PANNumberID" name="PANNumber" required autocomplete='crtAssn.PANNumber'
                    [(ngModel)]="crtAssn.PANNumber" #PANNumberControl="ngModel" class="form-control"
                    placeholder="PAN NUMBER" style="text-transform: uppercase; font-family: Quicksand; font-size: 13px;"
                    (input)='pan()' (click)='fillPANValue()' minlength=10 maxlength=10 />
                  <small style="color:grey; font-size:12px;">Ex: PAAAA1234A</small>
                  <p class="alerts" *ngIf="matching"> Valid PAN number is required </p>
                </div>
                <div class="form-group">
                  <label class="control-label">Upload Scanned Pan Card</label>
                  <input type="file" name="uploadPANCard" autocomplete='crtAss.uploadPANCard'
                    [(ngModel)]="crtAssn.uploadPANCard" #uploadPANCardControl="ngModel" class="form-control"
                    (change)='onFilSelected($event)' id="uploadPaninput" style="font-family: Quicksand"
                    pattern="(.*?)\.(png|jpeg|jpg)$" />
                  <span class="note">Upload Logo of Max 2MB and formats allowed are: PNG,JPG and
                    Resolution of 128*128</span>
                </div>
              </div>
              <div class="col-sm-12">
                <button class="btn btn-primary-purple nextBtn pull-right" type="button">Next</button>
                <button class="btn btn-primary-purple pull-right" type="reset"
                  (click)='resetStep2()'>Reset</button>
              </div>
            </div>
            <div class="panel panel-primary setup-content" id="step-3">
              <!-- <div class="panel-heading">
                               <h3 class="panel-title">Block & Unit Details</h3>
                          </div> -->
              <div class="panel-body">
                <div class="form-group">
                  <label class="control-label">Total No of Blocks <span class="red">*</span></label>
                  <input type="text" name="ASNofBlks" autocomplete='crtAss.totalNoBlocks' (blur)='getNumberOfBlocks()'
                    [(ngModel)]="crtAssn.totalNoBlocks" #totalNoBlocksControl="ngModel" class="form-control"
                    placeholder="NO OF BLOCKS" style="font-family: Quicksand" required pattern="[0-9]*"
                    (keypress)=_keyPress($event) />
                  <p class="alerts" *ngIf="totalNoBlocksControl.invalid && totalNoBlocksControl.touched"> Valid blocks
                    no is required</p>
                </div>
                <div class="form-group">
                  <label class="control-label">Total No of Units</label>
                  <input type="text" name="ASNofUnit" autocomplete='crtAss.totalNoUnits'
                    [(ngModel)]="crtAssn.totalNoUnits" #totalNoUnitsControl="ngModel" class="form-control"
                    placeholder="NO OF UNITS" style="font-family: Quicksand" pattern="[0-9]*" (blur)='getNumberOfUnits()'
                    (keypress)=_keyPress($event) />
                  <p class="alerts" *ngIf="totalNoUnitsControl.invalid && totalNoUnitsControl.touched"> Valid no units
                    are required</p>
                </div>
              </div>
              <div class="col-sm-12">
                <button class="btn btn-primary-purple nextBtn pull-right" type="button">Next</button>
                <button class="btn btn-primary-purple pull-right" type="reset" (click)='resetStep3()'>Reset</button>
              </div>
            </div>
            <div class="panel panel-primary setup-content" id="step-4">
              <!-- <div class="panel-heading">
                               <h3 class="panel-title">Other Amenities</h3>
                          </div> -->
              <div class="panel-body">
                <app-new-amenity [newamenities]='newamenities' (addAmenities)='addAmenity($event)'
                  (deleteamenity)='deleteamenity($event)'></app-new-amenity>
              </div>
              <button id="AddExp" class="btn btn-primary-purple nextBtn pull-right" type="submit" (click)="onSubmit()">Next</button>
              <button class="btn btn-primary-purple pull-right" type="reset">Reset</button>
            </div>
            <div class="panel panel-primary setup-content" id="step-5" style="overflow-x: scroll;">
              <!-- <div class="panel-heading">
               <h3 class="panel-title">Association Details</h3>
          </div> -->
  
              <div class="panel-body" style="display: flex;flex-direction: column;">
                <div *ngFor='let item of blockArray'> 
                  <div class="col-sm-12" style="display: flex;padding: 10px 20px;margin-bottom: 20px;">
                  <div class="form-group mr">
                    <label id=label1>Block Name <span class="red">*</span></label>
                    <input type="text" name="blkNme" id="input1" autocomplete='blkNme' [(ngModel)]="item['blkNme']"
                     (blur)="getBlockName(item['Id'],item['blkNme'])" #blkNmeControl="ngModel" class="form-control" placeholder="Block Name" pattern="[a-zA-Z0-9 _]*" required />
                    <p class="alerts" *ngIf="blkNmeControl.invalid && blkNmeControl.touched">Valid name is required</p>
                  </div>
                  <div class="form-group mr">
                    <label>Block Type<span class="red">*</span></label>
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                        data-toggle="dropdown">{{(item['blocktype'] == ''?'Select Block':item['blocktype'])}}
                        <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                      <ul class="dropdown-menu fullw">
                        <li (click)="getBlockType('Residential',item['Id'])"><a>Residential</a></li>
                        <li (click)="getBlockType('Commercial',item['Id'])"><a>Commercial</a></li>
                        <li (click)="getBlockType('Residential and Commercial',item['Id'])"><a>Residential and Commercial</a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="form-group mr">
                    <label id=label3>No of Units <span class="red">*</span></label>
                    <input type="text" name="noofunits" id="input3" autocomplete='noofunits' [(ngModel)]="item['noofunits']"
                     (blur)="getNoOfUnits(item['Id'],item['noofunits'])" #noofunitsControl="ngModel" class="form-control" placeholder="No Of Units" pattern="[0-9]*" required />
                    <p class="alerts" *ngIf="noofunitsControl.invalid && noofunitsControl.touched">No of units are required</p>
                  </div>
                  <div class="form-group mr">
                    <label id=label4>Manager Name <span class="red">*</span></label>
                    <input type="text" name="mngName" id="input4" autocomplete='mngName' [(ngModel)]="item['mngName']"
                     (blur)="getManagerName(item['Id'],item['mngName'])" #managernameControl="ngModel" class="form-control" placeholder="Manager Name" pattern="[a-zA-Z]*" required />
                    <p class="alerts" *ngIf="managernameControl.invalid && managernameControl.touched">Manager name is required</p>
                  </div>
                  <div class="form-group mr">
                    <label id=label5>Manager Mobile Number <span class="red">*</span></label>
                    <input type="text" name="BlockManagermobile" id="input5" autocomplete='BlockManagermobile'
                      [(ngModel)]="item['BlockManagermobile']" #managernumberControl='ngModel' class="form-control"
                      placeholder="Manager Mobile Number" minlength="10" maxlength="10" pattern="[0-9]*" required
                      (blur)="checkMobileNumberValidity(item['Id'],item['BlockManagermobile'])" (keypress)="_keyPress($event,item['Id'])"/>
                    <p class="alerts" *ngIf="item['Id']==item['uniqueID'] && managernumberControl.invalid && managernumberControl.touched">
                      Manager mobile number is required
                    </p>
                  </div>
                  <div class="form-group mr">
                    <label id=label6>Manager Email Id <span class="red">*</span></label>
                    <input type="text" name="manageremail" id="input6" autocomplete='manageremail' [(ngModel)]="item['manageremail']"
                      #manageremailControl="ngModel" class="form-control" placeholder="Manager Email Id"
                      pattern="[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*"
                     (blur)="getManagerEmail(item['Id'],item['manageremail'])" required />
                    <p class="alerts" *ngIf="manageremailControl.invalid && manageremailControl.touched">Manager email-id is required
                    </p>
                  </div>
                  <div class="form-group mr">
                    <h5 style="margin-top: -27px;"><input type="checkbox" class="form-check-input" id="rate" name="rate" [(ngModel)]="item['rate']" #rateControl="ngModel"
                        (change)="checkRate(item['rate'],item['Id'])" value="flatRatevalue" (click)="checking(item['rate'])" required> Flat Rate Value</h5>
                    <div *ngIf="item['flatRate'] == 'flatRatevalue'">
                      <label>Flat Rate Value <span class="red">*</span></label>
                      <input class="form-control" type="text" name="flatRatevalue" [(ngModel)]="item['flatRatevalue']" placeholder="Value"
                        #flatRatevalueControl='ngModel' pattern="^[+-]?((\.\d+)|(\d+(\.\d+)?))$" required>
                      <p class="classred" *ngIf="flatRatevalueControl.invalid && flatRatevalueControl.touched">Invalid flat rate
                      </p>
                      <small>Amount to be charged</small>
                    </div>
                  </div>
                  
                  <div class="form-group mr">
                    <h5 style="margin-top: -27px;"><input type="checkbox" class="form-check-input" id="rate" name="rate" [(ngModel)]="item['rate1']" #rateControl="ngModel"
                        (change)="checkRate1(item['rate1'],item['Id'])" value="dimension" (click)="checking1(item['rate1'])" required> Dimension Based</h5>
                    <div *ngIf="item['dimension'] == 'dimension'">
                      <label>Maintenance Value<span class="red">*</span></label>
                      <input class="form-control" type="text" name="maintenanceValue" #maintenanceValueControl='ngModel'
                        [(ngModel)]="item['maintenanceValue']" placeholder="Maintenance Value " required pattern="^[0-9]+(\.[0-9]{1,2})?$">
                      <p class="classred" *ngIf="maintenanceValueControl.invalid && maintenanceValueControl.touched">Invalid Maintenance
                        Value
                      </p>
                      <small>Rate (SQFT / SQMTR) </small>
                    </div>
                  </div>
                  <div class="form-group mr">
                    <label>Unit of Measurement <span class="red">*</span></label>
                    <input class="form-control" type="text" disabled="true" required name="measurements" autocomplete="measurements"
                      [(ngModel)]="item['meter']" #measurementsControl='ngModel'>
                  </div>
                  <div class="form-group mr">
                    <label>Invoice Creation Frequency <span class="red">*</span></label>
                    <input class="form-control" list="frquency" name="frequency" [(ngModel)]="item['frequency']"
                     (change)="getInvoiceCreationFrequency(item['Id'],item['frequency'])" placeholder="Search or Select Frequency" #frequencyControl='ngModel' required multiple>
                    <datalist id="frquency">
                      <option value="">Select Frequency</option>
                      <option *ngFor="let frequency of frequencies" [value]="frequency['displayName']">
                        {{frequency['displayName']}}
                      </option>
                    </datalist>
                    <p class="alerts" *ngIf="frequencyControl.invalid && frequencyControl.touched">Invalid Invoice Frequency
                    </p>
                  </div>
                  <div class="form-group mr">
                    <label>Invoice Generation Date <span class="red">*</span></label>
                    <!-- <ejs-datepicker placeholder='Invoice Generation Date' [min]='todayDate' format='dd-MM-yyyy' ></ejs-datepicker> -->
                    <input type="text" class="form-control" name="billGenerationDate" #NextInvoiceGenDateControl='ngModel'
                      placeholder="Invoice Generation Date" [bsConfig]="bsConfig" [(ngModel)]="item['billGenerationDate']" bsDatepicker required
                      (bsValueChange)="onValueChange($event)" [minDate]="todayDate" placement="top" />
                  </div>
                  <div class="form-group mr">
                    <label>Due Date <span class="red">*</span></label>
                    <input type="text" class="form-control" [class.enableBorderColor]="enableduedatevalidation"
                      [class.classForInvalid]="enableduedatevalidation" name="dueDate" #DueDateControl='ngModel' placeholder="Due Date"
                      [bsConfig]="bsConfig" [(ngModel)]="item['dueDate']" bsDatepicker required [minDate]="minDate"
                      (bsValueChange)="onDueDateValueChange($event)" placement="top" />
                    <ng-container *ngIf='enableduedatevalidation'>
                      <p class="invalidFeedback">Due date should be greater than or equal to
                        invoice date
                      </p>
                    </ng-container>
                  </div>
                  <div class="form-group mr">
                    <label class="control-label">Late Payment Charge Type<span class="red">*</span></label>
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                        data-toggle="dropdown">{{(item['latePymtChargeType'] == ''?'SELECT CHARGE TYPE':item['latePymtChargeType'])}}
                        <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                      <ul class="dropdown-menu fullw">
                        <li *ngFor='let lpct of latePymtChrgTypes' (click)="getLatePymtChargeType(lpct['name'],item['Id'])"><a>{{lpct['name']}}</a>
                        </li>
                      </ul>
                    </div>
                  </div>
                  <div class="form-group mr">
                    <label>Late Payment Charge <span class="red">*</span></label>
                    <input class="form-control" type="text" #latePymtChargeControl='ngModel' name="latePymtCharge"
                      autocomplete="latePymtCharge" [(ngModel)]="item['latePymtCharge']" placeholder="Late Payment charge"
                      pattern="[0-9]+(\.[0-9][0-9]?)?" required>
                    <p class="alerts" *ngIf="latePymtChargeControl.invalid && latePymtChargeControl.touched">Invalid Late Payment Charge
                    </p>
                  </div>
                  <div class="form-group mr">
                    <label>Starts From<span class="red">*</span></label>
                    <input class="form-control" type="text" name="startsFrom" #StartsFromDateControl='ngModel'
                      [class.classForInvalid]="enablestartfromdatevalidation" placeholder="Starts From Date" [bsConfig]="bsConfig"
                      [(ngModel)]="item['startsFrom']" bsDatepicker required [minDate]='startsFromMaxDate'
                      (bsValueChange)="onStartsFromDateValueChange($event)" placement="bottom" />
                    <ng-container *ngIf='enablestartfromdatevalidation'>
                      <p class="invalidFeedback">Starts from date should be greater than or equal to due date</p>
                    </ng-container>
                  </div>
                </div>
                <!-- <app-block-array></app-block-array> -->
                </div>
                 
              </div>
              <div class="col-sm-12 pull-right">
                  <button class="btn btn-primary-purple pull-right" type="reset" (click)='resetStep5()'>Reset</button>
                  <button class="btn btn-primary-purple nextBtn pull-right" type="button" (click)='createBlock()'>Next</button>
              </div>
          </div>
  
          <div class="panel panel-primary setup-content" id="step-6"     style="overflow-x: scroll;">
            <div class="row" style="margin: 13px;">
              <div class="stepwizard">
                <div class="stepwizard-row-stepseven setup-panel-stepseven">
                  <div *ngFor='let item of BlockHrefDetail' style="cursor: pointer;" class="stepwizard-step col-lg-4 col-sm-6 col-xs-12 step-active">
                      <a [href]="item['step']" type="button" [ngClass]="{'btn-success':item['Id']==1}" class="btn btn-default btn-circle-o"></a><span>{{item['blk']}}</span>
                  </div>
              </div>
                  <!-- <div class="stepwizard-row setup-panel">
                      <div style="cursor: pointer;" class="stepwizard-step col-lg-4 col-sm-6 col-xs-12 step-active">
                          <a href="#step-7" type="button" class="btn btn-success btn-default btn-circle-o"></a><span>Unit
                              Information</span>
                      </div>
                      <div style="cursor: pointer;" class="stepwizard-step col-lg-4 col-sm-6 col-xs-12">
                          <a href="#step-8" type="button" class="btn btn-circle-o"></a><span>Unit
                              Owner/Tenent Information</span>
                      </div>
                      <div style="cursor: pointer;" class="stepwizard-step col-lg-4 col-sm-6 col-xs-12">
                          <a href="#step-9" type="button" class="btn btn-circle-o"></a><span>Unit
                              Vehicle
                              Information</span>
                      </div>
            
                  </div> -->
              </div>
              <form role="form" #createunitForm='ngForm'>
                  <div *ngFor='let item of BlockHrefDetail' style="overflow-x: scroll;padding: 43px;" class="panel panel-primary setup-content-seven" [id]="item['elementID']">            
                      <div class="panel-body" *ngFor="let itm of item['UnitArray']">
                          <div class="form-group mr">
                              <label class="control-label lab">Unit No/Flat No<span class="red">*</span></label>
                              <input maxlength="100" name="unitno" id="unitno" type="text" required [(ngModel)]="itm['_unitno']" #unitnoControl="ngModel" class="form-control" placeholder="Unit No/Flat No" required />
                              <p class="alerts" *ngIf="unitnoControl.invalid && unitnoControl.touched"> Valid unit no is required</p>
                          </div>
                          <div class="form-group mr">
                            <label class="control-label lab">Unit Type<span class="red">*</span></label>
                            <div class="dropdown">
                                <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                                    data-toggle="dropdown">{{(itm['_unitType']==''?'SelectUnitType':itm['_unitType'])}}
                                    <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                                <ul class="dropdown-menu fullw">
                                    <li *ngFor="let unitTp of unitTypes" (click)="getUnitType(unitTp['name'],itm['_id'])">
                                        <a>{{unitTp['name']}}</a></li>
                                </ul>
                            </div>
                        </div>
                          <div class="form-group mr">
                              <label class="control-label lab">Unit Dimension<span class="red">*</span></label>
                              <input maxlength="100" type="text" name="unitdimension" id="unitdimension"  #unitdimensionControl="ngModel" required [(ngModel)]="itm['_unitdimension']" class="form-control" placeholder="Unit Dimension" pattern="[0-9]*" required/>
                              <p class="alerts" *ngIf="unitdimensionControl.invalid && unitdimensionControl.touched"> Valid Unit dimension is required</p>
                            </div>
                            <div class="form-group mr">
                              <label class="control-label lab">Unit Rate<span class="red">*</span></label>
                              <input maxlength="100" name="unitrate" type="text" required [(ngModel)]="itm['_unitrate']" #unitrateControl="ngModel" class="form-control" placeholder="Unit Rate" />
                              <p class="alerts" *ngIf="unitrateControl.invalid && unitrateControl.touched"> Valid unit rate is required</p>
                          </div>
                          <div class="form-group mr">
                                  <label class="control-label lab">Calculation Type<span class="red">*</span></label>
                                  <div class="dropdown">
                                      <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                                          data-toggle="dropdown">{{(itm['_calculationtype']==''?'SelectCalculationType':itm['_calculationtype'])}}
                                          <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                                      <ul class="dropdown-menu fullw">
                                          <li *ngFor="let calculationType of calculationTypes" (click)="getCalculationTypes(calculationType['name'],itm['_id'])">
                                              <a>{{calculationType['displayName']}}</a></li>
                                      </ul>
                                  </div>
                              </div>
                          <div class="form-group mr">
                                  <label class="control-label lab">Occupancy & Ownership Status<span class="red">*</span></label>
                                  <div class="dropdown">
                                      <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                                          data-toggle="dropdown">{{(itm['_occupency']==''?'SelectOccupancy':itm['_occupency'])}}
                                          <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                                      <ul class="dropdown-menu fullw">
                                          <li *ngFor="let occupency of occupencys" (click)="tenantOwnerdiv(occupency['name'],itm['_id'])">
                                              <a>{{occupency['name']}}</a></li>
                                      </ul>
                                  </div>
                          </div>
                    <!-- OWNER INFORMATION -->
                    <div *ngIf="itm['_ownerDetails'] == true && itm['_uniqueId']==itm['_id']" style="display: flex">            
                          <div class="form-group mr">
                              <label class="control-label lab">Owner First Name<span class="red">*</span></label>
                              <input type="text" name="ownerFirtname" id="ownerFirtname" [(ngModel)]="itm['_ownerFirtname']"
                                #ownerFirtnameControl="ngModel" class="form-control" placeholder="Owner firstname"
                                pattern="[a-zA-Z _]*" required/>
                                <p class="alerts" *ngIf="ownerFirtnameControl.invalid && ownerFirtnameControl.touched"> Valid owner firstname is required</p>
                            </div>
                          <div class="form-group mr">
                              <label class="control-label lab">Owner Last Name<span class="red">*</span></label>
                              <input type="text" name="ownerLastname" id="ownerLastname" [(ngModel)]="itm['_ownerLastname']"
                                #ownerLastnameControl="ngModel" class="form-control" placeholder="Owner lastname"
                                pattern="[a-zA-Z _]*" required/>
                                <p class="alerts" *ngIf="ownerLastnameControl.invalid && ownerLastnameControl.touched"> Valid owner lastname is required</p>
                            </div>
                    
                          <div class="form-group mr">
                              <label class="control-label lab">Owner Mobile Number<span class="red">*</span></label>
                              <input type="text" name="ownerMobnumber" id="ownerMobnumber" [(ngModel)]="itm['_ownerMobnumber']"
                                #ownerMobnumberControl="ngModel" class="form-control" placeholder="Owner mobile number"
                                minlength=10 maxlength=10 pattern="[0-9]*" required (keypress)=_keyPress($event)/>
                                <p class="alerts" id="phonenum" type="tel" pattern="[0-9]+" *ngIf="ownerMobnumberControl.invalid && ownerMobnumberControl.touched"> Valid 10 digit mobile number is required</p>                  
                            </div>
                          <div class="form-group mr">
                              <label class="control-label lab">Owner Email Id<span class="red">*</span></label>
                              <input type="text" name="ownerEmail" id="ownerEmail" [(ngModel)]="itm['_ownerEmail']"
                                #ownerEmailControl="ngModel" class="form-control" placeholder="Owner email-id"
                                pattern="[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*" required/>
                                <p class="alerts" *ngIf="ownerEmailControl.invalid && ownerEmailControl.touched"> valid email-id is required</p>
                            </div>
                    </div>
                    <!-- TANENT INFORMATION -->
                    <div *ngIf="itm['_tenantDetails'] == true && itm['_uniqueId']==itm['_id']" style="display: flex">                          
                            <div class="form-group mr">
                                <label class="control-label lab">Tenant First Name<span class="red">*</span></label>
                                <input type="text" name="tenantFirtname" id="tenantFirtname" [(ngModel)]="itm['_tenantFirtname']"
                                  #tenantFirtnameControl="ngModel" class="form-control" placeholder="Tenant firstname"
                                  pattern="[a-zA-Z _]*" required/>
                                  <p class="alerts" *ngIf="tenantFirtnameControl.invalid && tenantFirtnameControl.touched"> Valid firstname is required</p>
                              </div>
                            
                            <div class="form-group mr">
                                <label class="control-label lab">Tenant Last Name<span class="red">*</span></label>
                                <input type="text" name="tenantLastname" id="tenantLastname" [(ngModel)]="itm['_tenantLastname']"
                                  #tenantLastnameControl="ngModel" class="form-control" placeholder="Tenant lastname"
                                  pattern="[a-zA-Z _]*" required/>
                                  <p class="alerts" *ngIf="tenantLastnameControl.invalid && tenantLastnameControl.touched"> Valid lastname is required</p>
                              </div>
               
                            <div class="form-group mr">
                                <label class="control-label lab">Tenant Mobile Number<span class="red">*</span></label>
                                <input type="text" name="tenantMobnumber" id="tenantMobnumber" [(ngModel)]="itm['_tenantMobnumber']"
                                  #tenantMobnumberControl="ngModel" class="form-control" placeholder="Tenant mobile number"
                                  minlength=10 maxlength=10 pattern="[0-9]*" required (keypress)=_keyPress($event)/>
                                  <p class="alerts" *ngIf="tenantMobnumberControl.invalid && tenantMobnumberControl.touched"> Valid mobile number is required</p>
                              </div>
                            <div class="form-group mr">
                                <label class="control-label lab">Tenant Email Id<span class="red">*</span></label>
                                <input type="text" name="tenantEmail" id="tenantEmail" [(ngModel)]="itm['_tenantEmail']"
                                  #tenantEmailControl="ngModel" class="form-control" placeholder="Tenant email-id"
                                  pattern="[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*" required/>
                                  <p class="alerts" *ngIf="tenantEmailControl.invalid && tenantEmailControl.touched"> Valid email-id is required</p>
                              </div>
                      </div>

                      </div>
                      <div class="col-sm-12 pull-right">
                        <button type="reset" class="btn btn-primary-purple pull-right">Reset</button>
                        <button id="CreateUnitId" class="btn btn-primary-purple nextBtn pull-right" type="button" [disabled]="createunitForm.invalid" (click)="createUnit()">Create</button>
                    </div> 
                  </div>           
              </form>
            </div>
          </div>
  
          <!-- <div class="panel panel-primary setup-content" id="step-7">
              <p class="title">Select Rate</p>
  
              <div class="panel-body"
                  style="background: #f8f6f6;margin: 17px 52px;padding:16px 0px !important;">
                  <div class="form-group">
                      <h5><input type="checkbox" class="form-check-input" id="rate" name="rate" [(ngModel)]="rate" #rateControl="ngModel" (change)="checkRate(rate)"
                          value="flatRatevalue" (click)="checking(rate)" required> Flat Rate Value</h5>
                          <div *ngIf="addRate == 'flatRatevalue'">
                              <label>Flat Rate Value <span class="red">*</span></label>
                              <input class="form-control" type="text" name="flatRatevalue" [(ngModel)]="flatRatevalue"
                                placeholder="Value" #flatRatevalueControl='ngModel' pattern="^[+-]?((\.\d+)|(\d+(\.\d+)?))$" required>
                                <p class="classred" *ngIf="flatRatevalueControl.invalid && flatRatevalueControl.touched">Invalid flat rate
                                </p>
                              <small>Amount to be charged</small>
                          </div>
                  </div>
  
                  <div class="form-group">
                      <h5><input type="checkbox" class="form-check-input" id="rate" name="rate" [(ngModel)]="rate1"  #rateControl="ngModel"
                          (change)="checkRate1(rate1)" value="dimension"  (click)="checking1(rate1)" required > Dimension Based</h5>
                      <div *ngIf="addRate1 == 'dimension'">
                          <label>Maintenance Value<span class="red">*</span></label>
                          <input class="form-control" type="text" name="maintenanceValue" #maintenanceValueControl='ngModel'
                              [(ngModel)]="maintenanceValue" placeholder="Maintenance Value " required pattern="^[0-9]+(\.[0-9]{1,2})?$">
                          <p class="classred" *ngIf="maintenanceValueControl.invalid && maintenanceValueControl.touched">Invalid Maintenance
                              Value
                          </p>
                          <small>Rate (SQFT / SQMTR) </small>
                      </div>
                  </div>
  
              </div>
              <div class="panel-body">
                  <div class="form-group">
                      <label>Unit of Measurement <span class="red">*</span></label>
                      <input class="form-control" type="text" disabled="true" required name="measurements" autocomplete="measurements"
                        [(ngModel)]="meter" #measurementsControl='ngModel' placeholder="Measurement Type" [value]="meter">
                    </div>
                  <div class="form-group">
                      <label>Invoice Creation Frequency <span class="red">*</span></label>
                      <input class="form-control" list="frquency" name="frequency" [(ngModel)]="frequency" placeholder="Search or Select Frequency" #frequencyControl='ngModel' required multiple>
                      <datalist id="frquency">
                        <option value="">Select Frequency</option>
                        <option *ngFor="let frequency of frequencies" [value]="frequency['displayName']">
                          {{frequency['displayName']}}
                        </option>
                      </datalist>
                      <p class="alerts" *ngIf="frequencyControl.invalid && frequencyControl.touched">Invalid Invoice Frequency
                        </p>
                    </div>
                  <div class="form-group">
                      <label>Invoice Generation Date <span class="red">*</span></label>
                      <input type="text" class="form-control" name="billGenerationDate" #NextInvoiceGenDateControl='ngModel'
                        placeholder="Invoice Generation Date" [bsConfig]="bsConfig" [(ngModel)]="billGenerationDate"
                        bsDatepicker required (bsValueChange)="onValueChange($event)" [minDate]="todayDate" placement="top"/>
                  </div>
              </div>
              <div class="panel-body">
                  <div class="form-group">
                      <label>Due Date <span class="red">*</span></label>
                      <input type="text" class="form-control" [class.enableBorderColor]="enableduedatevalidation" [class.classForInvalid]="enableduedatevalidation" name="dueDate" #DueDateControl='ngModel' placeholder="Due Date"
                        [bsConfig]="bsConfig" [(ngModel)]="dueDate" bsDatepicker required [minDate]="minDate"
                        (bsValueChange)="onDueDateValueChange($event)" placement="top"/>
                      <ng-container *ngIf='enableduedatevalidation'>
                        <p class="invalidFeedback">Due date should be greater than or equal to
                            invoice date
                        </p>
                      </ng-container>
                    </div>
                  <div class="form-group">
                      <label class="control-label">Late Payment Charge Type</label>
                      <div class="dropdown">
                          <button class="btn btn-primary dropdown-toggle sdm br form-control"
                              type="button" data-toggle="dropdown">{{latePymtChargeType}}
                              <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                          <ul class="dropdown-menu fullw">
                              <li *ngFor='let lpct of latePymtChrgTypes' (click)="getLatePymtChargeType(lpct['name'])"><a>{{lpct['name']}}</a></li>
                          </ul>
                      </div>
                  </div>
                  <div class="form-group">
                      <label>Late Payment Charge <span class="red">*</span></label>
                      <input class="form-control" type="text" #latePymtChargeControl='ngModel' name="latePymtCharge"
                          autocomplete="latePymtCharge" [(ngModel)]="latePymtCharge" placeholder="Late Payment charge"
                          pattern="[0-9]+(\.[0-9][0-9]?)?" required>
                      <p class="alerts" *ngIf="latePymtChargeControl.invalid && latePymtChargeControl.touched">Invalid Late Payment Charge
                      </p>
                  </div>
              </div>
              <div class="panel-body">
                  <div class="form-group">
                      <label>Starts From<span class="red">*</span></label>
                      <input class="form-control" type="text" name="startsFrom" #StartsFromDateControl='ngModel'
                      [class.classForInvalid]="enablestartfromdatevalidation" placeholder="Starts From Date" [bsConfig]="bsConfig" [(ngModel)]="startsFrom" bsDatepicker required
                        [minDate]='startsFromMaxDate' (bsValueChange)="onStartsFromDateValueChange($event)" placement="bottom"/>
                      <ng-container *ngIf='enablestartfromdatevalidation'>
                          <p class="invalidFeedback">Starts from date should be greater than or equal to due date</p>
                      </ng-container>
                    </div>
                  <div class="form-group">
  
                  </div>
                  <div class="form-group">
  
                  </div>
  
              </div>
              <div class="col-sm-12 pull-right">
                  <button class="btn btn-primary-purple nextBtn" type="reset" (click)='resetStep7()'>Reset</button>
                  <button class="btn btn-primary-purple nextBtn" type="button">Next</button>
              </div>
          </div> -->
  
          <!-- <div class="panel panel-primary setup-content" id="step-8">
              <p class="title">Bank1</p>
              <div class="panel-body">
                  <div class="form-group" style="width:528px">
                      <label class="control-label">Bank Name</label>
                      <input maxlength="600" type="text" required="required" class="form-control"
                          placeholder="Bank Name" />
                  </div>
                  <div class="form-group">
                      <label class="control-label">IFSC</label>
                      <input maxlength="200" type="text" required="required" class="form-control"
                          placeholder="IFSC" />
                  </div>
              </div>
              <div class="panel-body">
                  <div class="form-group">
                      <label class="control-label">Account Number</label>
                      <input maxlength="200" type="text" required="required" class="form-control"
                          placeholder="Account Number" />
                  </div>
                  <div class="form-group">
                      <label class="control-label">Account Type</label>
                      <input maxlength="200" type="text" required="required" class="form-control"
                          placeholder="Account Type" />
                  </div>
                  <div class="form-group">
                      <label class="control-label"></label>
                      <p><i class="fa fa-circle-thin" aria-hidden="true"></i> Default</p>
                  </div>
              </div>
              <div class="col-sm-12 purple pull-right" style="padding: 30px;">
                  <i class="fa fa-plus" aria-hidden="true"></i> Add Bank
              </div>
              <div class="col-sm-12" style="padding:0px 30px;">
                  <button class="btn btn-primary-purple nextBtn pull-right" (click)='createBlock()' type="submit">Add
                      Block</button>
              </div>
          </div> -->
          </form>
        </div>
      </div>
      <!--Enroll Association form Starts-->

      <!--Join Association form Starts-->
      <div class="col-sm-12 panel" style="padding: 40px;" *ngIf="viewAssnService.joinAsnEbld">
        <div class="col-sm-3 np">
          <p class="join_ass_opt c-active"><i class="fa fa-check-circle-o" aria-hidden="true"></i>
            Association</p>
          <p class="join_ass_opt c-active"><i class="fa" [ngClass]="{'fa-check-circle-o' : toggleFaCircleO,'fa-circle-o' : !toggleFaCircleO}" aria-hidden="true"></i>
            Blocks</p>
          <p class="join_ass_opt c-active"> <i class="fa" [ngClass]="{'fa-check-circle-o' : toggleFaCircle1,'fa-circle-o' : !toggleFaCircle1}" aria-hidden="true"></i>
            Units</p>
        </div>
        <div class="col-sm-9 b-left">
          <!--row1-->
          <div class="content">
            <label>Select Association</label>
            <div class="dropdown" style="margin: 0px 0px;">
              <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                data-toggle="dropdown">{{assnName}}
                <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
              <ul class="dropdown-menu fullw fdrop">
                <li *ngFor="let association of _associations"
                  (click)="loadAssociation(association['asAssnID'],association['asAsnName'])">
                  <a>{{association['asAsnName']}}</a></li>
              </ul>
            </div>
          </div>
          <!--row1-->
          <!--row2-->
          <div class="content">
            <label>Select Blocks</label>
            <div class="dropdown" style="margin: 0px 0px;">
              <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                data-toggle="dropdown">{{blBlkName}}
                <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
              <ul class="dropdown-menu fullw">
                <li (click)="prerequisitesAddUnit(item.blBlockID,item.blBlkName)" *ngFor='let item of allBlocksLists'>
                  <a>{{item.blBlkName}}</a></li>
              </ul>
            </div>
          </div>
          <!--row2-->
          <!--row3-->
          <div class="content">
            <label>Select Unit</label>
            <div class="block-row">
              <span (click)="enableActive(spanCtrl,item['unUnitID'])" #spanCtrl
                *ngFor='let item of allUnitBlockID'>{{item['unUniName']}}</span>
            </div>
          </div>
          <!--row3-->
          <div class="content">
            <div class="col-sm-6 np">
              <div class="form-group"
                [ngClass]="{'has-error' : occupancydateControl.invalid && occupancydateControl.touched}">
                <label>Select Date Of Occupancy<span class="red">*</span></label>
                <input type="text" class="form-control" name="UNOcSDate" #occupancydateControl='ngModel'
                  placeholder="Occupancy Date" required [bsConfig]='bsConfig' [(ngModel)]="UNOcSDate" bsDatepicker
                  [minDate]="minDate" />
                <p class="alerts" *ngIf="occupancydateControl.invalid && occupancydateControl.touched"> Please Select
                  Date</p>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                  [(ngModel)]='OwnerType' value="6">
                <label class="form-check-label" for="inlineRadio1">Join As Owner</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                  [(ngModel)]='OwnerType' value="7">
                <label class="form-check-label" for="inlineRadio2">Join As Tenant</label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-12">
          <button class="btn btn-primary-purple nextBtn pull-right" type="button"(click)='requestForJoin()'>Join</button>
          <input class="btn btn-primary-purple pull-right" style="margin-right: 12px;" (click)='resetJoinAssociation()' type="reset" value="Reset">
        </div>
      </div>
      <!--Join Association form Ends-->
    </div>

  </div>
  <!--rightBar start-->
  <!-- <app-right-bar></app-right-bar> -->
  <!--rightBar end-->
</div>


<ng-template #viewreceiptmodal>
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">View Association</h5>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body" style="padding-top: 0px;">
      <div class="row">
        <div class="col-sm-12 np">
          <h5 class="text-center view-ass">Association Name : <strong>{{associationname}}</strong></h5>
        </div>
        <div class="col-sm-12" style="margin-top: 20px;">
          <h5 style="color:#5a51aa">Enroll Information</h5>
          <div class="col-sm-4">
            <p><b>Association Name : </b>{{associationname}}</p>
          </div>
          <div class="col-sm-4">
            <p><b>Uploaded File : </b> <span>{{file}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>Country : </b> <span>{{country}}</span></p>
          </div>

          <div class="col-sm-4">
            <p><b>PinCode : </b> <span>{{pincode}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>State : </b> <span>{{State}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>City : </b> <span>{{city}}</span></p>
          </div>

          <div class="col-sm-4">
            <p><b>Property Type : </b> <span>{{propertyType}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>Property Name : </b> <span>{{propertyName}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>Locality : </b> <span>{{locality}}</span></p>
          </div>
        </div>
        <div class="col-sm-12" style="margin-top: 20px;">
          <h5 style="color:#5a51aa">Blocks & Unit details</h5>
          <!-- <div class="col-sm-4">
                         <p>State : <span>{{State}}</span></p>
                     </div> -->

          <!-- <div class="col-sm-4">
                             <p>Property Type : <span>{{propertyType}}</span></p>
                         </div> -->
          <div class="col-sm-4">
            <p><b>No of Units :</b> <span>{{NoofUnits}}</span></p>
          </div>
          <div class="col-sm-4">
            <p><b>TotalNoBlocks :</b> <span>{{blocks}}</span></p>
          </div>
        </div>
        <div class="col-sm-12" style="margin-top: 20px;">
        
            <h5 style="color:#5a51aa">Pan and Registration details</h5>

            <div class="col-sm-4">
                <p><b>Pan or reg Number :</b> <span>{{panno}}</span></p>
              </div>
              <div class="col-sm-4">
                <p><b>GSTNumber :</b> <span>{{gstno}}</span></p>
              </div>
              <div class="col-sm-4">
                <p><b>Uploaded Pan :</b> <span>{{pandoc}}</span></p>
              </div>
        
        </div>

        <div class="col-sm-12" style="margin-top: 20px;">
            <h5 style="color:#5a51aa">Bank Information</h5>
            <div class="col-sm-4">
                <p><b>Bank Name:</b> <span>{{BankName}}</span></p>
              </div>
      
              <div class="col-sm-4">
                <p><b>IFSC :</b> <span>{{IFSC}}</span></p>
              </div>
              <div class="col-sm-4">
                <p><b>Account Number :</b> <span>{{AccountNumber}}</span></p>
              </div>
              <div class="col-sm-4">
                <p><b>Account Type:</b> <span>{{accountType}}</span></p>
              </div>    
        </div>
        
  
        <div class="col-sm-12" style="margin-top: 20px;">
            <h5 style="color:#5a51aa">Amenities</h5>
            <div class="col-sm-4">
                <p><b>Amenity Type: </b><span>{{amenityType}}</span></p>
              </div>
              
              <div class="col-sm-4">
                <p><b>Amenity Number :</b> <span>{{amenityNo}}</span></p>
              </div>
        </div>     
      </div>
    </div>

  </div>
</ng-template>

<ng-template #template>
  <div class="modal-content">

    <div class="modal-header">
      
      <h4 class="modal-title">Edit Association</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col-xs-12" style="width: 90%; margin-left: 3%;">
          <form #editAssnFrm='ngForm' name="editAssociation" autocomplete="off">
            <div class="row">
              <div class="col-sm-4 col-xs-12">
                <div class="from-group">
                  <p>Association Name: <strong>{{ASAsnName}}</strong></p>
                </div>
              </div>
              <div class="col-sm-4 col-xs-12"></div>
              <div class="col-sm-4 col-xs-12" style="text-align:pull-right">
                <p>Date: <strong>{{newdate | date: "d/M/y"}}</strong></p>
              </div>
            </div>

            <div>
              <!-- <div class="row">
                <br>
                <div class="col-sm-1 col-xs-12"></div>
                <div class="col-sm-11  col-xs-12">
                  <h4 class="headingOrange">Edit Association</h4>

                </div>
              </div> -->

              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : associationnameControl.invalid && associationnameControl.touched}">
                    <label>Association Name<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASAsnName" [(ngModel)]="ASAsnName"
                      #associationnameControl='ngModel' required />
                    <p class="alerts" *ngIf="associationnameControl.invalid && associationnameControl.touched">
                      Association Name is required</p>
                  </div>
                </div>

                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw">
                    <label>Country</label>
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                        data-toggle="dropdown">{{ASCountry}}
                        <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                      <ul class="dropdown-menu fullw" style="font-family: Quicksand;height: 200px;">
                        <li *ngFor="let country of countries" (click)="countryName(country.name)">
                          <a>{{country.name}}</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : addressControl.invalid && addressControl.touched}">
                    <label>Address<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASAddress" [(ngModel)]="ASAddress"
                      #addressControl='ngModel' placeholder="Address" pattern="[a-zA-Z0-9- _]*" required />
                    <p class="alerts" *ngIf="addressControl.invalid && addressControl.touched">Address is required</p>
                  </div>
                </div>

                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw" [ngClass]="{'has-error' : cityControl.invalid && cityControl.touched}">
                    <label>City<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASCity" [(ngModel)]="ASCity" #cityControl='ngModel'
                      placeholder="City" pattern="[a-zA-Z0-9-]*" required />
                    <p class="alerts" *ngIf="cityControl.invalid && cityControl.touched">City is required</p>
                  </div>
                </div>

                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw" [ngClass]="{'has-error' : stateControl.invalid && stateControl.touched}">
                    <label>State<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASState" [(ngModel)]="ASState" #stateControl='ngModel'
                      placeholder="State" pattern="[a-zA-Z0-9-]*" required />
                    <p class="alerts" *ngIf="stateControl.invalid && stateControl.touched">State is required</p>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : pincodeControl.invalid && pincodeControl.touched}">
                    <label>PinCode<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASPinCode" [(ngModel)]="ASPinCode"
                      #pincodeControl='ngModel' placeholder="PinCode" pattern="[a-zA-Z0-9-]*" required />
                    <p class="alerts" *ngIf="stateControl.invalid && stateControl.touched">State is required</p>
                  </div>
                </div>

                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw">
                    <label>Property Type<span class="red">*</span></label>
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                        data-toggle="dropdown">{{ASPrpType}}
                        <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                      <ul class="dropdown-menu fullw" style="font-family: Quicksand;height: 200px;">
                        <li *ngFor="let propertyType of propertyTypes" (click)="getpropertyType(propertyType.name)">
                          <a>{{propertyType.displayName}}</a></li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : propNameControl.invalid && propNameControl.touched}">
                    <label>Property Name<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASPrpName" [(ngModel)]="ASPrpName"
                      #propNameControl='ngModel' placeholder="Property Name" pattern="[a-zA-Z0-9- _]*" required />
                    <p class="alerts" *ngIf="propNameControl.invalid && propNameControl.touched">Property Name is
                      required</p>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : noblockControl.invalid && noblockControl.touched}">
                    <label>No Of Blocks<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASNofBlks" [(ngModel)]="ASNofBlks"
                      #noblockControl='ngModel' pattern="[0-9]*" placeholder="No Of Blocks" required />
                    <p class="alerts" *ngIf="noblockControl.invalid && noblockControl.touched">Number Of Blocks is
                      required</p>
                  </div>
                </div>

                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : nounitControl.invalid && nounitControl.touched}">
                    <label>No Of Units<span class="red">*</span></label>
                    <input type="text" class="form-control" name="ASNofUnit" [(ngModel)]="ASNofUnit"
                      #nounitControl='ngModel' pattern="[0-9]*" placeholder="No Of Units" required />
                    <p class="alerts" *ngIf="nounitControl.invalid && nounitControl.touched">Number Of Units is required
                    </p>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : amenitytypeControl.invalid && amenitytypeControl.touched}">
                    <label>Amenity Type<span class="red">*</span></label>
                    <input type="text"  class="form-control" name="AMType" [(ngModel)]="AMType"
                      #amenitytypeControl='ngModel' placeholder="Amenity Type" pattern="[a-zA-Z0-9- _]*" required />
                    <p class="alerts" *ngIf="amenitytypeControl.invalid && amenitytypeControl.touched">Amenity Name is
                      required</p>
                  </div>
                </div>

                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : noofamenityControl.invalid && noofamenityControl.touched}">
                    <label>No Of Amenities<span class="red">*</span></label>
                    <input type="text" class="form-control" name="NoofAmenities" [(ngModel)]="NoofAmenities"
                      #noofamenityControl='ngModel' pattern="[0-9]*" placeholder="No Of Amenities" required />
                    <p class="alerts" *ngIf="noofamenityControl.invalid && noofamenityControl.touched">No Of Amenities
                      are required</p>
                  </div>
                </div>
              </div>


              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : banknameControl.invalid && banknameControl.touched}">
                    <label>Bank Name<span class="red">*</span></label>
                    <input type="text" class="form-control" name="BABName" [(ngModel)]="BABName"
                      #banknameControl='ngModel' placeholder="Bank Name" pattern="[A-Za-z\s]+" required />
                    <p class="alerts" *ngIf="banknameControl.invalid && banknameControl.touched">Bank Name is required
                    </p>
                  </div>
                </div>

                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : bankifscControl.invalid && bankifscControl.touched}">
                    <label>IFSC<span class="red">*</span></label>
                    <input type="text" class="form-control" name="BAIFSC" [(ngModel)]="BAIFSC"
                      #bankifscControl='ngModel' placeholder="Bank IFSC" pattern="^[A-Za-z]{4}[a-zA-Z0-9]{7}$"
                      required />
                    <small>Ex: PAAA1111111</small>
                    <p class="alerts" *ngIf="bankifscControl.invalid && bankifscControl.touched">IFSC is required</p>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw"
                    [ngClass]="{'has-error' : accountnumberControl.invalid && accountnumberControl.touched}">
                    <label>Account Number<span class="red">*</span></label>
                    <input type="text" class="form-control" name="BAActNo" [(ngModel)]="BAActNo"
                      #accountnumberControl='ngModel' placeholder="Account Number" pattern="[a-zA-Z0-9-]*" required />
                    <p class="alerts" *ngIf="accountnumberControl.invalid && accountnumberControl.touched">Account
                      Number is required</p>
                  </div>
                </div>

                <div class="col-sm-6 col-xs-12">
                  <div class="form-group fulw">
                    <label>Account Type<span class="red">*</span></label>
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle sdm br form-control"
                          type="button" data-toggle="dropdown">{{BAActType}}
                          <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                      <ul class="dropdown-menu fullw">
                      <li *ngFor="let accounttype of accountTypes" (click)="getAccountType(accounttype.name)"><a>{{accounttype.name}}</a></li>
                      </ul>
                  </div>
                  </div>
                </div>
              </div>

              <div class="from-group">
                <div class="form-group pull-right">
                  <br>
                  <button [disabled]='editAssnFrm.invalid' type="submit" class="btn btn-primary-purple nextBtn"
                    (click)="UpdateAssociation()">Update</button>
                </div>
              </div>


            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</ng-template>
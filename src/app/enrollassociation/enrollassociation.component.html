<mat-tab-group class="mainpage" [(selectedIndex)]="demo1TabIndex">
    <div class="blockdetailsdata">
        <mat-tab #tab [disabled]='!tab.isActive' label="ASSOCIATION DETAILS">
            <div class="page1">
                <form [formGroup]="form" class="association-form">
                    <mat-form-field class="association-full-width">
                        <mat-label>ASSOCIATION NAME<span class="red">*</span></mat-label>
                        <input matInput placeholder="Association Name" 
                        pattern="[A-Za-z\s]+"
                        matTooltip="This name should match as given in the Association Pan Card" class = "text" 
                        formControlName="asnname" [(ngModel)]="assname"
                            value="">
                        <mat-error [displayError]="isFieldValid('asnname')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                <!-- <mat-grid-tile>
                <div class="container">
                    <input type="file" style="display: none" #fileInput accept="image/*" (change)="onChangeFileInput()" />
                    <mat-icon>Choose_file</mat-icon>
                    <button mat-raised-button color="primary" class="file-select-button" (click)="onClickFileInputButton()">
                      Upload
                    </button>

                    <p class="file-name" *ngIf="!file; else fileName">No file chosen</p>
                    <ng-template #fileName>
                      <p class="file-name">{{ file?.name }}</p>
                    </ng-template>
                  </div>
            </mat-grid-tile> -->

            <!-- <i matTooltip="Upload Logo of Max 2MB of Formats allowed are:PNG,JPG and Resolution of 128*128"
                class="fa fa-question-circle" aria-hidden="true"></i>
            <mat-label class="logo">Upload logo</mat-label>
            <input type="file" id="img" accept="image/png,imge/jpeg" />
            <a mat-raised-button color="primary" class="Upload">Upload</a> -->
            <!-- <mat-label class="logoassociation">Upload logo</mat-label>
            <i matTooltip="Upload Logo of Max 2MB of Formats allowed are:PNG,JPG and Resolution of 128*128"
            class="fa fa-question-circle" aria-hidden="true"></i> -->
            <form [formGroup]="uploadForm" (ngSubmit)="processFile()" class="association-form">
                <input #fileInput2 type="file" id="assnfile" (change)="onFileSelect($event)" (click)="fileopen($event,fileInput2)">
<div style="width: 130px;">
 <button mat-raised-button color="primary" class="Upload" type="submit">Upload</button>
<img [hidden]="thumbnailASAsnLogo==undefined" class="Upload1" (click)="showImgOnPopUp(UploadedImagetemplate,thumbnailASAsnLogo,'Association Image')" src="{{thumbnailASAsnLogo}}" width="50px" height="50px"/>
</div>
                <!-- <input type="file" id="img" name="profile" (change)="onFileSelect($event)" /> -->
                 <!-- <img *ngIf="thumbnailASAsnLogo==undefined" class="Upload1" src="../../assets/images/map_placeholder.png" width="50px" height="50px"/> -->
            </form>

                <!-- <form class="association-form">
                    <p>Upload Logo of Max 2MB of Formats allowed</p>
                </form>
 -->

                

                <form [formGroup]="form" class="association-formcountry">
                    <mat-form-field>
                        <mat-label>COUNTRY<span class="red">*</span></mat-label>
                        <mat-select formControlName="cntryname">
                            <mat-option *ngFor="let country of countrieslist" (onSelectionChange)="selectedcountry(country)"class = "text"[value]="country">{{country.coName}}
                            </mat-option>
                        </mat-select>
                        <mat-error [displayError]="isFieldValid('cntryname')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                <br>
                <form [formGroup]="form" class="association-form">
                    <mat-form-field>
                        <mat-label>STATE<span class="red">*</span></mat-label>
                        <mat-select formControlName="statename">
                            <mat-option *ngFor="let state of stateslist" (onSelectionChange)="selectedstate(state)" [value]="state">{{state.stName}}
                            </mat-option>
                        </mat-select>
                        <mat-error [displayError]="isFieldValid('statename')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                <form [formGroup]="form" class="association-form">
                    <mat-form-field>
                        <mat-label>CITY<span class="red">*</span></mat-label>
                        <mat-select formControlName="cityname">
                            <mat-option *ngFor="let city of citylist" (onSelectionChange)="selectedcity(city)" [value]="city">{{city.ctName}}
                            </mat-option>
                        </mat-select>
                        <mat-error [displayError]="isFieldValid('cityname')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                <!-- <form [formGroup]="form" class="association-form">
                    <mat-form-field class="association-full-width">
                        <mat-label>CITY</mat-label>
                        <input matInput placeholder="CITY" pattern="[a-zA-Z\s]*"formControlName="cityname" class = "text" [(ngModel)]="city" value="">
                        <mat-error [displayError]="isFieldValid('cityname')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form> -->
               
                <form [formGroup]="form" class="association-form">
                    <mat-form-field class="association-full-width">
                        <mat-label>PIN/ZIP/POSTAL CODE<span class="red">*</span></mat-label>
                        <input matInput placeholder="PIN/ZIP"pattern="[0-9]*" 
                         pattern="^\d{6,}$"
                         (keypress)=_keyPress($event)
                        minlength="5"
                        maxlength="6" 
                        formControlName="zipcode" [(ngModel)]="postalcode"
                            value="">
                        <mat-error [displayError]="isFieldValid('zipcode')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                
                <form [formGroup]="form" class="association-form">
                    <mat-form-field>
                        <mat-label>PROPERTY TYPE<span class="red">*</span></mat-label>
                        <mat-select [(value)]="propertytype" formControlName="prprtytype">
                            <mat-option *ngFor="let property of propertyType" [value]="property">{{property}}
                            </mat-option>
                        </mat-select>
                        <mat-error [displayError]="isFieldValid('prprtytype')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                <br>
                <form [formGroup]="form" class="association-form">
                    <mat-form-field class="association-full-width">
                        <mat-label>PROPERTY NAME<span class="red">*</span></mat-label>
                        <input matInput placeholder="PROPERTY NAME"
                        pattern="[a-zA-Z\s]*"
                         class = "text"formControlName="prtyname"
                            [(ngModel)]="propertyname" value="">
                        <mat-error [displayError]="isFieldValid('prtyname')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
               
                <form [formGroup]="form" class="association-form">
                    <mat-form-field class="association-full-width">
                        <mat-label>LOCALITY<span class="red">*</span></mat-label>
                        <input matInput placeholder="LOCALITY"class = "text" 
                        pattern="[A-Za-z\s]+"
                        maxlength="255"
                        (keypress)="_keyPress2($event)"

                        formControlName="locname" [(ngModel)]="locality"
                            value="">
                        <mat-error [displayError]="isFieldValid('locname')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                
                <form [formGroup]="form" class="association-form">
                    <mat-form-field class="association-full-width">
                        <mat-label>ASSOCIATION EMAIL<span class="red">*</span></mat-label>
                        <input matInput placeholder="ASSOCIATION EMAIL" 
                        pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
                        formControlName="assemail"
                            [(ngModel)]="Associationemail" value="">
                        <mat-error [displayError]="isFieldValid('assemail')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                <form [formGroup]="form" class="association-form">
                    <mat-form-field class="association-full-width">
                        <mat-label>ASSOCIATION WEBSITE URL</mat-label>
                        <input matInput placeholder="URL" 
                         pattern="^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$"
                        formControlName="urlset" [(ngModel)]="url" value="">
                        <mat-error [displayError]="isFieldValid('urlset')">
                            {{ titleAlert }}
                        </mat-error>
                    </mat-form-field>
                </form>
                <br>
                <div class="save">
                    <a class="continue" (click)="resetStep1($event)"mat-raised-button color="primary">RESET</a>
                    <a id="assdetailssave"mat-raised-button color="primary" [disabled]="!form.valid"(click)="submitassociationdetails($event)">SAVE & CONTINUE</a>
                </div>

            </div>
        </mat-tab>

        <mat-tab [disabled]='!tab.isActive' label="GST & PAN DETAILS">
            <form [formGroup]="gstpanform" class="association-form3" style="padding-left: 125px;">
                <mat-form-field class="association-full-width">
                    <mat-label>GST NUMBER(OPTIONAL)</mat-label>
                     <input matInput placeholder="GST NUMBER"
                     matTooltip="Please enter registered GST number of the association"
                    formControlName="gst"
                    (blur)="fillPANValue()"
                    [(ngModel)]="gstnumber" 
                    autocomplete='gstnumber'
                    pattern="^([0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9a-zA-Z]{1}[zZ]{1}[0-9a-zA-Z]{1})+$" minlegth=15 maxlength=15 
                    value="">
                    <mat-error [displayError]="isFieldValidPanDetails('gst')">
                        {{ titleAlert }}
                    </mat-error>
                </mat-form-field>
                <p class="panextext">Ex: 22AAAAA0000A1Z5</p> 
            </form>
            <form [formGroup]="gstpanform" class="association-form3" style="padding-left:239px">
                <mat-form-field class="association-full-width">
                    <mat-label>PAN NUMBER<span class="red">*</span></mat-label>
                    <input matInput placeholder="PAN NUMBER"
                        matTooltip="Please enter registered pan number of the association" class="text"
                        [(ngModel)]="pannumber" value=""
                        formControlName="originalpan"
                        autocomplete='pannumber' 
                        (keyup)="pan_validate($event)"
                        pattern="[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}"
                        minlength=10 maxlength=10>
                    <mat-error [displayError]="isFieldValidPanDetails('originalpan')">
                        Please Enter Valid Pan Number
                    </mat-error>
                </mat-form-field>
                <p class="panextext">Ex: PAAAA1234A</p> 

            </form>
            <div id="pancardupload">
                <!-- <mat-label class="control-label">Upload Scanned Pan Card</mat-label> -->
            
                <label class="control-label">Upload Scanned Pan Card</label>
                <!-- <input type="file" name="uploadPANCard" autocomplete='crtAss.uploadPANCard'
                          [(ngModel)]="crtAssn.uploadPANCard" #uploadPANCardControl="ngModel" class="form-control"
                          (change)='onFilSelected($event)' id="uploadPaninput" style="font-family: Quicksand"
                          pattern="(.*?)\.(png|jpeg|jpg)$" /> -->
                          <div>
                            <form [formGroup]="uploadPanForm" (ngSubmit)="processPanFile()">
                <input #fileInput3 type="file" id="uploadCaptureInputFile" name="panProfile" (change)="onPanFileSelect($event)" (click)="fileopen1($event,fileInput3)">

                            <!-- <input type="file" name="panProfile" id="uploadCaptureInputFile" (change)="onPanFileSelect($event)" /> -->
                            <button class="btn btn-primary-purple" style="margin: 5px 0px;" type="submit">Upload</button> <img
                              [hidden]="uploadPANCardThumbnail == undefined"  (click)="showImgOnPopUp(UploadedImagetemplate,uploadPANCardThumbnail,'PAN Card Scanned Copy')"
                                src="{{uploadPANCardThumbnail}}" width="50px" height="50px" />
                            </form>
                          </div>
                
                <span class="note">Upload Logo of Max 2MB and formats allowed are: PNG,JPG and
                    Resolution of 128*128</span>
            
            </div>

            <div class="save">
                <a class="previous" (click)="previouspage($event)"mat-raised-button color="primary">PREVIOUS</a>
                <a class="continueforresetpan" (click)="resetStep2($event)"mat-raised-button color="primary">RESET</a>
                <a id="pansubmit"mat-raised-button color="primary" [disabled]="!gstpanform.valid"(click)="submitpandetails($event)">SAVE & CONTINUE</a>
            </div>
        </mat-tab>



        <!-- <mat-tab [disabled]='!tab.isActive' label="Amenities">
            <form class="association-form3">
                <mat-form-field>
                    <mat-select placeholder="SelectAmenity" [(value)]="amenityname">
                        <mat-option *ngFor="let amenity of amenityType" [value]="amenity">{{amenity}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </form>
            <form class="association-form3">
                <mat-form-field class="association-full-width">
                    <mat-label>No of Amenity</mat-label>
                    <input matInput placeholder="No of Amenities" [(ngModel)]="noofamenities" value=""
                        [formControl]="blockdigits" required>
                </mat-form-field>
            </form>
            <div class="save">
                <a class="continue" mat-raised-button color="primary">RESET</a>
                <a mat-raised-button color="primary" [disabled]="!form.valid"(click)="submitamenity($event)">SAVE & CONTINUE</a>
            </div>
        </mat-tab> -->
        <mat-tab [disabled]='!tab.isActive' label="BLOCK & UNIT DETAILS">
            <form [formGroup]="blockform" class="association-form3">
                <mat-form-field class="association-full-width">
                    <mat-label>TOTAL NO OF BLOCKS<span class="red">*</span></mat-label>
                    <input matInput placeholder="NO OF BLOCKS" 
                    (keypress)="keyPress3($event)"  
                    formControlName="blockno" [(ngModel)]="noofblocks"
                        value="">
                    <mat-error [displayError]="isFieldValidblockandunitdetails('blockno')">
                        {{ titleAlert }}
                    </mat-error>
                </mat-form-field>
            </form>
            <form [formGroup]="blockform" class="association-form3">
                <mat-form-field class="association-full-width">
                    <mat-label>TOTAL NO OF UNITS<span class="red">*</span></mat-label>
                    <input matInput placeholder="NO OF UNITS"
                    (keypress)="keyPress3($event)" 
                    matTooltip="This number should be the total of all the flats which are sold, unsold and vacant"formControlName="unitno" [(ngModel)]="noofunits" value="">
                    <mat-error [displayError]="isFieldValidblockandunitdetails('unitno')">
                        {{ titleAlert }}
                    </mat-error>
                </mat-form-field>
            </form>
            <div class="save">
                <a class="continue" (click)="previouspage($event)"mat-raised-button color="primary">PREVIOUS</a>
                <a class="continue" (click)="resetStep3($event)"mat-raised-button color="primary">RESET</a>
                <a id="assdetailssave"mat-raised-button color="primary" [disabled]="!blockform.valid"(click)="submitassociationcreation($event,'')">SAVE & CONTINUE</a>
            </div>
        </mat-tab>
        <!-- <mat-tab [disabled]='!tab.isActive' label="Bulkupload/Manual entry Details">
          
                        <div class="upload_excel">
                            <a> <img style="width: 60px;" class="excel" (click)="upLoad()" src="../../assets/images/upload.png"
                                    tooltip="Have more num of Blocks?"></a>
                            <a href="../../assets/Excel/Demo_Block_Detailstemplate.xlsx" download><img style="width: 60px;" class="excel"
                                    src="../../assets/images/download.png"
                                    tooltip="click to download demo excel format"></a>
                            <input type="file" id="file_upload_id" (change)="onFileChange($event)" multiple="false"
                                accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                                style="display:none" #file>
                        </div> 
                       <div id="manualbulk">
                        <button id="button1"mat-raised-button color="primary"(click)="submitforconform($event)">Manual Input</button>
                        <button id="button2"mat-raised-button color="primary"(click)="submitforconform($event)">Bulk Upload</button>

                       </div>
         
                      
           
        </mat-tab> -->
        <mat-tab [disabled]='!tab.isActive' label="BLOCKS DETAILS">
            <button style="margin-top:12px;float: right;" id="button2" mat-raised-button color="primary" (click)="submitforblocksbulkupload($event)">Bulk Upload</button>
            <!-- <div id="manualbulk">
                <button id="button1" mat-raised-button color="primary" (click)="submitforconformblockdetails($event)">Manual Input</button>
                <button style="position: fixed;top: 55%;right: 2%;" id="button2" mat-raised-button color="primary" (click)="submitforblocksbulkupload($event)">Bulk Upload</button>
            </div> -->

            <div id="upload_excel" style="display:none">
                <a id="blocksuploadid1"> <img style="width: 100px;" class="excel" (click)="uploadblocks()" src="../../assets/images/upload.png"
                    matTooltip="UPLOAD"></a>
                <a id="blocksuploadid" href="../../assets/Excel/Demo_Block_Detailstemplate_New.xlsx" download><img style="width: 100px;" class="excel"
                        src="../../assets/images/download.png" matTooltip="click to download demo excel format"></a>
                <input #fileInput1 type="file" id="file_upload_id" (click)="fileInput1.value = null"
                    (change)="onFileChange($event)"
                    accept=".csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
                <div id="cancelbutton">
                    <button mat-raised-button color="primary" (click)="cancelbulkupload($event)">Cancel</button>
                </div>
                <!-- <input type="file" id="file_unitupload_id" (change)="onFileunitdetailschange($event)" multiple="true"
                    accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"#file> -->
            </div>
                <!-- <div id="upload_excel" style="display:none">
                    <a> <img style="width: 100px;" class="excel" (click)="upLoad()" src="../../assets/images/upload.png"
                        matTooltip="UPLOAD"></a>
                    <a href="../../assets/Excel/Demo_Block_Detailstemplate.xlsx" download><img style="width: 100px;" class="excel"
                            src="../../assets/images/download.png" matTooltip="click to download demo excel format"></a>
                    <input #fileInput type="file" id="file_upload_id" (click)="fileInput.value = null" 
                    (change)="onFileChange($event)"
                        accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
                 <div id="cancelbutton">
                  <button mat-raised-button color="primary" (click)="cancelbulkupload($event)">Cancel</button>
               </div>
                </div> -->
                
            <!-- <div [formGroup]="blocksdetailsform"> -->
                <!-- <div id="showmanual" style="display:none;margin-top: 30px;"> -->
                    <!-- <form #blkDtlFrm="ngForm" class="blockdetails-form"> -->
                <div id="showmanual" style="margin-top: 30px;" style="display:none">
                    <div *ngIf="duplicateBlocknameExist"><p style="color: red;font-size: 30px;text-transform: uppercase;">Duplicate Blockname exist please enter unique blockname</p></div>
                    <div *ngFor="let obj of blocksArray;let i= index">
                        <!-- <app-blockdetails [i]="i" [obj]="obj" [detailsdata]="detailsdata" [blocksArray]="blocksArray" [blocksdetailsform]="blocksdetailsform.get(i.toString())"></app-blockdetails> -->
                        <div class="blockdetailsdata">
                                <div>
                                    <!-- <form [formGroup]="form1"> -->
                                    <mat-form-field class="blockdetails-form">
                                            <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">BLOCK NAME/NUMBER<span [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">*</span></mat-label>
                                            <input disabled="{{obj['hasNoDuplicateBlockname']==true}}" matInput placeholder="BLOCK NAME/NUMBER" 
                                            pattern="[a-zA-Z0-9 _]*" 
                                          (keyup)="getblocknameornumber(blocksArray[i]['Id'],blocksArray[i].blockname)"
                                            class = "text" id="label" [(ngModel)]="blocksArray[i].blockname" value="">
                                            <!-- <mat-error *ngIf ="detailsdata[i]['blockname']['required']&&detailsdata[i]['blockname']['clicked']&&'!blocksArray[i].blockname'">
                                                {{ titleAlert }}
                                            </mat-error> -->
                                    </mat-form-field>
                                    <!-- </form> -->
                                    <!-- <p class ="validation"*ngIf ="detailsdata[i]['blockname']['required']&&detailsdata[i]['blockname']['clicked']&&!blocksArray[i]['blockname']">{{ titleAlert }}</p> -->
                                    <!-- <p class="validation" *ngIf="detailsdata[i]['blockname']['required']==undefined">Valid name is required</p> -->
                                    <p class="validation" *ngIf="blocksArray[i]['isnotvalidblockname']">Valid name is required</p>
                                    <p class="validation" *ngIf="blocksArray[i]['blockname']==undefined">Valid name is required</p>
        
                                </div>
                                <div>
                                    <!-- <form [formGroup]="form1"> -->
                                    <mat-form-field class="blockdetails-form">
                                        <!-- <mat-select [(value)]="residentialorcommercialtype"  -->

                                        <!-- <mat-select [disabled]="condition"
                                        [(value)]="blocksArray[i].blocktype" 
                                        (blur)="getblocktype(blocksArray[i]['Id'],blocksArray[i].blocktype)"
                                        placeholder="BLOCK TYPE">
                                            <mat-option *ngFor="let property of blockType" [value]="property">{{property}}
                                            </mat-option>
                                        </mat-select> -->
                                        <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">BLOCK TYPE<span [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">*</span></mat-label>

                                        <mat-select [disabled]="condition"
                                        [(value)]="blocksArray[i].blocktype">
                                            <mat-option *ngFor="let property of blockType" [value]="property">{{property}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <!-- </form> -->
                                    <!-- <p class="validation" *ngIf="blocksArray[i]['isnotvalidblocktype']">Valid block Type is required</p> -->
                                    <p class="validation" *ngIf="blocksArray[i]['blocktype']==undefined">Valid block Type is required</p>
                                
                                </div>
                              <div>
                                <!-- <form [formGroup]="form1"> -->
                                    <mat-form-field class="blockdetails-form">
                                        <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">NO OF UNITS<span [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">*</span></mat-label>
                                        <input disabled="{{obj['hasNoDuplicateBlockname']==true}}" matInput placeholder="NO OF UNITS" pattern="[0-9]*"
                                        (keypress)=_keyPress($event)
                                            (keyup)="getnoofunits(blocksArray[i]['Id'],blocksArray[i].units)" [(ngModel)]="blocksArray[i].units"
                                            value="">
                                        <!-- <mat-error [displayError]="isFieldValidblocksdetails('unitsno')">
                                                                        {{ titleAlert }}
                                                                    </mat-error> -->
                                    </mat-form-field>
                                <!-- </form> -->
                                <p class="validation" *ngIf="blocksArray[i]['isnotvalidunits']">No of units are required</p>
                                <p class="validation" *ngIf="blocksArray[i]['units']==undefined">No of units are required</p>

                                <!-- <p class ="validation"*ngIf ="detailsdata[i]['units']['required']&&detailsdata[i]['units']['clicked']&&!blocksArray[i]['units']">{{ titleAlert }}</p>
                                <p class="validation" *ngIf="detailsdata[i]['units']['required']==undefined">No of units are required</p> -->
        
                              </div>
                             <div>
                                <!-- <form [formGroup]="form1"> -->
                                <mat-form-field class="blockdetails-form">
                                    <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">MANAGER NAME<span [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">*</span></mat-label>
                                    <input disabled="{{obj['hasNoDuplicateBlockname']==true}}" class = "text" 
                                    (keypress)="_keyPress2($event)"
                                    matInput placeholder="MANAGER NAME" 
                                    (keyup)="getmanagername(blocksArray[i]['Id'],blocksArray[i].managername)"
                                    [(ngModel)]="blocksArray[i].managername" 
                                    value=""pattern="[a-zA-Z _]*">
                                    <!-- <mat-error [displayError]="isFieldValidblocksdetails('mngname')">
                                        {{ titleAlert }}
                                    </mat-error> -->
                                </mat-form-field>
                                <!-- </form> -->
                                <!-- <p class ="validation"*ngIf ="detailsdata[i]['managername']['required']&&detailsdata[i]['managername']['clicked']&&!blocksArray[i]['managername']">{{ titleAlert }}</p>
                                <p class="validation" *ngIf="detailsdata[i]['managername']['required']==undefined">Manager name is required</p>
                                 -->
                            <p class="validation" *ngIf="blocksArray[i]['isnotvalidmanagername']">Manager name is required</p>
                            <p class="validation" *ngIf="blocksArray[i]['managername']==undefined">Manager name is required</p>

                             </div>
                             <div>
                                <!-- <form [formGroup]="form1"> -->
                                <mat-form-field class="blockdetails-form">
                                    <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">MANAGER MOBILE NUMBER<span [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">*</span></mat-label>
                                    <input disabled="{{obj['hasNoDuplicateBlockname']==true}}" matInput placeholder="MANAGER MOBILE NUMBER"
                                    pattern="[0-9]*" 
                                    (keypress)=_keyPress($event)
                                    minlength="10"
                                    maxlength="10"
                                    (keyup)="getmanagermobileno(blocksArray[i]['Id'],blocksArray[i].managermobileno)"
                                        [(ngModel)]="blocksArray[i].managermobileno" value="">
                                    <!-- <mat-error [displayError]="isFieldValidblocksdetails('mngmobileno')">
                                        {{ titleAlert }}
                                    </mat-error> -->
                                </mat-form-field>
                                <!-- </form> -->
                                <!-- <p class ="validation"*ngIf ="detailsdata[i]['managermobileno']['required']&&detailsdata[i]['managermobileno']['clicked']&&!blocksArray[i]['managermobileno']">{{ titleAlert }}</p>
                                <p class="validation" *ngIf="detailsdata[i]['managermobileno']['required']==undefined">Manager mobile number is required</p>
                                 -->
                               <p class="validation" *ngIf="blocksArray[i]['isnotvalidmanagermobileno']">Manager mobile number is required</p>
                               <p class="validation" *ngIf="blocksArray[i]['managermobileno']==undefined">Manager mobile number is required</p>
                            
                            </div>
                            <div>
                                <!-- <form [formGroup]="form1"> -->
                                <mat-form-field class="blockdetails-form">
                                    <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">MANAGER EMAIL ID<span [ngClass]="{'green-lbl':obj['hasNoDuplicateBlockname']==true,'red-lbl':obj['hasNoDuplicateBlockname']==false}">*</span></mat-label>
                                    <input disabled="{{obj['hasNoDuplicateBlockname']==true}}" matInput placeholder="MANAGER EMAIL ID" 
                                    pattern="[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*"
                                    [(ngModel)]="blocksArray[i].manageremailid"
                                    (keyup)="getmanageremailid(blocksArray[i]['Id'],blocksArray[i].manageremailid)"
                                    value="">
                                    <!-- <mat-error [displayError]="isFieldValidblocksdetails('mngemaiid')">
                                        {{ titleAlert }}
                                    </mat-error> -->
                                </mat-form-field>
                                <!-- </form> -->
                               <p class="validation" *ngIf="blocksArray[i]['isnotvalidmanageremailid']">Manager email-id is required</p>
                               <p class="validation" *ngIf="blocksArray[i]['manageremailid']==undefined">Manager email-id is required</p>
                                <!-- <p class ="validation"*ngIf ="detailsdata[i]['manageremailid']['required']&&detailsdata[i]['manageremailid']['clicked']&&!blocksArray[i]['manageremailid']">{{ titleAlert }}</p>
                                <p class="validation" *ngIf="detailsdata[i]['manageremailid']['required']==undefined">Manager email-id is required</p>-->
                            </div>
                             
                                <!-- <mat-form-field class="blockdetails-form">
                                    <mat-label>UNIT OF MEASUREMENT</mat-label>
                                    <input matInput placeholder="Measurement Type" value="Sqft"readonly>
                                </mat-form-field>
                                <mat-form-field class="blockdetails-form">
                                    <mat-select [(value)]="blocksArray[i].invoicefrequency"
                                        placeholder="INVOICE CREATION FREQUENCY">
                                        <mat-option *ngFor="let country of invoicecreation" [value]="country">{{country}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field class="blockdetails-form">
                                    <mat-label>DATE OF FIRST INVOICE</mat-label>
                                    <input matInput [matDatepicker]="picker" placeholder="DATE OF FIRST INVOICE"
                                    
                                        matTooltip="please give the date when you intend to start generating invoices using scuarex"
                                        [(ngModel)]="blocksArray[i].invoicedate"[ngModelOptions]="{standalone: true}">
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field>
                                <mat-form-field class="blockdetails-form">
                                    <mat-label>DUE DATE</mat-label>
                                    <input matInput [matDatepicker]="picker1" placeholder="DUE DATE"
                                       
                                        [(ngModel)]="blocksArray[i].duedate" [ngModelOptions]="{standalone: true}">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                    <mat-error [displayError]="isFieldValidblocksdetails('duedatecalender')">
                                        {{ titleAlert }}
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field class="blockdetails-form">
                                    <mat-select [(value)]="blocksArray[i].paymentcharge" placeholder="LATE PAYMENT CHARGE TYPE">
                                        <mat-option *ngFor="let country of paymentchargetype" [value]="country">{{country}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field class="blockdetails-form">
                                    <mat-label>LATE PAYMENT CHARGE APPLIED FROM</mat-label>
                                    <input matInput placeholder="LATE PAYMENT CHARGE APPLIED FROM"
                                        
                                        matTooltip="This is based on the frequency of the invoice"
                                        [(ngModel)]="blocksArray[i].latepaymentcharge"[ngModelOptions]="{standalone: true}" value="">
                                        <mat-error [displayError]="isFieldValidblocksdetails('latepayment')">
                                            {{ titleAlert }}
                                        </mat-error>
                                </mat-form-field>
                                <mat-form-field class="blockdetails-form">
                                    <mat-label>CHARGE APPLIED FROM</mat-label>
                                    <input matInput [matDatepicker]="picker2" placeholder="CHARGE APPLIED FROM"
                                        
                                        [(ngModel)]="blocksArray[i].startdate"[ngModelOptions]="{standalone: true}">
                                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                    <mat-datepicker #picker2></mat-datepicker>
                                    <mat-error [displayError]="isFieldValidblocksdetails('startdatefrom')">
                                        {{ titleAlert }}
                                    </mat-error>
                                </mat-form-field>  -->
                        </div>
                        
                        </div>
                    <!-- </div> -->
                       <div id="blockdetailscancelbutton">
                        <!-- <button id="blockdetailscancelmanual" mat-raised-button color="primary" (click)="cancelmanualblocks($event)">Cancel</button> -->
                        </div>
                    <div id="blockdetailsbuttons"class="save">
                        <a class="continue" (click)="resetStep4($event)" mat-raised-button color="primary" >RESET</a>
                        <!-- <a id="assdetailssave" mat-raised-button color="primary" [disabled]="!form1.valid" (click)="createblocksdetails($event)">NEXT</a> -->
                        <button class="continue mat-raised-button mat-button-base mat-primary" mat-raised-button color="primary"  id="assdetailssave" color="primary" [disabled]="isblockdetailsempty" [ngStyle]="{'opacity':isblockdetailsempty ? '0.5' : '1' }" (click)="createblocksdetails('')">NEXT</button>
                    </div>
                </div>
                <!--showmanualblockwithhorizantalview-->
                <div id="showmanualblockwithhorizantalview" style="margin-top: 30px;">
                    <div class="tab-pane">
                
                        <ul class="nav nav-tabs">
                            <li *ngFor="let blkarr of blocksArray;let i= index" [ngClass]="{'active':blkarr.Id==blkarr.blockTmpid}"><a
                                    href="#{{blkarr.Id}}" (click)="assignBlkarrTmpid(blkarr.Id)"
                                    data-toggle="tab">{{blkarr.blockname==''?'Block'+(i+1):blkarr.blockname|uppercase}}
                                    &nbsp;&nbsp;<span></span>
                                    <i [hidden]="blkarr.isBlockCreated" class="fa fa-circle-thin" aria-hidden="true"></i>&nbsp;
                                    <i [hidden]="blkarr.isNotBlockCreated" class="fa fa-check-circle-o" style="color: #41ca41" aria-hidden="true"></i>
                                </a></li>
                        </ul>
                        <div class="tab-content">
                            <div [ngStyle]="{'display':obj.Id==obj.blockTmpid ? 'block' : 'none' }" *ngFor="let obj of blocksArray;let i= index" class="tab-pane">
                                <div id="{{obj.Id}}" class="blockdetailsdata" style="display: flex;flex-direction: column;align-items: stretch;justify-content: space-evenly;margin-top: 20px;">
                                    <div style="display: flex; align-items: center;justify-content: space-evenly;">

                                    <div>
                                        <mat-form-field class="blockdetails-form">
                                            <mat-label>BLOCK NAME/NUMBER<span class="red">*</span></mat-label>
                                            <input disabled="{{obj.isBlockCreated}}" matInput
                                                placeholder="BLOCK NAME/NUMBER" pattern="[a-zA-Z0-9 _]*"
                                                (keyup)="getblocknameornumber(blocksArray[i]['Id'],blocksArray[i].blockname)"
                                                class="text" id="label" [(ngModel)]="blocksArray[i].blockname" value="">
                                        </mat-form-field>
                                        <p class="validation" *ngIf="blocksArray[i]['isnotvalidblockname']">Valid name is required</p>
                                        <p class="validation" *ngIf="blocksArray[i]['blockname']==undefined">Valid name is required</p>
                
                                    </div>
                                    <div>
                                        <mat-form-field class="blockdetails-form">
                                            <mat-label>BLOCK TYPE<span class="red">*</span></mat-label>
                
                                            <mat-select [disabled]="condition" [(value)]="blocksArray[i].blocktype">
                                                <mat-option *ngFor="let property of blockType" [value]="property">{{property}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        <p class="validation" *ngIf="blocksArray[i]['blocktype']==undefined">Valid block Type is
                                            required</p>
                                    </div>
                                    <div>
                                        <mat-form-field class="blockdetails-form">
                                            <mat-label>NO OF UNITS<span class="red">*</span></mat-label>
                                            <input disabled="{{obj.isBlockCreated}}" matInput
                                                placeholder="NO OF UNITS" pattern="[0-9]*" (keypress)=_keyPress($event)
                                                (keyup)="getnoofunits(blocksArray[i]['Id'],blocksArray[i].units)"
                                                [(ngModel)]="blocksArray[i].units" value="">
                                        </mat-form-field>
                                        <p class="validation" *ngIf="blocksArray[i]['isnotvalidunits']">No of units are required</p>
                                        <p class="validation" *ngIf="blocksArray[i]['units']==undefined">No of units are required</p>
                
                                    </div>
                                </div>

                                <div style="display: flex; align-items: center;justify-content: space-evenly;">
                                    <div>
                                        <mat-form-field class="blockdetails-form">
                                            <mat-label>MANAGER NAME<span class="red">*</span></mat-label>
                                            <input disabled="{{obj.isBlockCreated}}" class="text"
                                                (keypress)="_keyPress2($event)" matInput placeholder="MANAGER NAME"
                                                (keyup)="getmanagername(blocksArray[i]['Id'],blocksArray[i].managername)"
                                                [(ngModel)]="blocksArray[i].managername" value="" pattern="[a-zA-Z _]*">
                                        </mat-form-field>
                                        <p class="validation" *ngIf="blocksArray[i]['isnotvalidmanagername']">Manager name is required
                                        </p>
                                        <p class="validation" *ngIf="blocksArray[i]['managername']==undefined">Manager name is required
                                        </p>
                
                                    </div>
                                    <div>
                                        <mat-form-field class="blockdetails-form">
                                            <mat-label>MANAGER MOBILE NUMBER<span class="red">*</span></mat-label>
                                            <input disabled="{{obj.isBlockCreated}}" matInput
                                                placeholder="MANAGER MOBILE NUMBER" pattern="[0-9]*" (keypress)=_keyPress($event)
                                                minlength="10" maxlength="10"
                                                (keyup)="getmanagermobileno(blocksArray[i]['Id'],blocksArray[i].managermobileno)"
                                                [(ngModel)]="blocksArray[i].managermobileno" value="">
                                        </mat-form-field>
                                        <p class="validation" *ngIf="blocksArray[i]['isnotvalidmanagermobileno']">Manager mobile number
                                            is required</p>
                                        <p class="validation" *ngIf="blocksArray[i]['managermobileno']==undefined">Manager mobile number
                                            is required</p>
                
                                    </div>
                                    <div>
                                        <mat-form-field class="blockdetails-form">
                                            <mat-label>MANAGER EMAIL ID<span class="red">*</span></mat-label>
                                            <input disabled="{{obj.isBlockCreated}}" matInput
                                                placeholder="MANAGER EMAIL ID"
                                                pattern="[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*"
                                                [(ngModel)]="blocksArray[i].manageremailid"
                                                (keyup)="getmanageremailid(blocksArray[i]['Id'],blocksArray[i].manageremailid)" value="">
                                        </mat-form-field>
                                        <p class="validation" *ngIf="blocksArray[i]['isnotvalidmanageremailid']">Manager email-id is
                                            required</p>
                                        <p class="validation" *ngIf="blocksArray[i]['manageremailid']==undefined">Manager email-id is
                                            required</p>
                                    </div>
                                </div>

                                </div>
                                <div id="blockdetailsbuttons1" class="save">
                                    <a class="continue" (click)="resetManualBlockCreationFields($event,obj.Id)" mat-raised-button color="primary">RESET</a>
                                    <button class="continue mat-raised-button mat-button-base mat-primary" id="assdetailssave1" color="primary" [disabled]="obj.isblockdetailsempty1"
                                        [ngStyle]="{'opacity':obj.isblockdetailsempty1 ? '0.5' : '1' }"
                                        (click)="createblocksdetails1(obj.blockname,obj.blocktype,obj.units,obj.managername,obj.managermobileno,obj.manageremailid,obj.Id,i)">NEXT</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--showmanualblockwithhorizantalview-->
                <!-- </form> -->
          
        </mat-tab>
        <!-- <mat-tab [disabled]='!tab.isActive' label="unit bulk/manual">
          
            <div class="upload_excel">
                <a> <img style="width: 60px;" class="excel" (click)="uploadunits()" src="../../assets/images/upload.png"
                        tooltip="Have more num of Blocks?"></a>
                <a href="../../assets/Excel/Demo_Block_Detailstemplate.xlsx" download><img style="width: 60px;" class="excel"
                        src="../../assets/images/download.png"
                        tooltip="click to download demo excel format"></a>
                <input type="file" id="file_unitupload_id" (change)="onFileunitdetailschange($event)" multiple="false"
                    accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                    style="display:none" #file>
            </div>
           <div>
            <button id="button1"mat-raised-button color="primary"(click)="submitassociation($event)">Manual Input</button>
            <button id="button2"mat-raised-button color="primary"(click)="submitforconform($event)">Bulk Upload</button> 

           </div>



        </mat-tab> -->
        <mat-tab [disabled]='!tab.isActive' label="UNITS DETAILS">
                <div>
                        <!-- <button style="float: right;margin-top:12px" id="unitbulkbutton" mat-raised-button color="primary"
                                            (click)="submitforbulkupload($event)">Bulk Upload</button> -->
                        <button style="margin-top:12px;float: right;" id="button2" mat-raised-button color="primary" (click)="submitforbulkupload($event)">Bulk Upload</button>
                                    
                        </div>
            <!-- <div id="unitmanualbulk">
                <button id="button1" mat-raised-button color="primary" (click)="manualunitdetailsclick($event)">Manual Input</button>
                 <button id="button2" mat-raised-button color="primary" (click)="submitforbulkupload($event)">Bulk Upload</button> 
            </div> -->
                <div id="unitupload_excel" style="display:none">
                    <a id="unitsuploadid1"> <img style="width: 100px;" class="excel" (click)="uploadunits()" src="../../assets/images/upload.png"
                        matTooltip="UPLOAD" ></a>
                    <a id="unitsuploadid" href="../../assets/Excel/Demo_Unit_Detailstemplate_New.xlsx" download><img style="width: 100px;" class="excel"
                            src="../../assets/images/download.png" matTooltip="click to download demo excel format"></a>
                    <input #fileInput type="file" id="file_unitupload_id" (click)="fileInput.value = null"
                        (change)="onFileunitdetailschange($event,UpdateBlockUnitCountTemplate)"
                        accept=".csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
                    <div id="cancelbutton">
                        <button mat-raised-button color="primary" (click)="cancelunitsbulkupload($event)">Cancel</button>
                    </div>
                    <!-- <input type="file" id="file_unitupload_id" (change)="onFileunitdetailschange($event)" multiple="true"
                        accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"#file> -->
                </div>
            <div id="unitshowmanual">
            <!-- <mat-tab-group class="mainpage" [(selectedIndex)]="demo2TabIndex"> -->
                <!--test-->

                 <div id="unitsmanualnew" class="container-fluid">
                    <div class="row">
                    
                    <ul class="nav col-md-2" id="leftTabs" style="margin-top: 48px;">
                        <li class="active" *ngFor="let obj of blocksArray" style="background: #5a51aa;color: #fff !important;border-radius: 10px;display: flex;align-items: center;justify-content: space-around;    margin-bottom: 2px;">
                        <a style="color: #fff !important;background: #5a51aa;" href="#{{obj.Id}}" (click)="assignTmpid(obj.Id,obj.blockname)" data-toggle="tab">
                            <!-- <input type="checkbox" value="unt" [checked]="obj.isUnitsCreatedUnderBlock">&nbsp;&nbsp;<span></span>{{obj.blockname}} -->
                            &nbsp;&nbsp;<span></span>{{obj.blockname | uppercase}}
                            <i [hidden]="obj.isUnitsCreatedUnderBlock" class="fa fa-circle-thin" aria-hidden="true"></i>&nbsp;
                            <i [hidden]="obj.isUnitsCreatedUnderBlock1" class="fa fa-check-circle-o" style="color: #41ca41" aria-hidden="true"></i>
                        </a>
                        </li>
                    </ul>
                    <div class="tab-content col-md-10">
                        <div *ngFor="let obj1 of blocksArray">
                            <div class="tab-pane" [ngClass]="{'active':obj1.Id==obj1.blockTmpid}" id="{{obj1.Id}}">
                                
                                <ul class="nav nav-tabs" [ngStyle]="{'display':obj1.Id==obj1.blockTmpid ? 'block' : 'none' }">
                                    <li  *ngFor="let obj2 of unitlistjson[blocknameforIteration];let i= index" [ngClass]="{'active':obj2.Id==obj2.unitTmpid}">
                                        <a href="#{{obj2.Id}}" (click)="assignUnitTmpid(obj2.Id,blocknameforIteration)" data-toggle="tab">{{obj2.flatno==''?'Unit':obj2.flatno}}
                                            &nbsp;&nbsp;<span></span>
                                    <i [hidden]="obj2.isUnitCreated" class="fa fa-circle-thin" aria-hidden="true"></i>&nbsp;
                                    <i [hidden]="obj2.isUnitNotCreated" class="fa fa-check-circle-o" style="color: #41ca41" aria-hidden="true"></i>
                                        </a></li>
                                </ul>
                                <div [ngStyle]="{'display':obj1.Id==obj1.blockTmpid ? 'block' : 'none' }" class="tab-content">
                                    <div *ngFor="let obj3 of unitlistjson[blocknameforIteration];let i= index" [ngClass]="{'active':obj3.Id==obj3.unitTmpid}" class="tab-pane">
                                        <div id="{{obj3.Id}}">
                                            <div class="blockdetailsdata">
                                                <form class="blockdetails-form" style="margin-top: 30px;">
                                                   
                                                    <div class="col-sm-12" style="display: flex">
                                                        <div>
                                                            <mat-form-field class="blockdetails-form">
                                                                <mat-label>UNIT NO/FLAT NO<span class="red">*</span></mat-label>
                                                                <input disabled="{{obj3.isUnitCreated}}" class="text" matInput placeholder="UNIT NO/FLAT NO"
                                                                    (keyup)="getUnitName(unitlistjson[blocknameforIteration][i]['Id'],unitlistjson[blocknameforIteration][i]['flatno'],blocknameforIteration)"
                                                                    [(ngModel)]="obj3.flatno" [ngModelOptions]="{standalone:
                                                                                                           true}" value="">
                                                            </mat-form-field>
                                                            <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['isnotvalidflatno']">Valid unit no is required</p>
                                                            <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['flatno']==undefined">Valid unit no is required</p>
                                                
                                                        </div>
                                                
                                                        <div>
                                                            <mat-form-field class="blockdetails-form">
                                                                <mat-label>UNIT TYPE<span class="red">*</span></mat-label>
                                                                <mat-select (selectionChange)="getUnittype(unitlistjson[blocknameforIteration][i]['Id'],obj3.unittype,blocknameforIteration)" disabled="{{obj3.isUnitCreated}}" [(value)]="obj3.unittype">
                                                                    <mat-option *ngFor="let country of unittypedata" [value]="country">{{country}}
                                                                    </mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                            <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['unittype']==undefined">Valid Unit Type is required</p>
                                                        </div>
                                                
                                                        <div>
                                                            <mat-form-field class="blockdetails-form">
                                                                <mat-label>OCCUPANCY & OWNERSHIP STATUS<span class="red">*</span></mat-label>
                                                                <mat-select (selectionChange)="getOwnerShipStatus(unitlistjson[blocknameforIteration][i]['Id'],obj3.ownershipstatus,blocknameforIteration)" disabled="{{obj3.isUnitCreated}}" [(value)]="obj3.ownershipstatus">
                                                                    <mat-option *ngFor="let status of occupancy" [value]="status">{{status}}
                                                                    </mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                            <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']==undefined">Valid ownershipstatus is
                                                                required</p>
                                                        </div>
                                                    </div>
                                                   
                                                    <div class="col-sm-12" style="display: flex">
                                                        <div>
                                                            <mat-form-field class="blockdetails-form"
                                                                *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Vacant Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Owner Occupied Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                                                <mat-label>OWNER FIRST NAME<span class="red">*</span></mat-label>
                                                                <input disabled="{{obj3.isUnitCreated}}" class="text" matInput placeholder="OWNER FIRSTNAME" pattern="[a-zA-Z _]*"
                                                                    (keyup)="getownerfirstname(unitlistjson[blocknameforIteration][i]['Id'],unitlistjson[blocknameforIteration][i]['ownerfirstname'],blocknameforIteration)"
                                                                    [(ngModel)]="obj3.ownerfirstname"
                                                                    (keypress)=_keyPress2($event)
                                                                     [ngModelOptions]="{standalone:true}" value="">
                                                            </mat-form-field>
                                                            <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['isnotvalidownerfirstname']">Valid owner firstname is
                                                                required</p>
                                                            <p class="validation"
                                                                *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Vacant Unit' && unitlistjson[blocknameforIteration][i]['ownerfirstname']==undefined||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Vacant Unit' && unitlistjson[blocknameforIteration][i]['ownerfirstname']==undefined ||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['ownerfirstname']==undefined || unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Owner Occupied Unit' && unitlistjson[blocknameforIteration][i]['ownerfirstname']==undefined">
                                                                Valid owner firstname is required</p>
                                                        </div>
                                                        <div>
                                                            <mat-form-field class="blockdetails-form"
                                                                *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Vacant Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Owner Occupied Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                                                <mat-label>OWNER LAST NAME<span class="red">*</span></mat-label>
                                                                <input disabled="{{obj3.isUnitCreated}}" class="text" matInput placeholder="OWNER LASTNAME"
                                                                    (keyup)="getownerlastname(unitlistjson[blocknameforIteration][i]['Id'],unitlistjson[blocknameforIteration][i]['ownerlastname'],blocknameforIteration)"
                                                                    (keypress)=_keyPress2($event)
                                                                    pattern="[a-zA-Z _]*" [(ngModel)]="obj3.ownerlastname" [ngModelOptions]="{standalone:true}" value="">
                                                            </mat-form-field>
                                                            <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['isnotvalidownerlastname']">Valid owner lastname is
                                                                required</p>
                                                            <p class="validation"
                                                                *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Vacant Unit' && unitlistjson[blocknameforIteration][i]['ownerlastname']==undefined ||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['ownerlastname']==undefined || unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Owner Occupied Unit' && unitlistjson[blocknameforIteration][i]['ownerlastname']==undefined">
                                                                Valid owner lastname is required</p>
                                                        </div>
                                                
                                                        <div>
                                                            <mat-form-field class="blockdetails-form"
                                                                *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Vacant Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Owner Occupied Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                                                <mat-label>OWNER MOBILE NUMBER<span class="red">*</span></mat-label>
                                                                <input disabled="{{obj3.isUnitCreated}}" matInput placeholder="OWNER MOBILE NUMBER" pattern="[0-9]*"
                                                                    (keyup)="getownermobilenumber(unitlistjson[blocknameforIteration][i]['Id'],unitlistjson[blocknameforIteration][i]['ownermobilenumber'],blocknameforIteration)"
                                                                    minlength="10" maxlength="10" (keypress)=_keyPress($event) [ngModelOptions]="{standalone:true}"
                                                                    [(ngModel)]="obj3.ownermobilenumber" value="">
                                                            </mat-form-field>
                                                            <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['isnotvalidownermobilenumber']">Valid 10 digit mobile
                                                                number is required</p>
                                                            <p class="validation"
                                                                *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Vacant Unit' && unitlistjson[blocknameforIteration][i]['ownermobilenumber']==undefined ||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['ownermobilenumber']==undefined || unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Owner Occupied Unit' && unitlistjson[blocknameforIteration][i]['ownermobilenumber']==undefined">
                                                                Valid 10 digit mobile number is required</p>
                                                        </div>
                                                
                                                        <div>
                                                            <mat-form-field class="blockdetails-form"
                                                                *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Vacant Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Owner Occupied Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                                                <mat-label>OWNER EMAIL ID<span class="red">*</span></mat-label>
                                                                <input disabled="{{obj3.isUnitCreated}}" matInput placeholder="OWNER EMAIL-ID"
                                                                    (keyup)="getowneremaiid(unitlistjson[blocknameforIteration][i]['Id'],unitlistjson[blocknameforIteration][i]['owneremaiid'],blocknameforIteration)"
                                                                    pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" [(ngModel)]="obj3.owneremaiid"
                                                                    [ngModelOptions]="{standalone:true}" value="">
                                                            </mat-form-field>
                                                            <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['isnotvalidowneremaiid']">valid email-id is required</p>
                                                            <p class="validation"
                                                                *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Vacant Unit' && unitlistjson[blocknameforIteration][i]['owneremaiid']==undefined ||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['owneremaiid']==undefined || unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Owner Occupied Unit' && unitlistjson[blocknameforIteration][i]['owneremaiid']==undefined">
                                                                valid email-id is required</p>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-12" style="display: flex">
                                                    <div>
                                                        <mat-form-field class="blockdetails-form"
                                                            *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='UnSold Tenant Occupied Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                                            <mat-label>TENANT FIRST NAME<span class="red">*</span></mat-label>
                                                            <input disabled="{{obj3.isUnitCreated}}" class="text" matInput placeholder="TENANT FIRSTNAME" pattern="[a-zA-Z _]*"
                                                                [(ngModel)]="obj3.tenantfirstname"
                                                                (keypress)=_keyPress2($event)
                                                                (keyup)="gettenantfirstname(unitlistjson[blocknameforIteration][i]['Id'],unitlistjson[blocknameforIteration][i]['tenantfirstname'],blocknameforIteration)"
                                                                [ngModelOptions]="{standalone:true}" value="">
                                                        </mat-form-field>
                                                        <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['isnotvalidtenantfirstname']">Valid firstname is
                                                            required</p>
                                                        <p class="validation"
                                                            *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='UnSold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['tenantfirstname']==undefined||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['tenantfirstname']==undefined">
                                                            Valid firstname is
                                                            required</p>
                                                    </div>
                                                    <div>
                                                        <mat-form-field class="blockdetails-form"
                                                            *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='UnSold Tenant Occupied Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                                            <mat-label>TENANT LAST NAME<span class="red">*</span></mat-label>
                                                            <input disabled="{{obj3.isUnitCreated}}" class="text" matInput placeholder="TENANT LASTNAME" pattern="[a-zA-Z _]*"
                                                                (keyup)="gettenantlastname(unitlistjson[blocknameforIteration][i]['Id'],unitlistjson[blocknameforIteration][i]['tenantlastname'],blocknameforIteration)"
                                                                [(ngModel)]="obj3.tenantlastname" 
                                                                (keypress)=_keyPress2($event)
                                                                [ngModelOptions]="{standalone:true}" value="">
                                                        </mat-form-field>
                                                        <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['isnotvalidtenantlastname']"> Valid lastname is required
                                                        </p>
                                                        <p class="validation"
                                                            *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='UnSold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['tenantlastname']==undefined||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['tenantlastname']==undefined">
                                                            Valid lastname is
                                                            required</p>
                                                    </div>
                                                    <div>
                                                        <mat-form-field class="blockdetails-form"
                                                            *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='UnSold Tenant Occupied Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                                            <mat-label>TENANT MOBILE NUMBER<span class="red">*</span></mat-label>
                                                            <input disabled="{{obj3.isUnitCreated}}" matInput placeholder="TENANT MOBILE NUMBER" pattern="[0-9]*" minlength="10" maxlength="10"
                                                                (keypress)=_keyPress($event)
                                                                (keyup)="gettenantmobilenumber(unitlistjson[blocknameforIteration][i]['Id'],unitlistjson[blocknameforIteration][i]['tenantmobilenumber'],blocknameforIteration)"
                                                                [(ngModel)]="obj3.tenantmobilenumber" [ngModelOptions]="{standalone:true}" value="">
                                                        </mat-form-field>
                                                        <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['isnotvalidtenantmobilenumber']">Valid mobile number is
                                                            required</p>
                                                        <p class="validation"
                                                            *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='UnSold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['tenantmobilenumber']==undefined||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['tenantmobilenumber']==undefined">
                                                            Valid mobile number is
                                                            required</p>
                                                    </div>
                                                    <div>
                                                        <mat-form-field class="blockdetails-form"
                                                            *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='UnSold Tenant Occupied Unit'||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                                            <mat-label>TENANT EMAIL ID<span class="red">*</span></mat-label>
                                                            <input disabled="{{obj3.isUnitCreated}}" matInput placeholder="TENANT EMAIL-ID" pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
                                                                (keyup)="gettenantemaiid(unitlistjson[blocknameforIteration][i]['Id'],unitlistjson[blocknameforIteration][i]['tenantemaiid'],blocknameforIteration)"
                                                                [(ngModel)]="obj3.tenantemaiid" [ngModelOptions]="{standalone:true}" value="">
                                                        </mat-form-field>
                                                        <p class="validation" *ngIf="unitlistjson[blocknameforIteration][i]['isnotvalidtenantemaiid']"> Valid email-id is required
                                                        </p>
                                                        <p class="validation"
                                                            *ngIf="unitlistjson[blocknameforIteration][i]['ownershipstatus']=='UnSold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['tenantemaiid']==undefined||unitlistjson[blocknameforIteration][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[blocknameforIteration][i]['tenantemaiid']==undefined">
                                                            Valid email-id is required</p>
                                                    </div>
                                            
                                                </div>
                                                </form>
                                            </div>
                                           
                                            <div>
                                                <button id="unitssubmit" mat-raised-button color="primary" disabled={{obj3.isSingleUnitDataEmpty}}
                                                    (click)="gotonexttab($event,blocknameforIteration,obj3.Id,i)">{{obj3.displayText}}</button>
                                            </div>
                                            <div class="save">
                                                <a class="continue" (click)="resetStep5($event,blocknameforIteration,obj3.Id)" mat-raised-button color="primary">RESET</a>
                                            </div>
    
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div> 
                
                <!--test-->
            



<!-- test code for units -->


  <!-- test unit code -->

               </div> 
               <div id="unitsbulkold" style="display: none">
                <mat-tab-group class="mainpage" [(selectedIndex)]="demo2TabIndex"> 
                    <div class="blockdetailsdata" *ngFor="let item of finalblocknameTmp;let i=index">
                       <mat-tab  class = "text"[label]="item.name">
                        <div *ngIf="duplicateUnitrecordexist"><p style="color: red;font-size: 30px;text-transform: uppercase;">Duplicate Unitname exist please enter unique unitname</p></div>
                           <div class="blockdetailsdata" *ngFor="let obj of unitlistjson[item.name];let i= index">
                            <form class="blockdetails-form1" style="margin-top: 30px;">
                               <div>
                                   <mat-form-field class="blockdetails-form1">
                                       <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">UNIT NO/FLAT NO<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                                       <input disabled="{{obj['hasNoDuplicateUnitname']==true}}" class = "text" matInput placeholder="UNIT NO/FLAT NO"
                                        (keyup)="getUnitName(unitlistjson[item.name][i]['Id'],unitlistjson[item.name][i]['flatno'],item.name)"[(ngModel)]="obj.flatno"[ngModelOptions]="{standalone:
                                           true}"  value="">
                                   </mat-form-field>
                                   <p class="validation" *ngIf="unitlistjson[item.name][i]['isnotvalidflatno']">Valid unit no is required</p>
                                   <p class="validation" *ngIf="unitlistjson[item.name][i]['flatno']==undefined">Valid unit no is required</p>
   
                                </div>
   
                                  <div>
                                   <mat-form-field class="blockdetails-form1">
                                    <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">UNIT TYPE<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                                       <mat-select (selectionChange)="getUnittype(unitlistjson[blocknameforIteration][i]['Id'],obj.unittype,blocknameforIteration)" disabled="{{obj['hasNoDuplicateUnitname']==true}}" [(value)]="obj.unittype">
                                           <mat-option *ngFor="let country of unittypedata" [value]="country">{{country}}
                                           </mat-option>
                                       </mat-select>
                                   </mat-form-field>
                                   <p class="validation" *ngIf="unitlistjson[item.name][i]['unittype']==undefined">Valid Unit Type is required</p>
                                  </div>
   
                                <div>
                                   <mat-form-field class="blockdetails-form1">
                                    <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">OCCUPANCY & OWNERSHIP STATUS<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                                       <mat-select (selectionChange)="getOwnerShipStatus(unitlistjson[blocknameforIteration][i]['Id'],obj.ownershipstatus,blocknameforIteration)" disabled="{{obj['hasNoDuplicateUnitname']==true}}" [(value)]="obj.ownershipstatus">
                                           <mat-option *ngFor="let status of occupancy" [value]="status">{{status}}
                                           </mat-option>
                                       </mat-select>
                                   </mat-form-field>
                                   <p class="validation" *ngIf="unitlistjson[item.name][i]['ownershipstatus']==undefined">Valid ownershipstatus is required</p>
                               </div>
                            
                            <div>
                               <mat-form-field class="blockdetails-form1" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='Sold Vacant Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Owner Occupied Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                   <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">OWNER FIRST NAME<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                                   <input disabled="{{obj['hasNoDuplicateUnitname']==true}}" class = "text" matInput placeholder="OWNER FIRSTNAME" 
                                   pattern="[a-zA-Z _]*"
                                   (keypress)=_keyPress2($event)           
                                   (keyup)="getownerfirstname(unitlistjson[item.name][i]['Id'],unitlistjson[item.name][i]['ownerfirstname'],item.name)"
                                   [(ngModel)]="obj.ownerfirstname"[ngModelOptions]="{standalone:
                                       true}" value="">
                               </mat-form-field> 
                               <p class="validation" *ngIf="unitlistjson[item.name][i]['isnotvalidownerfirstname']">Valid owner firstname is required</p>
                               <p class="validation" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='Sold Vacant Unit' && unitlistjson[item.name][i]['ownerfirstname']==undefined||unitlistjson[item.name][i]['ownershipstatus']=='Sold Vacant Unit' && unitlistjson[item.name][i]['ownerfirstname']==undefined ||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[item.name][i]['ownerfirstname']==undefined || unitlistjson[item.name][i]['ownershipstatus']=='Sold Owner Occupied Unit' && unitlistjson[item.name][i]['ownerfirstname']==undefined">Valid owner firstname is required</p>
                            </div>
                                   <div>
                                       <mat-form-field class="blockdetails-form1" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='Sold Vacant Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Owner Occupied Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                           <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">OWNER LAST NAME<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                                           <input disabled="{{obj['hasNoDuplicateUnitname']==true}}" class = "text" matInput placeholder="OWNER LASTNAME" 
                                           (keyup)="getownerlastname(unitlistjson[item.name][i]['Id'],unitlistjson[item.name][i]['ownerlastname'],item.name)"
                                           pattern="[a-zA-Z _]*"
                                           (keypress)=_keyPress2($event)           
                                           [(ngModel)]="obj.ownerlastname"
                                           [ngModelOptions]="{standalone:true}" value="">
                                       </mat-form-field>
                               <p class="validation" *ngIf="unitlistjson[item.name][i]['isnotvalidownerlastname']">Valid owner lastname is required</p>
                               <p class="validation" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='Sold Vacant Unit' && unitlistjson[item.name][i]['ownerlastname']==undefined ||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[item.name][i]['ownerlastname']==undefined || unitlistjson[item.name][i]['ownershipstatus']=='Sold Owner Occupied Unit' && unitlistjson[item.name][i]['ownerlastname']==undefined">Valid owner lastname is required</p> 
                                   </div>
                           
                          <div>
                           <mat-form-field class="blockdetails-form1" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='Sold Vacant Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Owner Occupied Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                               <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">OWNER MOBILE NUMBER<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                               <input disabled="{{obj['hasNoDuplicateUnitname']==true}}" matInput placeholder="OWNER MOBILE NUMBER"
                               pattern="[0-9]*" 
                               (keyup)="getownermobilenumber(unitlistjson[item.name][i]['Id'],unitlistjson[item.name][i]['ownermobilenumber'],item.name)"
                               minlength="10" maxlength="10"
                               (keypress)=_keyPress($event)
                               [ngModelOptions]="{standalone:true}"
                                   [(ngModel)]="obj.ownermobilenumber" value="">
                           </mat-form-field>
                           <p class="validation" *ngIf="unitlistjson[item.name][i]['isnotvalidownermobilenumber']">Valid 10 digit mobile number is required</p>
                           <p class="validation" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='Sold Vacant Unit' && unitlistjson[item.name][i]['ownermobilenumber']==undefined ||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[item.name][i]['ownermobilenumber']==undefined || unitlistjson[item.name][i]['ownershipstatus']=='Sold Owner Occupied Unit' && unitlistjson[item.name][i]['ownermobilenumber']==undefined">Valid 10 digit mobile number is required</p> 
                          </div>
                                 
                     <div>
                       <mat-form-field class="blockdetails-form1"*ngIf="unitlistjson[item.name][i]['ownershipstatus']=='Sold Vacant Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Owner Occupied Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                           <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">OWNER EMAIL ID<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                           <input disabled="{{obj['hasNoDuplicateUnitname']==true}}" matInput placeholder="OWNER EMAIL-ID"
                           (keyup)="getowneremaiid(unitlistjson[item.name][i]['Id'],unitlistjson[item.name][i]['owneremaiid'],item.name)"
                           pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
                           [(ngModel)]="obj.owneremaiid"[ngModelOptions]="{standalone:true}"value="">
                       </mat-form-field>
                       <p class="validation" *ngIf="unitlistjson[item.name][i]['isnotvalidowneremaiid']">valid email-id is required</p>
                       <p class="validation" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='Sold Vacant Unit' && unitlistjson[item.name][i]['owneremaiid']==undefined ||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[item.name][i]['owneremaiid']==undefined || unitlistjson[item.name][i]['ownershipstatus']=='Sold Owner Occupied Unit' && unitlistjson[item.name][i]['owneremaiid']==undefined">valid email-id is required</p> 
                     </div>
   
                           <div>
                               <mat-form-field class="blockdetails-form1"*ngIf="unitlistjson[item.name][i]['ownershipstatus']=='UnSold Tenant Occupied Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                   <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">TENANT FIRST NAME<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                                   <input disabled="{{obj['hasNoDuplicateUnitname']==true}}" class="text" matInput placeholder="TENANT FIRSTNAME" 
                                   pattern="[a-zA-Z _]*"
                                   (keypress)=_keyPress2($event)  
                                   [(ngModel)]="obj.tenantfirstname"
                           (keyup)="gettenantfirstname(unitlistjson[item.name][i]['Id'],unitlistjson[item.name][i]['tenantfirstname'],item.name)"
                                       [ngModelOptions]="{standalone:true}" value="">
                               </mat-form-field>
                               <p class="validation" *ngIf="unitlistjson[item.name][i]['isnotvalidtenantfirstname']">Valid firstname is
                                   required</p>
                                   <p class="validation" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='UnSold Tenant Occupied Unit' && unitlistjson[item.name][i]['tenantfirstname']==undefined||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[item.name][i]['tenantfirstname']==undefined">Valid firstname is
                                       required</p>
                           </div>           
                           <div>
                               <mat-form-field class="blockdetails-form1"*ngIf="unitlistjson[item.name][i]['ownershipstatus']=='UnSold Tenant Occupied Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                   <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">TENANT LAST NAME<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                                   <input disabled="{{obj['hasNoDuplicateUnitname']==true}}" class = "text" matInput placeholder="TENANT LASTNAME" 
                                   pattern="[a-zA-Z _]*"
                                   (keypress)=_keyPress2($event)  
                                   (keyup)="gettenantlastname(unitlistjson[item.name][i]['Id'],unitlistjson[item.name][i]['tenantlastname'],item.name)"
                                   [(ngModel)]="obj.tenantlastname"
                                   [ngModelOptions]="{standalone:true}" value="">
                               </mat-form-field>
                               <p class="validation" *ngIf="unitlistjson[item.name][i]['isnotvalidtenantlastname']"> Valid lastname is required</p>
                                <p class="validation" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='UnSold Tenant Occupied Unit' && unitlistjson[item.name][i]['tenantlastname']==undefined||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[item.name][i]['tenantlastname']==undefined">Valid lastname is
                                   required</p> 
                           </div>
                            <div>
                               <mat-form-field class="blockdetails-form1"
                                   *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='UnSold Tenant Occupied Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                   <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">TENANT MOBILE NUMBER<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                                   <input disabled="{{obj['hasNoDuplicateUnitname']==true}}" matInput placeholder="TENANT MOBILE NUMBER" 
                                   pattern="[0-9]*"
                                   minlength="10" maxlength="10"
                                   (keypress)=_keyPress($event)
                           (keyup)="gettenantmobilenumber(unitlistjson[item.name][i]['Id'],unitlistjson[item.name][i]['tenantmobilenumber'],item.name)"
                                   [(ngModel)]="obj.tenantmobilenumber"
                                   [ngModelOptions]="{standalone:true}" value="">
                               </mat-form-field>
                               <p class="validation" *ngIf="unitlistjson[item.name][i]['isnotvalidtenantmobilenumber']">Valid mobile number is
                                   required</p>
                               <p class="validation" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='UnSold Tenant Occupied Unit' && unitlistjson[item.name][i]['tenantmobilenumber']==undefined||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[item.name][i]['tenantmobilenumber']==undefined">Valid mobile number is
                                       required</p> 
                           </div>  
                             <div>
                                   <mat-form-field  class="blockdetails-form1"*ngIf="unitlistjson[item.name][i]['ownershipstatus']=='UnSold Tenant Occupied Unit'||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit'">
                                       <mat-label [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">TENANT EMAIL ID<span [ngClass]="{'green-lbl':obj['hasNoDuplicateUnitname']==true,'red-lbl':obj['hasNoDuplicateUnitname']==false}">*</span></mat-label>
                                       <input disabled="{{obj['hasNoDuplicateUnitname']==true}}" matInput placeholder="TENANT EMAIL-ID" 
                                       pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
                           (keyup)="gettenantemaiid(unitlistjson[item.name][i]['Id'],unitlistjson[item.name][i]['tenantemaiid'],item.name)"
                                       [(ngModel)]="obj.tenantemaiid"
                                       [ngModelOptions]="{standalone:true}" value="">
                                   </mat-form-field>
                               <p class="validation" *ngIf="unitlistjson[item.name][i]['isnotvalidtenantemaiid']"> Valid email-id is required</p>
                               <p class="validation" *ngIf="unitlistjson[item.name][i]['ownershipstatus']=='UnSold Tenant Occupied Unit' && unitlistjson[item.name][i]['tenantemaiid']==undefined||unitlistjson[item.name][i]['ownershipstatus']=='Sold Tenant Occupied Unit' && unitlistjson[item.name][i]['tenantemaiid']==undefined">Valid email-id is required</p> 
                               </div>
                               
                              
                               </form>
                           </div>
                           <div>
                           <!-- <button style="position: fixed;top: 55%;right: 2%;"  id="unitbulkbutton" mat-raised-button color="primary" (click)="submitforbulkupload($event)">Bulk Upload</button>  -->
                           <!-- <button style="margin-top:12px;float: right;" id="button2" mat-raised-button color="primary" (click)="submitforbulkupload($event)">Bulk Upload</button> -->
   
                           </div>
                           <div>
                               <button id="unitssubmit" mat-raised-button color="primary" disabled={{!isunitdetailsempty}} (click)="gotonexttab1($event,item.name,i)">{{item.displaytext}}</button>
                           </div>
                           <div class="save">
                               <a class="continue" (click)="resetStep5bulk($event,item.name)"mat-raised-button color="primary">RESET</a>
                           </div>    
                        
                       </mat-tab>
                    
                   </div> 
   
               
                </mat-tab-group> 
               </div>
        </mat-tab>
        <mat-tab  [disabled]='!tab.isActive' label="SUBSCRIPTION">

        </mat-tab>
        <mat-tab  [disabled]='!tab.isActive' label="PAYMENT">

        </mat-tab>
    </div>
</mat-tab-group>
<ng-template #UploadedImagetemplate>
    <div class="modal-content">
  
      <div class="modal-header">
        
        <h4 class="modal-title">{{UploadedImage}}</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <img style="width: 100%;" src="{{ImgForPopUp}}"/>
      </div>
    </div>
  </ng-template>

<ng-template #UpdateBlockUnitCountTemplate>
    <div class="modal-content">

        <div class="modal-header">

            <h4 class="modal-title">Uploaded no of units is more than given no of units for particualar Block,Please
                update units count</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="blockunitcountmodalRef.hide()">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <p>Add Block Count:</p>
           <div>CurrentBlockCount:<i (click)="reduceBlockCount()" class="fa fa-minus-square" aria-hidden="true"></i>&nbsp;&nbsp;<i (click)="increaseBlockCount()" class="fa fa-plus-square" aria-hidden="true"></i>
           </div> 
            <p>Add Unit Count:</p>
            <div>CurrentUnitCount:<i (click)="reduceUnitCount()" class="fa fa-minus-square" aria-hidden="true"></i>&nbsp;&nbsp;<i (click)="increaseUnitCount()" class="fa fa-plus-square" aria-hidden="true"></i>
            </div>
            <div>
                <button (click)="UpdateBlockUnitCount()">UpdateCount</button>
            </div>
        </div>
    </div>
</ng-template>
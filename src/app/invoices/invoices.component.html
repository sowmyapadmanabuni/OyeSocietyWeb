<!--/*/*/*/*/* ADMIN INVOICE START /*/*/*/*/*-->
<div *ngIf="globalservice.mrmroleId == 1 && localMrmRoleId != '2'" class="container-fluid np">
    <div class="col-sm-12 mt-80">
        <!--Profile section-->
        <app-left-bar></app-left-bar>
        <!--Profile section-->
        <div class="col-xs-12 col-sm-12 col-md-11 b-l">
            <!--Dashboard icons start-->
            <div class="col-md-12 m-t-30 dash">
               <div class="enr-bt">
                    <div style="display: flex;">
                            <span class="black">Invoices for  </span>
                                <div class="dropdown" style="width: 200px;margin-left: 10px; margin-top: -7px;">
                                    <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                                        data-toggle="dropdown">{{(viewinvoiceservice.invoiceBlock == ''?'Select Block':viewinvoiceservice.invoiceBlock)}}
                                        <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                                    <ul class="dropdown-menu fullw">
                                        <li *ngFor='let item of allBlocksByAssnID'
                                            (click)="getCurrentBlockDetails(item['blBlockID'],item['blBlkName'])">
                                            <a>{{item['blBlkName']}}</a></li>
                                    </ul>
                                </div> 
                                <span class="black">Of Unit  </span> 
                                <div [ngClass]="{'dropdown open':viewinvoiceservice.invoiceBlock == '','dropdown':viewinvoiceservice.invoiceBlock != ''}" style="width: 200px;margin-left: 10px; margin-top: -7px;">
                                    <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                                        data-toggle="dropdown">{{(UnitName == ''?'Select Unit':UnitName)}}
                                        <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                                    <ul *ngIf="toggleUL" class="dropdown-menu fullw" style="height: 200px">
                                        <li *ngFor='let item of allUnitBYBlockID'
                                            (click)="getCurrentUnitDetails(item['unUnitID'],item['unUniName'])">
                                            <a>{{item['unUniName']}}</a></li>
                                    </ul>
                                </div>  
                                <!-- <a class="excel" (click)="NavigateToBulkUpload()" tooltip="Have more num of Receipts?"(click)="NavigateToBulkUpload()">Bulk Receipt Upload</a>                -->
                    </div>
                    <div class="switch">
                            <ul class="nav nav-pills">
                                <li><a (click)="goToExpense()">Expenses</a></li>
                                <li class="active"><a (click)="goToInvoice()">Invoice</a></li>
                                <li><a (click)="goToReceipts()">Receipts</a></li>
                            </ul>
                    </div>
               </div>



                

                
                <div style="display: flex;justify-content: flex-end;align-items: baseline;">
                    <!-- <label class="purple">Paid&nbsp;&nbsp;</label> -->
                    <!-- <input type="checkbox" [(ngModel)]="IsPaid" (change)='GetPaidInvoiceList(IsPaid)' name="IsPaid"> -->
                </div>
                <!-- Toggler switch-->
                <div class="switch">
                    <ul class="nav1 nav-pills1">
                        <li [ngClass]="{'active' : toggle == 'All'}"><a (click)="GetPaidInvoiceList('id','All')">All</a></li>
                            <li [ngClass]="{'active' : toggle == 'toggleYes'}"><a (click)="GetPaidInvoiceList(true,'toggleYes')">Paid</a></li>
                            <li [ngClass]="{'active' : toggle == 'toggleNo'}"><a (click)="GetPaidInvoiceList(false,'toggleNo')">Unpaid</a></li>
                        </ul>
                </div>
                <!-- Toggler switch-->
                <!-- <div>
                    <input type="text" [(ngModel)]="searchTxt" class="form-control" name="searchTxt" placeholder="Search Name">
                </div> -->
                <div class="enroll" style="background: #f8f8f8;padding:10px;">
                    <div class="sea"><input type="text" [(ngModel)]="searchTxt" id="mySearch" name="searchTxt" placeholder="Search Name">
                    </div>
                    <div class="del-date cal"><input type="text" name="InvoiceStartDate" #InvoiceStartDateControl='ngModel' [(ngModel)]="InvoiceStartDate" placeholder="From Date" class="date" bsDatepicker [bsConfig]="bsConfig"></div>
                    <div class="del-date cal"><input type="text" (bsValueChange)="getInvoiceListByDateRange($event)" name="InvoiceEndDate" #InvoiceEndDateControl='ngModel'  [(ngModel)]="InvoiceEndDate" placeholder="To Date" class="date" bsDatepicker [bsConfig]="bsConfig"></div>
                </div>

<div class="inv-align">
    <div class="dropdown" style="width: 200px;">
        <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
            data-toggle="dropdown">{{(ShowRecords=='Show Records'?ShowRecords:setnoofrows)}}
            <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
        <ul class="dropdown-menu fullw">
            <li *ngFor='let rows of rowsToDisplay' (click)="setRows(rows['Row'])">
                <a>{{rows['Display']}}</a></li>
        </ul>
    </div>
    <a class="excel" (click)="NavigateToBulkUpload()" tooltip="Have more num of Receipts?"(click)="NavigateToBulkUpload()">Bulk Receipt Upload</a> 
</div>

                    
                
                
                <div class="dash-row" style="overflow-y: scroll;">
                    <table class="table table-bordered"
                        [mfData]="PaidUnpaidinvoiceLists | search:['unUnitID', 'inNumber', 'inGenDate','inTotVal']:searchTxt"
                        #mf="mfDataTable" (click)="onPageChange($event)" [mfRowsOnPage]="setnoofrows">
                        <thead>
                            <tr>
                                <th>
                                    S.No.
                                </th>
                                <!-- <th>
                                    <mfDefaultSorter by="unUnitID">Unit ID</mfDefaultSorter>
                                </th> -->
                                <th>
                                    <mfDefaultSorter (click)="removeColumnSort('InvoiceNumber')" by="inNumber">Invoice Number&nbsp;<i [hidden]="columnName=='InvoiceNumber'" class="fa fa-sort"></i></mfDefaultSorter>
                                </th>
                                <th>
                                    <mfDefaultSorter (click)="removeColumnSort('InvoiceDate')" by="inGenDate">Invoice Date&nbsp;<i [hidden]="columnName=='InvoiceDate'" class="fa fa-sort"></i></mfDefaultSorter>
                                </th>
                                <th>
                                    <mfDefaultSorter (click)="removeColumnSort('Amount')" by="inTotVal">Amount&nbsp;<i [hidden]="columnName=='Amount'" class="fa fa-sort"></i></mfDefaultSorter>
                                </th>
                                <th style="width: 400px;">
                                    Action
                                </th>
                                <th *ngIf="toggle == 'toggleNo'">
                                    <input type="checkbox" (change)='toggleAllCheck($event)'>&nbsp;
                                    <i *ngIf="isChecked" style="cursor:pointer" (click)="sendEmailToAll()"
                                        class="fa fa-paper-plane"></i>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of mf.data;let i=index">
                                <ng-container *ngIf="item == -1">
                                    <td colspan="6" align="center">No Data Found</td>
                                </ng-container>
                                <ng-container *ngIf="item!=-1">
                                    <td class="txt-middle">{{ (10 * (p - 1) + i)+1 }}</td>
                                    <!-- <td style="cursor: pointer;" (click)="viewInvoice1($event,invoicePop,item.inid,item.inGenDate,item.inNumber,item.inDsCVal,item.unUnitID)">{{item['unUnitID']}}</td> -->
                                    <td class="txt-middle" style="cursor: pointer;" (click)="viewInvoice1($event,invoicePop,item.inid,item.inGenDate,item.inNumber,item.inDsCVal,item.unUnitID)">{{item['inNumber']}}</td>
                                    <td style="cursor: pointer;" class="amount" (click)="viewInvoice1($event,invoicePop,item.inid,item.inGenDate,item.inNumber,item.inDsCVal,item.unUnitID)">{{item['inGenDate'] | date:"dd-MM-yyyy"}}</td>
                                    <td style="cursor: pointer;" class="amount" (click)="viewInvoice1($event,invoicePop,item.inid,item.inGenDate,item.inNumber,item.inDsCVal,item.unUnitID)">
                                        <i class="fa fa-inr"></i> {{item['inTotVal']}}.00
                                    </td>
                                    <td class="amount">
                                        <span *ngIf="item['inPaid'] == 'No'">
                                               <a tooltip="View Invoice" (click)="viewInvoice1($event,invoicePop,item.inid,item.inGenDate,item.inNumber,item.inDsCVal,item.unUnitID)" style="cursor: pointer; font-size: 12px;">View Invoice</a> | 
                                               <a tooltip="Mail Invoice" (click)="sendInvoiceInMail(item.inid,item.unUnitID,item.ineSent,item.blBlockID)" style="cursor: pointer; font-size: 12px;">Send Reminder </a> | 
                                               <a tooltip="Discounts" (click)="discount(discountModal,item.inid,item.inNumber,item.inTotVal)" style="cursor: pointer; font-size: 12px;">Adjustments</a> | 
                                               <a (click)="OpenReceiptModal(Receipts,item['inNumber'],item['inTotVal'],item['inAmtPaid'],item['unUnitID'])" tooltip="Generate Receipt" style="cursor: pointer; font-size: 12px;">Generate Receipt</a>
                                        </span> 
                                        <!-- <span *ngIf="item['inPaid'] == 'No'">
                                           | <button tooltip="View Invoice" class="smallBtn"
                                            (click)="viewInvoice1($event,invoicePop,item.inid,item.inGenDate,item.inNumber,item.inDsCVal,item.unUnitID)">
                                               <a style="cursor: pointer; font-size: 12px;">View Invoice </a>
                                            </button> |
                                            <a (click)="OpenReceiptModal(Receipts,item['inNumber'],item['inTotVal'],item['inAmtPaid'],item['unUnitID'])" tooltip="Generate Receipt" style="cursor: pointer; font-size: 12px;">Generate Receipt</a>
                                        </span> -->
                                        <!-- <span *ngIf="item['inPaid'] == 'No'">
                                            |
                                            <svg height="15" width="20" class="blinking">
                                                <circle cx="10" cy="10" r="5" fill="orange" />
                                                Sorry, your browser does not support inline SVG.  
                                              </svg> <a (click)="payThroughICICIPGtest($event,item.inid,item.unUnitID)" tooltip="Pay now" style="cursor: pointer; font-size: 12px;">Pay now</a>
                                        </span> -->
                                        <span *ngIf="item['inPaid'] == 'Yes'">
                                            <button tooltip="View Invoice" class="smallBtn"
                                            (click)="viewInvoice1($event,invoicePop,item.inid,item.inGenDate,item.inNumber,item.inDsCVal,item.unUnitID)">
                                               <a style="cursor: pointer; font-size: 12px;">View Invoice </a>
                                            </button> |
                                            <!-- <i (click)="OpenViewReceiptModal(ViewReceiptTemplate)" tooltip="View Receipt" style="cursor: pointer;" class="fa fa-newspaper-o"></i> -->
                                            <a (click)="OpenViewReceiptModal(ViewReceiptTemplate)" tooltip="View Receipt" style="cursor: pointer; font-size: 12px;">View Receipt</a>
                                        </span>
                                    </td>
                                    <td *ngIf="toggle == 'toggleNo'">
                                        <input class="chkBox" type="checkbox" [value]="item.inid" [checked]='checkAll'
                                            (change)='toggleIsChecked($event)'>
                                    </td>
                                </ng-container>
                            </tr>
                            <tr *ngIf="PaidUnpaidinvoiceLists.length == 0">
                                <ng-container>
                                    <td colspan="6" align="center">No Data Found</td>
                                </ng-container>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr *ngIf="toggle == 'toggleYes'">
                                <td colspan="7">
                                    <mfBootstrapPaginator></mfBootstrapPaginator>
                                </td>
                            </tr>
                            <tr *ngIf="toggle == 'toggleNo'">
                                <td colspan="6">
                                    <mfBootstrapPaginator></mfBootstrapPaginator>
                                </td>
                            </tr>
                            <tr *ngIf="toggle == 'All'">
                                <td colspan="7">
                                    <mfBootstrapPaginator></mfBootstrapPaginator>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="t-right"><a (click)="convert()">Generate PDF</a></div>
            </div>
            <!--Dashboard icons end-->

        </div>

    </div>
    <!--rightBar start-->
    <!-- <app-right-bar></app-right-bar> -->
    <!--rightBar end-->
</div>
<!--/*/*/*/*/* ADMIN INVOICE END /*/*/*/*/*-->










<!--/*/*/*/*/* RESIDENT INVOICE START /*/*/*/*/*-->
<div *ngIf="globalservice.mrmroleId != 1 || localMrmRoleId == '2'" class="container-fluid np">
    <div class="col-sm-12 mt-80">
        <!--Profile section-->
        <app-left-bar></app-left-bar>
        <!--Profile section-->
        <div class="col-xs-12 col-sm-12 col-md-11 b-l">
            <!--Dashboard icons start-->
            <div class="col-md-12 m-t-30 dash">
                <div class="enr-bt">
                   
                        <div>
                                <span class="black">Invoices for unit {{globalservice.getCurrentUnitName()}}  </span> 
                        </div>
                        <div class="switch">
                                <ul class="nav nav-pills" style="width: 214px;">
                                    <li class="active"><a (click)="goToInvoice()">Invoice</a></li>
                                    <li><a (click)="goToResidentReceipts()">Receipts</a></li>
                                </ul>
                        </div> 
                    
                                      
                </div>







                

                
                <div style="display: flex;justify-content: flex-end;align-items: baseline;">
                    <!-- <label class="purple">Paid&nbsp;&nbsp;</label> -->
                    <!-- <input type="checkbox" [(ngModel)]="IsPaid" (change)='GetPaidInvoiceList(IsPaid)' name="IsPaid"> -->
                </div>
                <!-- Toggler switch-->
                <div class="switch">
                    <ul class="nav1 nav-pills1">
                        <li [ngClass]="{'active' : toggle == 'All'}"><a (click)="GetPaidInvoiceListResident('id','All')">All</a></li>
                            <li [ngClass]="{'active' : toggle == 'toggleYes'}"><a (click)="GetPaidInvoiceListResident(true,'toggleYes')">Paid</a></li>
                            <li [ngClass]="{'active' : toggle == 'toggleNo'}"><a (click)="GetPaidInvoiceListResident(false,'toggleNo')">Unpaid</a></li>
                        </ul>
                </div>
                <!-- Toggler switch-->
                <div>
                    <input type="text" [(ngModel)]="searchTxt" class="form-control" name="searchTxt" placeholder="Search by invoice number">
                </div>
                <div class="dropdown" style="width: 200px;">
                    <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                        data-toggle="dropdown">{{(ShowRecords=='Show Records'?ShowRecords:setnoofrows)}}
                        <i aria-hidden="true" class="fa fa-angle-down fa-1x"></i></button>
                    <ul class="dropdown-menu fullw">
                        <li *ngFor='let rows of rowsToDisplay' (click)="setResidentRows(rows['Row'])">
                            <a>{{rows['Display']}}</a></li>
                    </ul>
                </div>
                <div class="dash-row" style="overflow-y: scroll;">
                    <table class="table table-bordered"
                        [mfData]="PaidUnpaidinvoiceLists | search:['unUnitID', 'inNumber', 'inGenDate','inTotVal']:searchTxt"
                        #mf="mfDataTable" (click)="onPageChange($event)" [mfRowsOnPage]="setnoofrows">
                        <thead>
                            <tr>
                                <th>S.No.</th>
                                <th><mfDefaultSorter (click)="removeColumnSort('UnitID')" by="unUnitID">Unit ID&nbsp;<i [hidden]="columnName=='UnitID'" class="fa fa-sort"></i></mfDefaultSorter></th>
                                <th><mfDefaultSorter (click)="removeColumnSort('InvoiceNumber')" by="inNumber">Invoice Number&nbsp;<i [hidden]="columnName=='InvoiceNumber'" class="fa fa-sort"></i></mfDefaultSorter></th>
                                <th><mfDefaultSorter (click)="removeColumnSort('InvoiceDate')" by="inGenDate">Invoice Date&nbsp;<i [hidden]="columnName=='InvoiceDate'" class="fa fa-sort"></i></mfDefaultSorter></th>
                                <th><mfDefaultSorter (click)="removeColumnSort('Amount')" by="inTotVal">Amount&nbsp;<i [hidden]="columnName=='Amount'" class="fa fa-sort"></i></mfDefaultSorter></th>
                                <th>Action</th>
                                <th *ngIf="toggle == 'toggleNo'">
                                    <input type="checkbox" (change)='toggleAllCheck($event)'>&nbsp;
                                    <i *ngIf="isChecked" style="cursor:pointer" (click)="sendEmailToAll()"
                                        class="fa fa-paper-plane"></i>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of mf.data;let i=index">
                                <ng-container *ngIf="item == -1">
                                    <td colspan="6" align="center">No Data Found</td>
                                </ng-container>
                                <ng-container *ngIf="item!=-1">
                                    <td>{{ (10 * (p - 1) + i)+1 }}</td>
                                    <td>{{item['unUnitID']}}</td>
                                    <td>{{item['inNumber']}}</td>
                                    <td>{{item['inGenDate'] | date:"dd-MM-yyyy"}}</td>
                                    <td class="amount">
                                        <i class="fa fa-inr"></i> {{item['inTotVal']}}.00
                                    </td>
                                    <td>
                                        <span>
                                            <!-- <button tooltip="Mail Invoice" [disabled]='item.ineSent' class="smallBtn"
                                                (click)="sendInvoiceInMail(item.inid,item.unUnitID,item.ineSent,item.blBlockID)">
                                                <i class="fa fa-paper-plane"></i>
                                            </button> -->
                                            
                                             <a (click)="viewInvoice1($event,invoicePop,item.inid,item.inGenDate,item.inNumber,item.inDsCVal,item.unUnitID)" tooltip="View Invoice" >View Invoice</a>
                                        <!--     |
                                            <i tooltip="View Discount"
                                                (click)="discount(discountModal,item.inid,item.inNumber,item.inTotVal)"
                                                style="cursor: pointer;" class="fa fa-percent"></i>-->
                                        </span> 
                                        <span *ngIf="item['inPaid'] == 'No'">
                                            |
                                            <!-- <i (click)="OpenReceiptModal(Receipts,item['inNumber'],item['inTotVal'],item['inAmtPaid'],item['unUnitID'])" tooltip="Generate Receipt" style="cursor: pointer;" class="fa fa-newspaper-o"></i> -->
                                            <!-- <a (click)="OpenReceiptModal(Receipts,item['inNumber'],item['inTotVal'],item['inAmtPaid'],item['unUnitID'])" tooltip="Generate Receipt" style="cursor: pointer;">Generate Receipt</a> -->
                                            
                                                <svg height="15" width="20" class="blinking">
                                                    <circle cx="10" cy="10" r="5" fill="orange" />
                                                    Sorry, your browser does not support inline SVG.  
                                                  </svg> <a (click)="payThroughICICIPGtest($event,item.inid,item.unUnitID)" tooltip="Pay now" style="cursor: pointer; font-size: 12px;">Pay now</a>
                                       
                                        </span>
                                        <span *ngIf="item['inPaid'] == 'Yes'">
                                            |
                                            <!-- <i (click)="OpenViewReceiptModal(ViewReceiptTemplate)" tooltip="View Receipt" style="cursor: pointer;" class="fa fa-newspaper-o"></i> -->
                                            <a (click)="OpenViewReceiptModal(ViewReceiptTemplate)" tooltip="View Receipt" style="cursor: pointer; font-size: 12px;">View Receipt</a>
                                        </span>
                                    </td>
                                    <td *ngIf="toggle == 'toggleNo'">
                                        <input class="chkBox" type="checkbox" [value]="item.inid" [checked]='checkAll'
                                            (change)='toggleIsChecked($event)'>
                                    </td>
                                </ng-container>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="7">
                                    <mfBootstrapPaginator></mfBootstrapPaginator>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <!--Dashboard icons end-->

        </div>

    </div>
    <!--rightBar start-->
    <!-- <app-right-bar></app-right-bar> -->
    <!--rightBar end-->
</div>
<!--/*/*/*/*/* RESIDENT INVOICE END /*/*/*/*/*-->




<ng-template #template1>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Modal</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        This is a modal.
    </div>
</ng-template>

<ng-template #template>
    <div id="viewinvoicetemplateId" class="modal-content1">
        <div class="modal-header" style="padding-bottom: 0;">
            <!-- <h4 class="modal-title" style="margin-left: 42%" id="myModalLabel">View Invoice</h4> -->
            <ul style="list-style-type: none;padding: 0;">
                <li style="display: block"><img alt="" class="img-responsive" src="../../assets/images/association.jpeg"
                        style="width:57px;height:50px;" /></li>
                <li><span>
                        {{associationDetails.asAsnName}}, {{associationDetails.asAddress}},
                        {{associationDetails.asCountry}}, {{associationDetails.asPinCode}}
                    </span></li>
            </ul>
            <ul class="pull-right">
                <li style="display: block"><button type="button" class="close"
                        style="margin: -2rem -1rem -1rem auto !important;" aria-label="Close" (click)="modalRef.hide()">
                        <span aria-hidden="true">&times;</span>
                    </button></li>
                <label style="position: absolute;font-size:18px;left:36%;color: #f79321 !important;">MAINTENANCE
                    INVOICE</label>
                <li style="display: block" (click)='printTemplate()'><img src="../../assets/images/printorange.jpeg"
                        width="40px" height="40px" style="cursor: pointer" /></li>
            </ul>
        </div>

        <div class="modal-body" style="padding-top: 0px;">
            <div class="newInvoice" id="printInvoiceId">

                <!-- 
              <div class="row">
                <div class="col-sm-6 col-xs-6">
                  <img alt="" class="img-responsive" src="../../assets/images/newLogo.png"
                    style="width:90px;height:50px;margin-right: 100%" />
                  <span>
                    {{associationDetails.asAsnName}}, {{associationDetails.asAddress}},
                    {{associationDetails.asCountry}}, {{associationDetails.asPinCode}}
                  </span>
                </div>
                <div class="col-sm-6 col-xs-6">
                  <button class="mdButton1" style="position: absolute;margin-left: 58%;margin-top: 1%;" id="btnPrint" onclick="window.print()">Print Invoice</button>
                </div>
              </div> -->
                <!-- <div class="row" style="margin-bottom: 30px">
                <div class="col-sm-12 col-xs-12">
                  <label style="position: absolute;font-size:18px;left:46%;color: #f79321 !important;">INVOICE</label>
                </div>
              </div> -->
                <div class="row">
                    <div class="col-sm-12 col-xs-12">
                        <p>
                            <span class="pull-left"><b>Invoice Date :</b> {{invoiceDate | date: "MMMM d, y"}}</span><br>
                            <span class="pull-left" style="margin: 0% 0% 0% 0%;"><b>Due Date : </b>
                                {{asdPyDate | date: "MMMM d, y"}}</span>
                            <span class="pull-right"><b>Invoice No : </b> {{invoiceNumber}}</span>
                        </p>
                    </div>
                </div>

                <hr style="margin-top: 5px; height: 2px; background:#CCC;">

                <div class="row">
                    <div class="col-sm-6 col-xs-6">
                        <address style="margin-bottom: 0;">
                            <strong>For : </strong>
                            <span>{{OwnerFirstName}} {{OwnerLastName}} </span> <br />
                            <span style="margin-left: 8%;color:blue">{{OwnerEmail}}</span>
                        </address>
                    </div>
                    <div class="col-sm-3 col-xs-3">

                    </div>
                    <!-- <div class="col-sm-3 col-xs-3" style="text-align:center;padding: 0">
                  <strong>Due Date:</strong>
                  <span class="show"> {{asdPyDate | date :  "dd-MM-yyyy"}}</span>
                </div> -->
                </div>
                <div class="row" style="height: 50px;width:99.5%;margin: auto;margin-top: 20px;border: 1px solid black">
                    <span style="position: absolute;left: 40%;margin-top: 1.3%;font-size: 1.5rem">INVOICE DETAILS</span>
                </div>

                <div class="row" style="width:99.5%;margin: auto;margin-top: 0">
                    <table style="width: 100%">
                        <thead>
                            <tr style="background-color:orange">
                                <th class="clsAlignCenter clsthBorder">Sl.No</th>
                                <th class="clsAlignCenter clsthBorder">Description</th>
                                <th class="clsalign clsthBorder" style="text-align: center"><span>Taxable Value</span>
                                </th>
                                <th class="clsalign clsthBorder" style="text-align: center"><span>GST</span></th>
                                <!-- <th class="clsalign clsthBorder" style="text-align: center"><span>SGST</span></th> -->
                                <!-- <th class="clsalign clsthBorder" style="text-align: center"><span>IGST</span></th> -->
                                <th class="clsalign clsthBorder" style="text-align: center"><span>Total</span></th>
                                <!-- <th class="clsthBorder"><span style="margin-left: 20%">Amount</span></th> -->
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor='let item of invoiceDetails;let i=index'>

                                <tr *ngIf='previousDue > 0' style="font-weight:bold">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span class="clsspacelft">Previous
                                            Due</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{previousDue}}.00</span></td>
                                </tr>
                                <tr *ngIf='discountedValue > 0' style="font-weight:bold">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span
                                            class="clsspacelft">Discount</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{discountedValue}}.00</span> </td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'water meter' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span class="clsspacelft">Water
                                            Meter</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'common area electric bill' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span style="display:-webkit-box;"
                                            class="clsspacelft">Common Area Electric Bill</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'corpus' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span
                                            class="clsspacelft">Corpus</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'generator bill' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span class="clsspacelft">Generator
                                            Bill</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'housekeeping' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span
                                            class="clsspacelft">Housekeeping</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'one time membership fee' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span class="clsspacelft">One Time
                                            Membership Fee</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'one time occupancy fee' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span class="clsspacelft">One Time
                                            Occupancy Fees</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'renting fees' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span class="clsspacelft">Renting
                                            Fees</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'security fees' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span class="clsspacelft">Security
                                            Fees</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'Fixed Maintenance' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span class="clsspacelft">Fixed
                                            Maintenance</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'bill' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span
                                            class="clsspacelft">Bill</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'one time onboarding fee' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span class="clsspacelft">One Time
                                            OnBoarding Fees</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                                <tr *ngIf="item['idDesc'] == 'unsold rental fees' && item['idValue'] > 0">
                                    <td class="clsAlignCenter clsBorder">{{i+1}}</td>
                                    <td class="clsBorder" style="text-align: left;"><span class="clsspacelft">Unsold
                                            Rental Fees</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <td class="clsBorder"><span style="margin-left: 44%">-</span></td>
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <!-- <td class="clsBorder"><span style="margin-left: 44%">-</span></td> -->
                                    <td class="clsBorder" style="text-align: right;"><span style="margin-left: 15%;"
                                            class="clsspaceright">₹ {{item['idValue']}}.00</span></td>
                                </tr>
                            </ng-container>
                            <!-- <tr>
                        <td class="clsAlignCenter clsBorder">{{i}}</td>
                        <td class="clsBorder"><span style="padding: 0 61px;display: inherit;">Maintenance Charges:Maintenance Charges for July to Sep 2019</span></td>
                        <td class="clsBorder" style="text-align: right;"><span>13,005.00</span></td>
                        <td class="clsBorder"></td>
                        <td class="clsBorder"></td>
                        <td class="clsBorder"></td>
                        <td class="clsBorder" style="text-align: right;"><span>13,005.00</span></td>
                    </tr> -->
                            <!-- <tr>
                        <td class="clsAlignCenter clsBorder">{{i}}</td>
                        <td class="clsBorder"><span style="margin-left: 20%">Late Payment Charges/Income: Late</span></td>
                        <td class="clsBorder" style="text-align: right;"><span>91.00</span></td>
                        <td class="clsBorder" style="text-align: right;"><span style="display: block">8.19</span>
                         <span>@9.00%</span></td>
                        <td class="clsBorder" style="text-align: right;"><span style="display: block">8.19</span>
                         <span>@9.00%</span></td>
                        <td class="clsBorder"></td>
                        <td class="clsBorder" style="text-align: right;"><span>107.38</span></td>
                      </tr> -->
                            <tr style="border:1px solid black;">
                                <td class="clsBorder" colspan="6" style="text-align:right;"><span
                                        style="font-size:1rem;font-weight: bold">Sub Total</span></td>
                                <td class="clsBorder" style="text-align:right;"><span class="clsspaceright">₹
                                        {{InvoiceValue}}.00</span></td>
                            </tr>
                            <tr style="border: 1px solid black;">
                                <td class="clsBorder" colspan="7" style="font-weight: bold;text-align:center;">Amount in
                                    Words :<strong style="text-transform: capitalize;">
                                        {{InvoiceValue | words}} Rupees Only</strong></td>
                            </tr>
                        </tbody>
                    </table>

                </div>
                <!-- <div class="row clsTotalInvoice" style="width:99.5%;margin: auto;height:67px">
                <div style="border-right: 1px solid black;width: 87.2%;text-align: right;padding-top: 8px;">
                  <span style="font-size:1.5rem;">Sub Total</span>
                  <p style="text-align: left;">Amount in Words : <strong style="text-transform: capitalize;">
                    {{InvoiceValue | words}} Rupees Only</strong></p>
                </div>
                <div style="margin-left: 11px; margin-top: 20px;">
                  <span>₹ {{InvoiceValue}}.00</span>
                </div>
              </div> -->
                <div class="row">
                    <div class="col-sm-11 col-xs-11">
                        <!-- <p style="text-align: right;margin-top: 5px;">Amount in Words : <strong style="text-transform: capitalize;">
                      {{InvoiceValue | words}} Rupees Only</strong></p> -->
                    </div>
                </div>

                <!--div removed-->
                <div class="row">
                    <ul class="clsTxtIndnt">
                        <li style="margin-top:4px;">
                            <strong style="color:black;text-align:left;display:block;position: relative;">Due upon
                                receipt</strong>
                        </li>
                        <li>
                            <h4 style="margin-top: 5px; margin-bottom:0px;color: black;position: relative; ">
                                {{associationDetails.asAsnName}}
                                Association </h4>
                        </li>
                        <li>
                            <p style="color: black;position: relative;">Tel : {{associationDetails.asMgrMobile}}<br />
                                {{associationDetails.asAsnName}}, {{associationDetails.asAddress}},
                                {{associationDetails.asCountry}},
                                {{associationDetails.asPinCode}} <br /> <a
                                    href="https://oyespace.com/">{{associationDetails.asWebURL}}</a><br />
                                <a href="mailto:{{associationDetails.asAsnEmail}}"
                                    style="color: black;">{{associationDetails.asAsnEmail}}</a></p>
                        </li>
                    </ul>
                </div>

                <div class="row" style="display: flex">
                    <strong style="padding-left:42px;">Powered by </strong>
                    <p style="position: absolute;margin-top:3%"><a href="https://oyespace.com" target="_blank"> <img
                                src="../../assets/images/OyeSociety.png"
                                style="width:135px;height:50px;padding-left: 39px;" /></a></p>
                    <p id="makePaymentButton">
                        <button type="button" (click)="onButtonClick(totalAmountPaid($event))"
                            class="btn btn-success">Pay Now</button>
                    </p>
                    <p id="generateReceiptButton">
                        <button type="button" (click)="generateReceipt(genteRecptModal)"
                            class="mdButton1">GenerateReceipt</button>
                    </p>
                </div>

                <ng-container class="row paymentGatewayPage animateIt" *ngIf="showGateWay">
                    <div class="row">
                        <strong>
                            <h4>Please choose from the following Payment options</h4>
                        </strong>
                    </div>

                    <div class="row">
                        <div class="col-sm-4 col-xs-4 pay" >
                            <a (click)="iciciPay($event)" >
                                <img  src="assets/images/icici.jpg" alt="ICICI Bank" class="img-responsive" />
                                <h6><b>₹ {{totalAmountPaid()}} + Service Fee & GST = ₹ {{invValFinal}}</b></h6>
                            </a>
                        </div>

                        <div class="col-sm-4 col-xs-4">
                            <a href="" (click)="kotakPay($event)">
                                <img src="assets/images/razorpay.jpg" alt="Razorpay" class="img-responsive" />
                                <h6><b>₹ {{totalAmountPaid()}} + Service Fee & GST = ₹ {{ravValFinal}} </b></h6>
                            </a>
                        </div>

                        <div class="col-sm-4 col-xs-4">
                            <a href="" (click)="axisPay($event)">
                                <img src="assets/images/instamojo.jpg" alt="Instamojo" class="img-responsive" />
                                <h6><b>₹ {{totalAmountPaid()}} + Service Fee & GST = ₹ {{invValFinal}}</b></h6>
                            </a>
                        </div>
                        <div class="col-sm-4 col-xs-4">
                            <a href="" (click)="hdfcPay($event)">
                                <img src="assets/images/instamojo.jpg" alt="Instamojo" class="img-responsive" />
                                <h6><b>₹ {{totalAmountPaid()}} + Service Fee & GST = ₹ {{invValFinal}}</b></h6>
                            </a>
                        </div>
                    </div>
                </ng-container>

            </div>
            <br />
            <br />
            <!-- <div class="row">
              <div class="col-xs-12">
                <button class="mdButton1 pull-right" id="btnPrint" onclick="window.print()">Print Invoice</button>
              </div>
            </div> -->


        </div>
    </div>
</ng-template>

<ng-template id="generatereceiptmodalId" #genteRecptModal>
    <div class="modal-content">
        <div class="modal-header">
            <ul class="ulclass" style="list-style-type: none">
                <li class="liclass" style="display: flex;list-style-type: none">
                    <label style="position: absolute;font-size:18px;left:41%;color: #f79321 !important;">GENERATE
                        RECEIPT</label>
                    <button type="button" class="close" style="margin: -2rem -1rem -1rem 1050px !important;"
                        aria-label="Close" (click)="modalRefForGenerateRecipt.hide()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </li>
            </ul>
        </div>
    </div>

    <div class="modal-body">
        <!---->
        <div class="row">
            <div class="col-sm-2">
            </div>
            <div class="col-sm-2" style="text-align:end;">
                <label style="font-size:24px;">Select Block :</label>
            </div>
            <div class="col-sm-6">
                <div class="form-group"
                    [ngClass]="{'has-error' : blocksbyassociationControl.invalid && blocksbyassociationControl.touched}">
                    <select class="ui dropdown search methodDropdown" name="blkBlockID" [(ngModel)]="blkBlockID"
                        (change)="getcurrentblockdetails(blkBlockID)" required #blocksbyassociationControl='ngModel'>
                        <option disabled="true" selected="true" value="">Block Name</option>
                        <option *ngFor='let blck of allblocksbyassnid' [value]="blck['blBlockID']">
                            {{blck['blBlkName']}}
                        </option>
                    </select>
                    <p class="alerts" *ngIf="blocksbyassociationControl.invalid && blocksbyassociationControl.touched">
                        Please select
                        BlockName</p>
                </div>
            </div>
            <div class="col-sm-2">
                <!-- <a (click)="gotoviewreceipt()">
                      <button type="button" class="btn btn-danger pull-right"><i class="fa fa-times"></i> Cancel</button>
                    </a> -->
            </div>
        </div>

        <div class="card">
            <form #genRe='ngForm' role="form">
                <div class="row">
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : unUnitIDControl.invalid && unUnitIDControl.touched}">
                            <label>Select Unit <span class="red">*</span></label>
                            <select class="custom-select" required name="pyid" #unUnitIDControl='ngModel'
                                [(ngModel)]="pyid" (change)="rowDetails(pyid,'')">
                                <option disabled="true" value="">Select Unit </option>
                                <option *ngFor='let item of unpaidUnits' [value]="item['pyid']">
                                    {{item['unUnitID']}}
                                </option>
                            </select>
                            <p class="alerts" *ngIf="unUnitIDControl.invalid && unUnitIDControl.touched"> Please Select
                                Unit</p>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : invoiceControl.invalid && invoiceControl.touched}">
                            <label>Invoice <span class="red">*</span></label>
                            <input type="text" class="form-control" name="invoice" [(ngModel)]="invoice"
                                #invoiceControl='ngModel' placeholder="Invoice Number*" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label>Amount Due<span class="red">*</span></label>
                            <input type="text" class="form-control" name="amountDue" [(ngModel)]="amountDue"
                                placeholder="Amount Due" disabled />
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : amountPaidControl.invalid && amountPaidControl.touched}">
                            <label>Amount Paid <span class="red">*</span></label>
                            <input type="text" class="form-control" name="amountPaid" [(ngModel)]="amountPaid"
                                #amountPaidControl='ngModel' placeholder="Amount Paid"
                                pattern="^[0-9]+(\.[0-9]{1,2})?$" />
                            <p class="alerts" *ngIf="amountPaidControl.invalid && amountPaidControl.touched"> Please
                                Enter Amount Paid</p>
                            <p class="alerts" *ngIf="amountPaidControl.errors?.pattern"> Please Enter Valid Amount Paid
                            </p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : paymentDescriptionControl.invalid && paymentDescriptionControl.touched}">
                            <label>Payment Description <span class="red">*</span></label>
                            <input type="text" class="form-control" name="paymentDescription"
                                [(ngModel)]="paymentDescription" #paymentDescriptionControl='ngModel'
                                placeholder="Payment Description" disabled />
                            <p class="alerts"
                                *ngIf="paymentDescriptionControl.invalid && paymentDescriptionControl.touched"> Please
                                Select Date of
                                Payment</p>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group" [ngClass]="{'has-error' : bankControl.invalid && bankControl.touched}">
                            <label for="validationBABName">Select Bank <span class="red">*</span></label>
                            <select name="bankname" [(ngModel)]="bankname" #bankControl='ngModel'
                                class="custom-select form-control">
                                <option value=''>Bank</option>
                                <option *ngFor='let bank of bankList' [value]="bank">
                                    {{bank}}
                                </option>
                            </select>
                            <div *ngIf="bankControl.invalid && bankControl.touched">
                                <p class="alerts" *ngIf="bankControl.errors.required">Please Select Bank</p>
                            </div>
                        </div>
                    </div>

                    <div *ngIf='false'>
                        <div class="form-group"
                            [ngClass]="{'has-error' : paymentmethodControl.invalid && paymentmethodControl.touched}">
                            <label>Payment Method <span class="red">*</span></label>
                            <select class="custom-select" name="paymentmethod" [(ngModel)]="paymentmethod"
                                #paymentmethodControl='ngModel' required (change)="showMethod(paymentmethod,'')">
                                <option disabled="true" selected="true" value="">Select Method </option>
                                <option *ngFor='let paymentby of methodArray' [value]="paymentby['id']">
                                    {{paymentby['name']}}
                                </option>
                            </select>
                            <p class="alerts" *ngIf="paymentmethodControl.invalid && paymentmethodControl.touched">
                                Please Select Method
                            </p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6 col-xs-12" *ngIf="checkField == 'Cash' ">
                        <div class="form-group"
                            [ngClass]="{'has-error' : voucherNoControl.invalid && voucherNoControl.touched}">
                            <label>Voucher No <span class="red">*</span></label>
                            <input type="text" class="form-control" name="voucherNo" [(ngModel)]="voucherNo"
                                #voucherNoControl='ngModel' placeholder="Voucher No " required />
                            <p class="alerts" *ngIf="voucherNoControl.invalid && voucherNoControl.touched"> Please Enter
                                Voucher No</p>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12" *ngIf="checkField == 'DemandDraft' ">
                        <div class="form-group" [ngClass]="{'has-error' : ddNoControl.invalid && ddNoControl.touched}">
                            <label>Demand Draft No <span class="red">*</span></label>
                            <input type="text" class="form-control" name="ddNo" [(ngModel)]="ddNo"
                                #ddNoControl='ngModel' placeholder="Demand Draft No " required />
                            <p class="alerts" *ngIf="ddNoControl.invalid && ddNoControl.touched"> Please Enter Demand
                                Draft No</p>
                        </div>
                    </div>
                </div>

                <div class="row" *ngIf="checkField == 'Cheque'">
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : chequeNoControl.invalid && chequeNoControl.touched}">
                            <label>Cheque No <span class="red"></span></label>
                            <input type="text" class="form-control" name="chequeNo" [(ngModel)]="chequeNo"
                                #chequeNoControl='ngModel' placeholder="Cheque No " pattern="^\d+$" />
                            <p class="alerts" *ngIf="chequeNoControl.errors?.pattern"> Please Enter Valid Cheque No</p>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : chequeDateControl.invalid && chequeDateControl.touched}">
                            <label>Cheque Date <span class="red"></span></label>

                            <input type="text" class="form-control" name="chequeDate" #chequeDateControl='ngModel'
                                placeholder="Chequedate" required [(ngModel)]="chequeDate" bsDatepicker
                                [bsConfig]="{ dateInputFormat: 'MM/DD/YYYY' }" />
                        </div>
                    </div>
                </div>

                <div class="form-group pull-right">
                    <button type="submit" class="btn btn-primary btn-lg" (click)="generateReceipt(generateReceiptModal1)"
                        style="margin-right: 3px"> Create <img *ngIf="true"
                            src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" /></button>
                    <button type="button" (click)="resetForm()" class="btn btn-primary btn-lg">Reset </button>
                </div>

            </form>
        </div>
        <!---->
    </div>
</ng-template>

<form #kotakform ngNoForm action="https://test.ccavenue.com/transaction/transaction.do?command=initiateTransaction"
    method="POST" name="kotakPayForm" id="nonseamless">
    <input type="hidden" id="encRequest" name="encRequest" [ngModel]="kotakPayForm.encRequest">
    <input type="hidden" name="access_code" id="access_code" [ngModel]="kotakPayForm.accessCode">
</form>

<ng-template #discountModal>
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="myModalLabel">Discount Invoice</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" style="padding-top: 0px;">
            <form name="dscntInv" role="form" autocomplete="off" enctype="multipart/form-data">
                <!--------------------------------  Block Details Section Starts Here  ------------------------>
                <fieldset class="scheduler-border">
                    <legend class="scheduler-border headingOrange">Invoice Details</legend>
                    <div class="row">
                        <div class="col-sm-4 col-xs-12">
                            <div class="form-group">
                                <label>Invoice Number</label>
                                <input type="text" name="dscntInvinvoiceNumber" [(ngModel)]="dscntInvinvoiceNumber"
                                    class="form-control" placeholder="Invoice Number " disabled />
                            </div>
                        </div>
                        <div class="col-sm-4 col-xs-12">
                            <div class="form-group"
                                [ngClass]="{'has-error' : dscntInvdiscountedAmountControl.invalid && dscntInvdiscountedAmountControl.touched}">
                                <label>Discounted Amount<span class="red">*</span></label>
                                <input type="text" required name="dscntInvdiscountedAmount" (keypress)=_keyPress1($event)
                                    #dscntInvdiscountedAmountControl='ngModel' [(ngModel)]="dscntInvdiscountedAmount"
                                    class="form-control" (blur)="checkDiscountedAmount(dscntInvdiscountedAmount)"
                                    placeholder="Amount After Discount" />
                                <p class="alerts"
                                    *ngIf="dscntInvdiscountedAmountControl.invalid && dscntInvdiscountedAmountControl.touched">
                                    Discounted
                                    Amount</p>
                            </div>
                        </div>
                        <div class="col-sm-4 col-xs-12">
                            <div class="form-group"
                                [ngClass]="{'has-error' : dscntInvdescriptionControl.invalid && dscntInvdescriptionControl.touched}">
                                <label>Discount Reason <span class="red">*</span></label>
                                <input type="text" required name="dscntInvdescription"
                                    #dscntInvdescriptionControl='ngModel' (click)='emptyDisplaytext()'
                                    [(ngModel)]="dscntInvdescription" class="form-control"
                                    placeholder="Discount Reason" />
                                <p class="alerts"
                                    *ngIf="dscntInvdescriptionControl.invalid && dscntInvdescriptionControl.touched">
                                    Discount Reason</p>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-xs-12">
                            <div class="btn-group pull-right">
                                <button type="button" class="btn btn-primary-purple nextBtn"
                                    (click)="discountInvoice(dscntInvinvoiceID,dscntInvdiscountedAmount,dscntInvdescription)"><i
                                        class="fa fa-floppy-o"></i> Update & Save</button>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </form>

        </div>
    </div>

</ng-template>

<ng-template #invoicePop>
    <div id="Invoice">
        <div class="modal-header1">
            <div class="inv-details">
                <img style="width: 200px;" src="../../assets/images/icons/invoice.png">
                <p><strong>Invoice Date:</strong> {{invoiceDate | date: "MMMM d, y"}}</p>
                <p><strong>Due Date:</strong> {{asdPyDate | date: "MMMM d, y"}}</p>
                <p><strong>Invoice No:</strong> {{invoiceNumber}}</p>
            </div>
            <div class="inv-details t-right">
                <!-- <img (click)="printInvoice()" src="../../assets/images/icons/printer.png"> -->
                <button style="margin: -7% 0% 0% 0%;" type="button" class="close" aria-label="Close" (click)="modalRef.hide()"><span aria-hidden="true">&times;</span></button>
                <h2 class="inv-title">{{associationDetails['asAsnName']}}</h2>
                <p>{{associationDetails.asAddress}}</p>
                <p>{{associationDetails.asCountry}}-{{associationDetails.asPinCode}}</p>
            </div>

        </div>
        <div class="modal-body">
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th colspan="4" style="text-align: center">Invoice Details</th>

                        </tr>
                        <tr>
                            <th>Sll No</th>
                            <th>Description</th>
                            <!-- <th>Taxable Value</th>
                            <th>CGST</th>
                            <th>SGST</th> -->
                            <th>GST</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- <ng-container>
                            <tr *ngIf='discountedValue > 0' style="font-weight:bold">
                                <td>{{1}}</td>
                                <td><span>Discount</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{discountedValue}}.00</span> </td>
                            </tr>
                        </ng-container> -->
                        <!-- <ng-container *ngFor='let item of invoiceDetails;let i=index'>

                            <tr *ngIf='previousDue > 0' style="font-weight:bold">
                                <td>{{i+1}}</td>
                                <td><span>Previous
                                        Due</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{previousDue}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'Water Meter' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>Water
                                        Meter</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'Discount Value' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>Discount Value</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'Common Area Electric Bill' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>Common Area Electric Bill</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'Corpus' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>Corpus</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'Generator' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>Generator
                                        Bill</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'HouseKeeping' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>Housekeeping</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'One Time Membership fee' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>One Time
                                        Membership Fee</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'One Time Occupancy Fees' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>One Time
                                        Occupancy Fees</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'Renting Fees' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>Renting
                                        Fees</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'Security Fees' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>Security
                                        Fees</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'Fixed Maintenance' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>Fixed
                                        Maintenance</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'xc' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>xc</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'One Time Onboarding fees' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>One Time
                                        OnBoarding Fees</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'bill' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>All Sold Owner Occupied Units,</span><span>Tenant Occupied Units,</span><span>All UnSold Tenant Occupied Units</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                            <tr *ngIf="item['idDesc'] == 'Unsold Rental Fees' && item['idValue'] > 0">
                                <td>{{i+1}}</td>
                                <td><span>Unsold
                                        Rental Fees</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                        </ng-container> -->
                        <ng-container *ngFor='let item of invoiceDetails;let i=index'>
                            <tr>
                                <td>{{i+1}}</td>
                                <td><span>{{item['idDesc']}}</span></td>
                                <td><span>-</span></td>
                                <td><span>₹ {{item['idValue']}}.00</span></td>
                            </tr>
                        </ng-container>
                        <tr>
                            <td colspan="3">Grand Total</td>
                            <td>{{InvoiceValue}}.00</td>
                        </tr>

                    </tbody>
                </table>
            </div>
            <p class="amt"><strong>Amount in words:</strong> Rupees {{InvoiceValue | words}} Only</p>
            <div class="row">
            <div class="inv-details col-sm-6">
                
                <p><strong>Due upon receipt</strong></p>
                <h2 class="inv-title-purple">{{associationDetails.asAsnName}}</h2>
                <!-- <p><strong>Mobile no:</strong>{{associationDetails.asMgrMobile}}</p> -->
                <p><strong>Address: </strong>{{associationDetails.asAddress}}</p>
                <p>{{associationDetails.asCountry}}-{{associationDetails.asPinCode}}</p>
            </div>
            <div class="col-sm-6">
                <p style="border: 1px solid gray !important; width: 100%; height: 40px;">Comments: They have paid after 6 days.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12" style="border-top: 1px solid black; text-align: center; color: darkblue;">
                <p>This is a digitally generated invoice; signature not required.</p>
            </div>
        </div>
            <!--Payment Options-->
            
            <div class="payment-opt" *ngIf="payopt">
                
                <div class="pay" id="pay">
                    <img src="../../assets/images/icons/icic.png" (click)="payThroughICICIPG($event)">
                    <p>₹0+Service Fee & GST</p>
                </div>
                <div class="pay">
                    <img src="../../assets/images/icons/hdfc.png" (click)="hdfcPay($event)">
                    <p>₹0+Service Fee & GST</p>
                </div>
                <div class="pay">
                    <img src="../../assets/images/icons/axis.png">
                    <p>₹0+Service Fee & GST</p>
                </div>
                <div class="pay">
                    <img src="../../assets/images/icons/kotak.png">
                    <p>₹0+Service Fee & GST</p>
                </div>
            </div>
            <!--Payment Options-->
            <div class="pay-bt">
                <!-- <div class="fb-share-button" data-href="http://localhost:4200/invoice" data-layout="button_count"><a target="_blank" href="https://www.facebook.com/messages" class="fb-xfbml-parse-ignore">
                    <i style="font-family:FontAwesome !important;margin-top: 5px;margin-right: 24px;font-size: 24px;" class="fa fa-share-alt" aria-hidden="true"></i></a>
                </div> -->
                <!-- <button (click)="printInvoice()" class="btn-primary-purple"><i style="font-family:FontAwesome !important" class="fa-file-pdf-o" aria-hidden="true"></i>&nbsp;Save as PDF</button> -->
                <button (click)="printInvoice()" class="btn-primary-purple"><i class="fa fa-print" aria-hidden="true"></i>Print</button>
                <!-- <button (click)="viewPayOpt()" class="btn-primary-purple"><i class="fa fa-money" aria-hidden="true"></i>Pay Now</button> -->
                <button *ngIf="globalservice.mrmroleId != 1 || localMrmRoleId == '2'" (click)="payThroughICICIPG($event)" style="padding-left: 0px;margin-left: 2px;" class="btn-primary-purple">
                    <svg height="15" width="20" class="blinking">
                    <circle cx="10" cy="10" r="5" fill="orange" />
                    Sorry, your browser does not support inline SVG.  
                  </svg><i class="fa fa-money" aria-hidden="true"></i>Pay Now</button>
                <!-- <button (click)="generateReceipt(generateReceiptModal1)" class="btn-primary-purple"><i class="fa fa-file-text-o" aria-hidden="true"></i> Generate Receipt</button> -->
            </div>

        </div>
    </div>
</ng-template>

<ng-template #generateReceiptModal1>

    <div class="modal-header">

        <h4 class="modal-title pull-left">Generate Receipt</h4>

        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">

            <span aria-hidden="true">&times;</span>

        </button>

    </div>

    <div class="modal-body">

        <label class="control-label">Select Block</label>
        <div class="dropdown blk-drop">
            <button class="btn btn-primary dropdown-toggle sdm br" type="button"
                data-toggle="dropdown">{{CurrentBlockName}}
                <i class="fa fa-angle-down fa-1x" aria-hidden="true"></i></button>
            <ul class="dropdown-menu fullw">
                <li *ngFor='let blck of allBlocksByAssnID'
                    (click)="getCurrentBlockDetailsForGenRecpt(blck['blBlockID'],blck['blBlkName'])">
                    <a>{{blck['blBlkName']}}</a></li>
            </ul>
        </div>

        <div class="guest">

            <div class="guest-input">

                <div class="form-group">
                    <label class="control-label">Select Unit</label>
                    <div class="dropdown">
                        <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                            data-toggle="dropdown">{{unUnitID}}
                            <i class="fa fa-angle-down fa-1x" aria-hidden="true"></i></button>
                        <ul class="dropdown-menu fullw">
                            <li (click)="rowDetails(item['pyid'],item['unUnitID'])" *ngFor='let item of unpaidUnits'>
                                <a>{{item['unUnitID']}}</a></li>
                        </ul>
                    </div>
                </div>

                <div class="form-group" [ngClass]="{'has-error' : invoiceControl.invalid && invoiceControl.touched}">
                    <label class="control-label">Invoice</label>
                    <input type="text" class="form-control" name="invoice" [(ngModel)]="invoice"
                        #invoiceControl='ngModel' placeholder="Invoice Number*" disabled />
                </div>
                <div class="form-group">
                    <label class="control-label">Amount Due</label>
                    <input type="text" class="form-control" name="amountDue" [(ngModel)]="amountDue"
                        placeholder="Amount Due" disabled />
                </div>
            </div>
        </div>

        <div class="guest-input">

            <div class="form-group" [ngClass]="{'has-error' : amountPaidControl.invalid && amountPaidControl.touched}">
                <label class="control-label">Amount Paid</label>
                <input type="text" class="form-control" name="amountPaid" [(ngModel)]="amountPaid"
                    #amountPaidControl='ngModel' placeholder="Amount Paid" pattern="^[0-9]+(\.[0-9]{1,2})?$" />
                <p class="alerts" *ngIf="amountPaidControl.invalid && amountPaidControl.touched"> Please Enter Amount
                    Paid</p>
                <p class="alerts" *ngIf="amountPaidControl.errors?.pattern"> Please Enter Valid Amount Paid</p>
            </div>

            <div class="form-group"
                [ngClass]="{'has-error' : paymentDescriptionControl.invalid && paymentDescriptionControl.touched}">
                <label class="control-label">Payment Description</label>
                <input type="text" class="form-control" name="paymentDescription" [(ngModel)]="paymentDescription"
                    #paymentDescriptionControl='ngModel' placeholder="Payment Description" disabled />
                <p class="alerts" *ngIf="paymentDescriptionControl.invalid && paymentDescriptionControl.touched"> Please
                    Select Date of Payment</p>
            </div>

            <div class="form-group">
                <label class="control-label">Select Bank</label>
                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                        data-toggle="dropdown">{{BankName}}
                        <i class="fa fa-angle-down fa-1x" aria-hidden="true"></i></button>
                    <ul class="dropdown-menu fullw">
                        <li *ngFor='let bank of bankList' (click)='getBankName(bank)'><a>{{bank}}</a></li>
                    </ul>
                </div>
            </div>

        </div>

        <div class="guest-input">

            <div class="col-sm-12 pull-right">

                <button class="btn btn-primary-purple nextBtn m-r">Reset</button>

                <button class="btn btn-primary-purple nextBtn m-r" (click)='createReceipt()' type="button">Generate</button>

            </div>

        </div>



    </div>

</ng-template>

<ng-template id="generatereceiptmodalId" #generatereceiptmodal>
    <div class="modal-content">
        <div class="modal-header">
            <ul class="ulclass" style="list-style-type: none">
                <li class="liclass" style="display: flex;list-style-type: none">
                    <label style="position: absolute;font-size:18px;left:41%;color: #f79321 !important;">GENERATE
                        RECEIPT</label>
                    <button type="button" class="close" style="margin: -2rem -1rem -1rem 1050px !important;"
                        aria-label="Close" (click)="modalRefForGenerateRecipt.hide()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </li>
            </ul>
        </div>
    </div>

    <div class="modal-body">
        <!---->
        <div class="row">
            <div class="col-sm-2">
            </div>
            <div class="col-sm-2" style="text-align:end;">
                <label style="font-size:24px;">Select Block :</label>
            </div>
            <div class="col-sm-6">
                <div class="form-group"
                    [ngClass]="{'has-error' : blocksbyassociationControl.invalid && blocksbyassociationControl.touched}">
                    <select class="ui dropdown search methodDropdown" name="blkBlockID" [(ngModel)]="blkBlockID"
                        (change)="getcurrentblockdetails(blkBlockID)" required #blocksbyassociationControl='ngModel'>
                        <option disabled="true" selected="true" value="">Block Name</option>
                        <option *ngFor='let blck of allblocksbyassnid' [value]="blck['blBlockID']">
                            {{blck['blBlkName']}}
                        </option>
                    </select>
                    <p class="alerts" *ngIf="blocksbyassociationControl.invalid && blocksbyassociationControl.touched">
                        Please select
                        BlockName</p>
                </div>
            </div>
            <div class="col-sm-2">
                <!-- <a (click)="gotoviewreceipt()">
                  <button type="button" class="btn btn-danger pull-right"><i class="fa fa-times"></i> Cancel</button>
                </a> -->
            </div>
        </div>

        <div class="card">
            <form #genRe='ngForm' role="form">
                <div class="row">
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : unUnitIDControl.invalid && unUnitIDControl.touched}">
                            <label>Select Unit <span class="red">*</span></label>
                            <select class="custom-select" required name="pyid" #unUnitIDControl='ngModel'
                                [(ngModel)]="pyid" (change)="rowDetails(pyid,'')">
                                <option disabled="true" value="">Select Unit </option>
                                <option *ngFor='let item of unpaidUnits' [value]="item['pyid']">
                                    {{item['unUnitID']}}
                                </option>
                            </select>
                            <p class="alerts" *ngIf="unUnitIDControl.invalid && unUnitIDControl.touched"> Please Select
                                Unit</p>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : invoiceControl.invalid && invoiceControl.touched}">
                            <label>Invoice <span class="red">*</span></label>
                            <input type="text" class="form-control" name="invoice" [(ngModel)]="invoice"
                                #invoiceControl='ngModel' placeholder="Invoice Number*" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label>Amount Due<span class="red">*</span></label>
                            <input type="text" class="form-control" name="amountDue" [(ngModel)]="amountDue"
                                placeholder="Amount Due" disabled />
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : amountPaidControl.invalid && amountPaidControl.touched}">
                            <label>Amount Paid <span class="red">*</span></label>
                            <input type="text" class="form-control" name="amountPaid" [(ngModel)]="amountPaid"
                                #amountPaidControl='ngModel' placeholder="Amount Paid"
                                pattern="^[0-9]+(\.[0-9]{1,2})?$" />
                            <p class="alerts" *ngIf="amountPaidControl.invalid && amountPaidControl.touched"> Please
                                Enter Amount Paid</p>
                            <p class="alerts" *ngIf="amountPaidControl.errors?.pattern"> Please Enter Valid Amount Paid
                            </p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : paymentDescriptionControl.invalid && paymentDescriptionControl.touched}">
                            <label>Payment Description <span class="red">*</span></label>
                            <input type="text" class="form-control" name="paymentDescription"
                                [(ngModel)]="paymentDescription" #paymentDescriptionControl='ngModel'
                                placeholder="Payment Description" disabled />
                            <p class="alerts"
                                *ngIf="paymentDescriptionControl.invalid && paymentDescriptionControl.touched"> Please
                                Select Date of
                                Payment</p>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group" [ngClass]="{'has-error' : bankControl.invalid && bankControl.touched}">
                            <label for="validationBABName">Select Bank <span class="red">*</span></label>
                            <select name="bankname" [(ngModel)]="bankname" #bankControl='ngModel'
                                class="custom-select form-control">
                                <option value=''>Bank</option>
                                <option *ngFor='let bank of bankList' [value]="bank">
                                    {{bank}}
                                </option>
                            </select>
                            <div *ngIf="bankControl.invalid && bankControl.touched">
                                <p class="alerts" *ngIf="bankControl.errors.required">Please Select Bank</p>
                            </div>
                        </div>
                    </div>

                    <div *ngIf='false'>
                        <div class="form-group"
                            [ngClass]="{'has-error' : paymentmethodControl.invalid && paymentmethodControl.touched}">
                            <label>Payment Method <span class="red">*</span></label>
                            <select class="custom-select" name="paymentmethod" [(ngModel)]="paymentmethod"
                                #paymentmethodControl='ngModel' required (change)="showMethod(paymentmethod,'')">
                                <option disabled="true" selected="true" value="">Select Method </option>
                                <option *ngFor='let paymentby of methodArray' [value]="paymentby['id']">
                                    {{paymentby['name']}}
                                </option>
                            </select>
                            <p class="alerts" *ngIf="paymentmethodControl.invalid && paymentmethodControl.touched">
                                Please Select Method
                            </p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6 col-xs-12" *ngIf="checkField == 'Cash' ">
                        <div class="form-group"
                            [ngClass]="{'has-error' : voucherNoControl.invalid && voucherNoControl.touched}">
                            <label>Voucher No <span class="red">*</span></label>
                            <input type="text" class="form-control" name="voucherNo" [(ngModel)]="voucherNo"
                                #voucherNoControl='ngModel' placeholder="Voucher No " required />
                            <p class="alerts" *ngIf="voucherNoControl.invalid && voucherNoControl.touched"> Please Enter
                                Voucher No</p>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12" *ngIf="checkField == 'DemandDraft' ">
                        <div class="form-group" [ngClass]="{'has-error' : ddNoControl.invalid && ddNoControl.touched}">
                            <label>Demand Draft No <span class="red">*</span></label>
                            <input type="text" class="form-control" name="ddNo" [(ngModel)]="ddNo"
                                #ddNoControl='ngModel' placeholder="Demand Draft No " required />
                            <p class="alerts" *ngIf="ddNoControl.invalid && ddNoControl.touched"> Please Enter Demand
                                Draft No</p>
                        </div>
                    </div>
                </div>

                <div class="row" *ngIf="checkField == 'Cheque'">
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : chequeNoControl.invalid && chequeNoControl.touched}">
                            <label>Cheque No <span class="red"></span></label>
                            <input type="text" class="form-control" name="chequeNo" [(ngModel)]="chequeNo"
                                #chequeNoControl='ngModel' placeholder="Cheque No " pattern="^\d+$" />
                            <p class="alerts" *ngIf="chequeNoControl.errors?.pattern"> Please Enter Valid Cheque No</p>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group"
                            [ngClass]="{'has-error' : chequeDateControl.invalid && chequeDateControl.touched}">
                            <label>Cheque Date <span class="red"></span></label>

                            <input type="text" class="form-control" name="chequeDate" #chequeDateControl='ngModel'
                                placeholder="Chequedate" required [(ngModel)]="chequeDate" bsDatepicker
                                [bsConfig]="{ dateInputFormat: 'MM/DD/YYYY' }" />
                        </div>
                    </div>
                </div>

                <div class="form-group pull-right">
                    <button type="submit" class="btn btn-primary btn-lg" (click)="generateReceipt(generateReceiptModal1)"
                        style="margin-right: 3px"> Create <img *ngIf="true"
                            src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" /></button>
                    <button type="button" (click)="resetForm()" class="btn btn-primary btn-lg">Reset </button>
                </div>

            </form>
        </div>
        <!---->
    </div>
</ng-template>

<div class="modal-body">
    <form #iciciform ngNoForm action="https://test.ipg-online.com/connect/gateway/processing" method="POST"
        name="iciciPayForm">
        <input type="hidden" name="chargetotal" [ngModel]="iciciPayForm.chargetotal" />
        <input type="hidden" name="txntype" [ngModel]="iciciPayForm.txntype">
        <input type="hidden" name="timezone" [ngModel]="iciciPayForm.timezone" />
        <input type="hidden" name="txndatetime" [ngModel]="iciciPayForm.txndatetime" />
        <input type="hidden" name="hash_algorithm" [ngModel]="iciciPayForm.hash_algorithm" />
        <input type="hidden" name="hash" [ngModel]="iciciPayForm.hash" />
        <input type="hidden" name="storename" [ngModel]="iciciPayForm.storename" />
        <input type="hidden" name="mode" [ngModel]="iciciPayForm.mode" />
        <!-- <input type="hidden" name="paymentMethod" [ngModel]="iciciPayForm.paymentMethod" /> -->
        <input type="hidden" name="currency" [ngModel]="iciciPayForm.currency" />
        <input type="hidden" name="responseSuccessURL" [ngModel]="iciciPayForm.responseSuccessURL" />
        <input type="hidden" name="responseFailURL" [ngModel]="iciciPayForm.responseFailURL" />
        <input type="hidden" name="language" [ngModel]="iciciPayForm.language" />
        <!-- <input type="submit" value="Submit"> -->
    </form>

    <form #kotakform ngNoForm action="https://test.ccavenue.com/transaction/transaction.do?command=initiateTransaction"
        method="POST" name="kotakPayForm" id="nonseamless">
        <input type="hidden" id="encRequest" name="encRequest" [ngModel]="kotakPayForm.encRequest">
        <input type="hidden" name="access_code" id="access_code" [ngModel]="kotakPayForm.accessCode">
    </form>
</div>

<ng-template #Receipts>
    <div class="modal-header">
        <h4 class="modal-title orange">RECEIPT</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
          <div class="card">
            <form #genRe='ngForm' role="form">
              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group" [ngClass]="{'has-error' : invoiceControl.invalid && invoiceControl.touched}">
                    <label>Invoice Number</label>
                    <input type="text" class="form-control" name="invoicenumber" [(ngModel)]="invoicenumber" #invoiceControl='ngModel'
                      placeholder="Invoice Number" disabled />
                  </div>
                </div>
                <div class="col-sm-6 col-xs-12">
                    <div class="form-group">
                      <label>Amount Due</label>
                      <input type="text" class="form-control" name="totalAmountDue" [(ngModel)]="totalAmountDue" placeholder="Amount Due"
                        disabled />
                    </div>
                  </div>
              </div>
              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <div class="form-group" [ngClass]="{'has-error' : amountPaidControl.invalid && amountPaidControl.touched}">
                    <label>Amount Paid <span class="red">*</span></label>
                    <input type="text" class="form-control" name="totalamountPaid" (keyup)="getAmountPaid($event)" (keypress)=_keyPress($event) [(ngModel)]="totalamountPaid"
                      #amountPaidControl='ngModel' placeholder="Amount Paid" pattern="^[0-9]+(\.[0-9]{1,2})?$"/>
                    <p class="alerts" *ngIf="amountPaidControl.invalid && amountPaidControl.touched"> Please Enter Amount Paid</p>
                    <p class="alerts" *ngIf="amountPaidControl.errors?.pattern"> Please Enter Valid Amount Paid</p>
                    <p class="alerts" *ngIf="ValidateAmountPaid"> Please Enter Valid Amount to be Paid</p>
                  </div>
                </div>
                <div class="col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Select Payment Method</label>
                        <div class="dropdown">
                            <button class="btn btn-primary dropdown-toggle sdm br form-control" type="button"
                                data-toggle="dropdown">{{paymentMethodType}}
                                <i class="fa fa-angle-down fa-1x" aria-hidden="true"></i></button>
                            <ul class="dropdown-menu fullw">
                                <li *ngFor='let item of methodArray' (click)="showMethod(item['id'],item['displayName'])">
                                    <a>{{item['displayName']}}</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
              </div>
          
              <div class="row" *ngIf="checkField != 'Cash'">
                <div class="col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Select Bank<span class="red">*</span></label>
                        <div class="dropdown">
                                <button class="btn btn-primary dropdown-toggle sdm br form-control"
                                 type="button" data-toggle="dropdown">{{expensedataBABName}}
                                    <i class="fa fa-angle-down fa-1x" aria-hidden="true"></i></button>
                                <ul class="dropdown-menu fullw fdrop">
                                    <li *ngFor='let bank of bankList' (click)='getexpensedataBABName(bank)'><a>{{bank}}</a></li>
                                </ul>
                        </div>
                    </div>
                </div>
              </div>
              <div class="row" *ngIf="checkField == 'Cash'">
                  <div class="col-sm-6 col-xs-12">
                      <div class="form-group" [ngClass]="{'has-error' : voucherNoControl.invalid && voucherNoControl.touched}">
                          <label>Voucher No <span class="red">*</span></label>
                          <input type="text" class="form-control" name="receiptVoucherNo" [(ngModel)]="receiptVoucherNo" #voucherNoControl='ngModel' placeholder="Voucher No " required/>
                          <p class="alerts" *ngIf="voucherNoControl.invalid && voucherNoControl.touched"> Please Enter Voucher No</p>
                      </div>
                  </div>
                  <div class="col-sm-6 col-xs-12">
                      <div class="form-group" [ngClass]="{'has-error' : paymentDateControl.invalid && paymentDateControl.touched}">
                          <label>Payment Date<span class="red">*</span></label>
                          <input type="text" class="form-control" name="paymentDate" #paymentDateControl='ngModel'
                            placeholder="Payment Date" required [bsConfig]="bsConfig" [(ngModel)]="paymentDate" #PaymentDate='bsDatepicker'
                            bsDatepicker [minDate]="minPaymentDateDate" [maxDate]="maxPaymentDateDate"/>
                            <p class="alerts" *ngIf="paymentDateControl.invalid && paymentDateControl.touched"> Please Select Payment Date</p>
                      </div>
                  </div>
              </div>
              <div class="row" *ngIf="checkField == 'DemandDraft'">
                <div class="col-sm-6 col-xs-12">
                    <div class="form-group" [ngClass]="{'has-error' : ddNoControl.invalid && ddNoControl.touched}">
                        <label>Demand Draft No <span class="red">*</span></label>
                        <input type="text" class="form-control" name="receiptddNo" [(ngModel)]="receiptddNo" #ddNoControl='ngModel' placeholder="Demand Draft No " required/>
                        <p class="alerts" *ngIf="ddNoControl.invalid && ddNoControl.touched"> Please Enter Demand Draft No</p>
                    </div>
                </div>
                <div class="col-sm-6 col-xs-12">
                    <div class="form-group" [ngClass]="{'has-error' : demandDraftDateControl.invalid && demandDraftDateControl.touched}">
                        <label>Demand Draft Date <span class="red">*</span></label>
                        <input type="text" class="form-control" name="receiptEXDDDate" #demandDraftDateControl='ngModel'
                            placeholder="Demand Draft Date" required [bsConfig]="bsConfig" [(ngModel)]="receiptEXDDDate" #expdddate='bsDatepicker'
                            bsDatepicker [minDate]="minDemandDraftDate" />
                    
                        <p class="alerts" *ngIf="demandDraftDateControl.invalid && demandDraftDateControl.touched"> Please Select
                            DemandDraft Date</p>
                    </div>
                </div>
              </div>
          
              <div class="row" *ngIf="checkField == 'Cheque'">
                  <div class="col-sm-6 col-xs-12">
                      <div class="form-group" [ngClass]="{'has-error' : chequeNoControl.invalid && chequeNoControl.touched}">
                          <label>Cheque No <span class="red"></span></label>
                          <input type="text" class="form-control" name="receiptChequeNo" [(ngModel)]="receiptChequeNo" #chequeNoControl='ngModel' placeholder="Cheque No " pattern="^\d+$" />
                          <p class="alerts" *ngIf="chequeNoControl.errors?.pattern"> Please Enter Valid Cheque No</p>
                      </div>
                  </div>
                  <div class="col-sm-6 col-xs-12">
                      <div class="form-group" [ngClass]="{'has-error' : chequeDateControl.invalid && chequeDateControl.touched}">
                          <label>Cheque Date <span class="red"></span></label>
          
                          <input type="text" class="form-control" name="receiptChequeDate" #chequeDateControl='ngModel'
                        placeholder="Chequedate" required [(ngModel)]="receiptChequeDate"
                        bsDatepicker [bsConfig]="{ dateInputFormat: 'MM/DD/YYYY' }"/>
                      </div>
                  </div>
              </div>
              <div class="row">
                <div class="col-xs-12"><textarea placeholder="Enter Comments..." rows="4" cols="74" name="comment"></textarea></div>
                
              </div>
              <div class="row">                
                  <button style="float: right;" [disabled]="genRe.invalid || ValidateReceiptModal" type="submit" class="btn btn-primary-purple m-r" (click)="generateInvoiceReceipt()"> Generate</button> 
                  <button style="float: right;" type="button" (click)="resetForm()" class="btn btn-primary-purple m-r">Reset </button>                           
              </div>
          
            </form>
          </div>
    </div>
</ng-template>

<ng-template #ViewReceiptTemplate>
    <div class="modal-header">
        <h4 class="modal-title orange">RECEIPT</h4>
        <!-- <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button> -->
    </div>
    <div class="modal-body">
        <div class="receipt-head">
            <p class="purple">Godrej Association</p>
            <p>A-104</p>
        </div>
        <p class="summary">Receipt Summary</p>
        <div class="receipt-head">
            <div>
                <p><strong>Invoice Number:</strong> A1047367647383</p>
                <p><strong>Payment Date:</strong> November 21,2019</p>
            </div>
            <p>Reciept Id-10498776</p>
        </div>
        <table class="table">

            <tbody>
                <tr>
                    <td>Amout Due</td>
                    <td>₹ 500.00</td>
                </tr>
                <tr>
                    <td>Amount Paid</td>
                    <td>₹ 300.00</td>
                </tr>
                <tr>
                    <td>Current Outstanding</td>
                    <td>(-)₹ 200.00</td>
                </tr>

            </tbody>
        </table>
        <div class="print-receipt">
            <button class="btn-primary-purple"><i class="fa fa fa-print" aria-hidden="true"></i> Print
                Receipt</button>
        </div>
    </div>
</ng-template>